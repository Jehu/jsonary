!function(){function escapeHtml(e){return e+="",e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}"undefined"!=typeof window&&"undefined"==typeof localStorage&&(window.localStorage={}),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.apply(e)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0;n<this.length;n++)if(this[n]===e)return n;return-1}),Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Date.prototype.toISOString||function(){function e(e){var t=String(e);return 1===t.length&&(t="0"+t),t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+e(this.getUTCMonth()+1)+"-"+e(this.getUTCDate())+"T"+e(this.getUTCHours())+":"+e(this.getUTCMinutes())+":"+e(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),Object.create||(Object.create=function(){function e(){}return function(t){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return e.prototype=t,new e}}()),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;a>n;n+=1)o[n]=str(n,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,l),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(e){function t(e){var t=e.match(/^[a-zA-Z\-]+:/);null!=t&&t.length>0?(this.scheme=t[0].substring(0,t[0].length-1),e=e.substring(t[0].length)):this.scheme=null,"//"==e.substring(0,2)?(this.doubleSlash=!0,e=e.substring(2)):this.doubleSlash=!1;var i=e.indexOf("#");if(i>=0){var a=e.substring(i+1);this.fragment=r(a),e=e.substring(0,i)}else this.hash=null;var o=e.indexOf("?");if(o>=0){var s=e.substring(o+1);this.query=n(s),e=e.substring(0,o)}else this.query=null;var l=e.indexOf("@");if(l>=0){var u=e.substring(0,l),c=u.indexOf(":");-1==c?(this.username=u,this.password=null):(this.username=u.substring(0,c),this.password=u.substring(c+1));var e=e.substring(l+1)}else this.username=null,this.password=null;var h=0;(null!=this.scheme||this.doubleSlash)&&(h=e.indexOf("/")),h>=0?(this.path=e.substring(h),""==this.path&&(this.path=null),e=e.substring(0,h)):this.path=null;var c=e.indexOf(":");c>=0?(this.port=e.substring(c+1),e=e.substring(0,c)):this.port=null,this.domain=""==e?null:e}function n(e){for(var t=e.split("&"),n=[],r=0;r<t.length;r++){var i=t[r],a=i.indexOf("=");if(-1==a)n.push({key:i});else{var o=i.substring(0,a),s=i.substring(a+1);n.push({key:o,value:decodeURIComponent(s)})}}for(var o in U)n[o]=U[o];var l=JSON.stringify(n);return n.toString=function(){return JSON.stringify(this)==l?e:U.toString.call(this)},n.isQuery=!0,n}function r(e){return-1==e.indexOf("?")?n(e):(e.isQuery=!1,void 0)}function i(e){return encodeURI(e).replace(/%25[0-9][0-9]/g,function(e){return"%"+e.substring(3)})}function a(e){var t="";Q[e.charAt(0)]&&(t=e.charAt(0),e=e.substring(1));var n="",r="",a=!0,o=!1,s=!1;"+"==t?a=!1:"."==t?(r=".",n="."):"/"==t?(r="/",n="/"):"#"==t?(r="#",a=!1):";"==t?(r=";",n=";",o=!0,s=!0):"?"==t?(r="?",n="&",o=!0):"&"==t&&(r="&",n="&",o=!0);for(var l=[],u=e.split(","),c=[],h={},d=0;d<u.length;d++){var f=u[d],p=null;if(-1!=f.indexOf(":")){var m=f.split(":");f=m[0],p=parseInt(m[1])}for(var v={};K[f.charAt(f.length-1)];)v[f.charAt(f.length-1)]=!0,f=f.substring(0,f.length-1);var g={truncate:p,name:f,suffices:v};c.push(g),h[f]=g,l.push(f)}var A=function(e){for(var t="",l=0,u=0;u<c.length;u++){var h=c[u],d=e(h.name);if(null==d||Array.isArray(d)&&0==d.length||"object"==typeof d&&0==Object.keys(d).length)l++;else if(t+=u==l?r:n||",",Array.isArray(d)){o&&(t+=h.name+"=");for(var f=0;f<d.length;f++)f>0&&(t+=h.suffices["*"]?n||",":",",h.suffices["*"]&&o&&(t+=h.name+"=")),t+=a?encodeURIComponent(d[f]).replace(/!/g,"%21"):i(d[f])}else if("object"==typeof d){o&&!h.suffices["*"]&&(t+=h.name+"=");var p=!0;for(var m in d)p||(t+=h.suffices["*"]?n||",":","),p=!1,t+=a?encodeURIComponent(m).replace(/!/g,"%21"):i(m),t+=h.suffices["*"]?"=":",",t+=a?encodeURIComponent(d[m]).replace(/!/g,"%21"):i(d[m])}else o&&(t+=h.name,s&&""==d||(t+="=")),null!=h.truncate&&(d=d.substring(0,h.truncate)),t+=a?encodeURIComponent(d).replace(/!/g,"%21"):i(d)}return t},y=function(e,t){if(r){if(e.substring(0,r.length)!=r)return null;e=e.substring(r.length)}if(1==c.length&&c[0].suffices["*"]){for(var i=c[0],s=i.name,l=i.suffices["*"]?e.split(n||","):[e],u=a&&-1!=e.indexOf("="),d=1;d<l.length;d++){var e=l[d];u&&-1==e.indexOf("=")&&(l[d-1]+=(n||",")+e,l.splice(d,1),d--)}for(var d=0;d<l.length;d++){var e=l[d];a&&-1!=e.indexOf("=")&&(u=!0);for(var f=e.split(","),p=0;p<f.length;p++)a&&(f[p]=decodeURIComponent(f[p]));l[d]=1==f.length?f[0]:f}if(o||u){for(var m=t[s]||{},p=0;p<l.length;p++){var v=e;if("string"==typeof l[p]){var e=l[p],g=e.split("=",1)[0],e=e.substring(g.length+1);v=e}else{var e=l[p][0],g=e.split("=",1)[0],e=e.substring(g.length+1);l[p][0]=e,v=l[p]}void 0!==m[g]?Array.isArray(m[g])?m[g].push(v):m[g]=[m[g],v]:m[g]=v}t[s]=1==Object.keys(m).length&&void 0!==m[s]?m[s]:m}else t[s]=void 0!==t[s]?Array.isArray(t[s])?t[s].concat(l):[t[s]].concat(l):1!=l.length||i.suffices["*"]?l:l[0]}else{for(var l=1==c.length?[e]:e.split(n||","),A={},d=0;d<l.length;d++){for(var y=0;y<c.length-1&&d>y&&!c[y].suffices["*"];y++);if(p!=d){for(var b=c.length-1;b>0&&c.length-b<l.length-d&&!c[b].suffices["*"];b--);A[d]=c.length-b!=l.length-d?y:b}else A[d]=d}for(var d=0;d<l.length;d++){var e=l[d],f=e.split(",");if(o){var e=f[0],s=e.split("=",1)[0],e=e.substring(s.length+1);f[0]=e;var i=h[s]||c[0]}else var i=c[A[d]],s=i.name;for(var p=0;p<f.length;p++)a&&(f[p]=decodeURIComponent(f[p]));t[s]=(o||i.suffices["*"])&&void 0!==t[s]?Array.isArray(t[s])?t[s].concat(f):[t[s]].concat(f):1!=f.length||i.suffices["*"]?f:f[0]}}};return A.varNames=l,{prefix:r,substitution:A,unSubstitution:y}}function o(e){if(!(this instanceof o))return new o(e);for(var t=e.split("{"),n=[t.shift()],r=[],i=[],s=[],l=[];t.length>0;){var u=t.shift(),c=u.split("}")[0],h=u.substring(c.length+1),d=a(c);i.push(d.substitution),s.push(d.unSubstitution),r.push(d.prefix),n.push(h),l=l.concat(d.substitution.varNames)}this.fill=function(e){for(var t=n[0],r=0;r<i.length;r++){var a=i[r];t+=a(e),t+=n[r+1]}return t},this.fromUri=function(e){for(var t={},i=0;i<n.length;i++){var a=n[i];if(e.substring(0,a.length)!==a)return void 0;if(e=e.substring(a.length),i>=n.length-1){if(""==e)break;return void 0}for(var o=n[i+1],l=i;;){if(l==n.length-2){var u=e.substring(e.length-o.length);if(u!==o)return void 0;var c=e.substring(0,e.length-o.length);e=u}else if(o){var h=e.indexOf(o),c=e.substring(0,h);e=e.substring(h)}else if(r[l+1]){var h=e.indexOf(r[l+1]),c=e.substring(0,h);e=e.substring(h)}else{if(n.length>l+2){l++,o=n[l+1];continue}var c=e;e=""}break}s[i](c,t)}return t},this.varNames=l}function s(e,t){for(var n in t)!function(t,n){e[t]=function(){return n}}(n,t[n])}function l(e){this.contents={},this.keyOrder=[],this.context=e}function u(e){this.listeners=[],this.context=e}function c(e,t){var n=this;this.baseUrl=e.url,this.fragment=t,null==t&&(t=""),this.url=this.baseUrl+"#"+encodeURI(t),this.getRoot=function(t){return e.getRoot(function(e){t.call(e,e,n)}),this},this.getData=function(r){return null==t||""==t?e.document.getRoot(function(e){r.call(e,e,n)}):e.document.getFragment(t,function(e){r.call(e,e,n)}),this},this.getRawResponse=function(t){return e.getResponse(function(e){t.call(e,e,n)}),this}}function h(t,n,r,i,a,o){if(void 0==t)throw new Error("URL cannot be undefined");t=q.resolveRelativeUri(t),void 0==n&&(n="GET"),void 0===r&&(r={});var s=null,l=t.indexOf("#");l>=0&&(s=decodeURI(t.substring(l+1)),t=t.substring(0,l)),void 0==i&&(i="GET"==n?"application/x-www-form-urlencoded":"POST"==n||"PUT"==n?"application/json":"application/x-www-form-urlencoded"),void 0==a&&(a=e.defaultCache),"GET"==n&&(r=B.encodeData(r,i),""!=r&&(t.indexOf("?")==t.length-1||(t+=-1==t.indexOf("?")?"?":"&"),t+=r),r={});var u=a&&"GET"==n&&"application/x-www-form-urlencoded"==i;if(u){var h=JSON.stringify(t)+":"+JSON.stringify(r),d=a(h);if(void 0!=d)return{request:d,fragmentRequest:new c(d,s)}}var f=new p(t,n,r,i,o,function(e){u&&a(h,e)});return{request:f,fragmentRequest:new c(f,s)}}function d(t,n,r,i){t=q.resolveRelativeUri(t),void 0==i&&(i=e.defaultCache);var a={},o=JSON.stringify(t)+":"+JSON.stringify(a);new m(t,n,r,i,o)}function f(e){this.httpCode=e,this.message="HTTP Status: "+e}function p(e,t,n,r,i,a){a(this),e=q.resolveRelativeUri(e),n="GET"==t||"DELETE"==t?null:q.encodeData(n,r),q.log(q.logLevel.STANDARD,"Sending request for: "+e),this.successful=null,this.error=null,this.url=e;var o=void 0==n||""==n;this.responseListeners=new u(this),this.document=new A(e,o,!0),this.fetched=!1,this.fetchData(e,t,n,r,i),this.invalidate=function(){var a=this;this.document.whenAccessed(function(){null!=a.successful&&"GET"==t&&a.fetchData(e,t,n,r,i)})}}function m(e,t,n,r,i){r(i,this);var a=this;this.url=e,this.responseListeners=new u(this),this.document=new A(e,!0,!0),this.document.setRaw(t),this.profileUrl=n,void 0!=n&&this.document.raw.addSchema(n),e==n?this.document.setRoot(""):this.document.raw.whenSchemasStable(function(){var e=a.document.raw.getLink("root");if(void 0!=e){var t=decodeURI(e.href.substring(e.href.indexOf("#")+1));a.document.setRoot(t)}else a.document.setRoot("")}),this.successful=!0,this.error=null,this.fetched=!1,this.invalidate=function(){this.fetchData(e,"GET",void 0,"application/x-www-form-urlencoded",n)}}function v(e){this.operations=[],void 0==e&&(e=""),this.prefix=e}function g(e,t,n){this._patchType=e,this._subject=t,this._subjectValue=void 0,"move"==e?this._target=n:this._value=n}function A(e,t,n){function r(e){Y.increment();var t=W.concat(s);Y.add(function(){for(var n=0;n<t.length;n++)t[n].call(i,e,i)}),Y.decrement()}var i=this;this.readOnly=!!n,this.isDefinitive=!!t,this.url=e,this.error=null;var a=null;this.rootPath=function(){return a};var o={};this.raw=new b(this,o),this.uniqueId=this.raw.uniqueId,this.root=null;var s=[];this.registerChangeListener=function(e){s.push(e)};var l=[];this.access=function(){for(;l.length;)l.shift().call(this)},this.whenAccessed=function(e){l.push(e)},this.setRaw=function(e){var t=this.raw.defined();if(o.setValue(e),t){o.setValue(e);var n=new v;n.replace(this.raw.pointerPath(),e),r(n)}};var c=new u(this);this.getRoot=function(e){null==this.root?c.add(e):e.call(this,this.root)},this.setRoot=function(e){a=e,this.root=this.raw.subPath(e),c.notify(this.root)},this.patch=function(e){if(this.access(),this.readOnly)throw new Error("Cannot update read-only document");if(X)return void 0==this.batchPatch&&(this.batchPatch=new v,Z.push(this)),this.batchPatch.operations=this.batchPatch.operations.concat(e.operations),void 0;Y.increment();var t=e.filter("?"),n=e.filterRemainder("?");this.raw.patch(t),this.root.patch(n),r(e),Y.decrement()},this.affectedData=function(e){var t=e.subject(),n=null;n="?"==t||"?/"==t.substring(0,2)?this.raw.subPath(t.substring(1)):this.root.subPath(t);for(var r=[];void 0!=n;)r.push(n),n=n.parent();if("move"==e.action()){var i=e.target(),a=null;for(a="?"==i||"?/"==i.substring(0,2)?this.raw.subPath(i.substring(1)):this.root.subPath(i),r.push();void 0!=a;)r.push(a),a=a.parent()}return r};var h=(this.url||"").split("#")[0],d={};this.addSelfLink=function(e){var t=e.rawLink.href;if(t.substring(0,h.length+1)==h+"#"){var n=decodeURIComponent(t.substring(h.length+1));d[n]=e.dataObj}},this.removeSelfLink=function(e){var t=e.rawLink.href;if(t.substring(0,h.length+1)==h+"#"){var n=decodeURIComponent(t.substring(h.length+1));d[n]==e.dataObj&&delete d[n]}},this.getFragment=function(e,t){return void 0!==d[e]?(t.call(this,d[e]),void 0):(this.getRoot(function(n){if(""==e)t.call(this,n);else{var r=n.subPath(e);t.call(this,r)}}),void 0)}}function y(e){return _.test(e)}function b(e,t,n,r){this.uniqueId=et++,this.document=e,this.readOnly=function(t){return t||void 0===t?e.readOnly||this.schemas().readOnly()||void 0!=n&&n.readOnly(!0):e.readOnly};var i=void 0,a=void 0,o=0,s=[],l={},u={};this.property=function(e){return void 0==l[e]&&(u[e]={},l[e]=new b(this.document,u[e],this,e),"object"==a&&(u[e].setValue(i[e]),void 0!==i[e]&&t.schemas.addSchemasForProperty(e,l[e]))),l[e]};var c={},h={};this.item=function(e){if(!y(e))throw new Error("Index must be a positive integer (or integer-value string)");return void 0==c[e]&&(h[e]={},c[e]=new b(this.document,h[e],this,e),"array"==a&&(h[e].setValue(i[e]),void 0!==i[e]&&t.schemas.addSchemasForIndex(e,c[e]))),c[e]},this.parent=function(){return n},this.parentKey=function(){return r},this.pointerPath=function(){return this.document.root==this?"":void 0!=n?n.pointerPath()+"/"+q.encodePointerComponent(r):"?"},this.basicType=function(){return e.access(),a},this.value=function(){if(e.access(),"object"==a){for(var t={},n=0;n<s.length;n++){var r=s[n];t[r]=void 0!=l[r]?l[r].value():i[r]}return t}if("array"==a){for(var t=[],n=0;o>n;n++)t[n]=void 0!=c[n]?c[n].value():i[n];return t}return i},this.keys=function(){return e.access(),s.slice(0)},this.length=function(){return e.access(),o},this.patch=function(e){var n=this,r=this.pointerPath(),d={};if(e.each(function(e,f){if(f.subjectEquals(r)){if("replace"==f.action()||"add"==f.action())f.setSubjectValue(n.value()),t.setValue(f.value());else if("remove"==f.action());else if("move"!=f.action())throw new Error("Unrecognised patch operation: "+f.action())}else if(f.targetEquals(r))"move"==f.action()&&t.setValue(f.subjectValue());else{var p=f.subjectChild(r);if("string"==typeof p)if(d[p]=!0,"object"==a){if("add"==f.action()){var m=s.indexOf(p);if(-1!=m)throw new Error("Cannot add existing key: "+p);s.push(p),i[p]=f.value(),void 0!=l[p]&&(u[p].setValue(f.value()),t.schemas.addSchemasForProperty(p,l[p]))}else if("remove"==f.action()||"move"==f.action()){var m=s.indexOf(p);if(-1==m)throw new Error("Cannot delete missing key: "+p);f.setSubjectValue(n.propertyValue(p)),s.splice(m,1),void 0!=u[p]&&u[p].setValue(void 0),delete i[p]}else if("replace"!=f.action())throw new Error("Unrecognised patch operation: "+f.action())}else if("array"==a){if(!y(p))throw new Error("Cannot patch non-numeric index: "+p);var v=parseInt(p);if("add"==f.action()){if(v>o)throw new Error("Cannot add past the end of the list");for(var g=o-1;g>=v;g--)void 0!=h[g+1]&&(void 0==c[g]?h[g+1].setValue(i[g]):h[g+1].setValue(c[g].value()));i.splice(v,0,f.value()),o++,void 0!=c[i.length-1]&&t.schemas.addSchemasForIndex(i.length-1,c[i.length-1])}else if("remove"==f.action()||"move"==f.action()){if(v>=o)throw new Error("Cannot remove a non-existent index");f.setSubjectValue(n.itemValue(v));for(var g=v;o-1>g;g++)void 0!=h[g]&&(void 0==c[g+1]?h[g].setValue(i[g+1]):h[g].setValue(c[g+1].value()));void 0!=h[o-1]&&h[o-1].setValue(void 0),o--,i.splice(v,1)}else if("replace"!=f.action())throw new Error("Unrecognised patch operation: "+f.action())}var A=f.targetChild(r);if("string"==typeof A)if(d[A]=!0,"object"==a){if("move"==f.action()){var m=s.indexOf(A);if(-1!=m)throw new Error("Cannot move to existing key: "+A);s.push(A),i[A]=f.subjectValue(),void 0!=l[A]&&t.schemas.addSchemasForProperty(A,l[A])}}else if("array"==a){if(!y(A))throw new Error("Cannot patch non-numeric index: "+A);var v=parseInt(A);if("move"==f.action()){if(v>o)throw new Error("Cannot add past the end of the list");for(var g=o-1;g>=v;g--)void 0!=h[g+1]&&(void 0==c[g]?h[g+1].setValue(i[g]):h[g+1].setValue(c[g].value()));i.splice(v,0,f.subjectValue()),o++,void 0!=c[i.length-1]&&t.schemas.addSchemasForIndex(i.length-1,c[i.length-1])}}}}),"object"==a)for(var f=0;f<s.length;f++){var p=s[f],m=e.filter("/"+q.encodePointerComponent(p));m.isEmpty()||this.property(p).patch(m)}else if("array"==a)for(var f=0;o>f;f++){var m=e.filter("/"+q.encodePointerComponent(f));m.isEmpty()||this.index(f).patch(m)}for(var p in d)t.schemas.update(p)},t.setValue=function(e){var n=q.guessBasicType(e,a),r=i;if(i=e,n!=a){if("object"==a)for(var d in l)u[d].setValue(void 0);else if("array"==a)for(var f in c)h[f].setValue(void 0);a=n}if("object"==n){for(var d in l)e.hasOwnProperty(d)?(l[d].defined()||t.schemas.addSchemasForProperty(d,l[d]),u[d].setValue(e[d])):u[d].setValue(void 0);s=Object.keys(e),o=0}else if("array"==n){for(var f in c)f<e.length?(c[f].defined()||t.schemas.addSchemasForIndex(f,c[f]),h[f].setValue(e[f])):h[f].setValue(void 0);s=[],o=e.length}else s=[],o=0;void 0===e?void 0!==r&&t.schemas.clear():t.schemas.update(null)},t.schemas=new F(this),this.schemas=function(i){if(i&&void 0==a&&n){if("array"===n.basicType()&&y(r))return n.schemas(!0).indexSchemas(r);if("object"===n.basicType())return n.schemas(!0).propertySchemas(r)}return e.access(),t.schemas.getSchemas()},this.whenSchemasStable=function(n){return e.access(),t.schemas.whenSchemasStable(n),this},this.links=function(n){return e.access(),t.schemas.getLinks(n)},this.addLink=function(n){return e.access(),t.schemas.addLink(n),this},this.addSchema=function(n,r){e.access();var i=this;return n instanceof M?n.each(function(e,t){i.addSchema(t,r)}):t.schemas.addSchema(n,r),this},this.removeSchema=function(n){return e.access(),t.schemas.removeSchema(n),this},this.addSchemaMatchMonitor=function(n,r,i,a,o){return e.access(),t.schemas.addSchemaMatchMonitor(n,r,i,a,o)}}function S(t,n){return e.getData(t).getRawResponse(function(e){e.document.root||e.document.setRoot("")}).getData(function(e,t){var r=e.asSchema();void 0!=n&&n.call(r,r,t)})}function x(t){return void 0==nt[t]&&(nt[t]=e.createSchema({type:t})),nt[t]}function w(e){this.data=e,e.referenceUrl(),e.propertyValue("id");var t=[],n=e.property("links");void 0!==n&&n.indices(function(e,n){t[t.length]=new k(n)}),this.links=function(e){for(var n=[],r=0;r<t.length;r++){var i=t[r];(void 0==e||i.rel==e)&&n.push(i)}return n},this.schemaTitle=this.title()}function C(e){if("{@}"==e)return"{+%73elf}";for(var t=[],n=!1,r=!1,i=0;i<e.length;i++){var a=e.charAt(i);if(n)if(r){if(")"==a){")"==e.charAt(i+1)?(t.push(rt[")"]),i++):r=!1;continue}void 0!=rt[a]?t.push(rt[a]):t.push(encodeURIComponent(a))}else{if("$"==a){t.push("%73elf");continue}if("("==a){")"==e.charAt(i+1)?(t.push("%65mpty"),i++):r=!0;continue}"}"==a&&(n=!1),t.push(a)}else"{"==a&&(n=!0),t.push(a)}return t.join("")}function k(e){this.data=e,this.uriTemplate=new o(C(e.propertyValue("href"))),this.dataParts=[];for(var t=0;t<this.uriTemplate.varNames.length;t++)this.dataParts.push(j(this.uriTemplate.varNames[t]));var n=e.property("schema");if(n.defined()){var r=n.asSchema();this.submissionSchemas=new M([r])}else this.submissionSchemas=new M;var i=e.property("targetSchema");i.defined()&&(this.targetSchema=i.asSchema()),this.handlers=[],this.preHandlers=[]}function j(e){return"%65mpty"==e?"":"%73elf"==e?null:decodeURIComponent(e)}function I(e,t,n){this.rawLink=e,this.definition=t,this.subjectData=n,this.href=e.href;var r=this.href.indexOf("#");r>=0?(this.hrefBase=this.href.substring(0,r),this.hrefFragment=this.href.substring(r+1)):(this.hrefBase=this.href,this.hrefFragment=""),this.rel=e.rel,this.title=e.title,this.method=void 0!=e.method?e.method:"edit"==e.rel?"PUT":"create"==e.rel?"POST":"delete"==e.rel?"DELETE":"GET",void 0!=e.enctype&&(e.encType=e.enctype,delete e.enctype),this.encType=void 0==e.encType?"GET"==this.method?"application/x-www-form-urlencoded":"POST"==this.method||"PUT"==this.method?"application/json":"application/x-www-form-urlencoded":e.encType,null!=this.definition&&(this.submissionSchemas=this.definition.submissionSchemas,this.targetSchema=this.definition.targetSchema)}function O(e,t,n,r){var i=this;this.monitorKey=e,this.match=!1,this.matchFailReason=new E("initial failure",null),this.monitors=new l(n),this.impatientCallbacks=r,this.propertyMatches={},this.indexMatches={},this.dependencies={},this.dependencyKeys={},this.schemaLoaded=!1,this.data=t,n.getFull(function(e){i.schemaLoaded=!0,i.schema=e,i.basicTypes=e.basicTypes(),i.setupXorSelectors(),i.setupOrSelectors(),i.setupAndMatches(),i.setupNotMatches(),i.dataUpdated()})}function E(e,t,n){this.message=e,this.schema=t,this.subMatchFailReason=n}function H(e,t,n){var r=this;this.options=t,this.matchCallback=null,this.selectedOption=null,this.data=n,this.subMatches=[],this.subSchemaKeys=[];for(var i=0;i<t.length;i++)this.subSchemaKeys[i]=q.getKeyVariant(e,"option"+i),this.subMatches[i]=n.addSchemaMatchMonitor(this.subSchemaKeys[i],t[i],function(){r.update()},!1,!0);this.update()}function R(e,t,n){var r=this;this.options=t,this.matchCallback=null,this.selectedOptions=[],this.data=n,this.subMatches=[],this.subSchemaKeys=[];for(var i=0;i<t.length;i++)this.subSchemaKeys[i]=q.getKeyVariant(e,"option"+i),this.subMatches[i]=n.addSchemaMatchMonitor(this.subSchemaKeys[i],t[i],function(){r.update()},!1,!0);this.update()}function T(){ut=!1;var e=[];for(var t in lt){var n=lt[t];e.push({data:n,pointerPath:n.pointerPath()})}lt={},e.sort(function(e,t){return e.pointerPath.length-t.pointerPath.length});for(var r=[],i=0;i<e.length;i++)r[i]=e[i].data;for(var i=0;i<st.length;i++)st[i].call(null,r)}function L(e){lt[e.uniqueId]=e,ut||(ut=!0,Y.add(T))}function D(e){for(var t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}function M(e,t){if(void 0==e)return this.length=0,void 0;void 0==t&&(t=e),this.fixed=function(){var n=t.length<e.length?new M(t):this;return this.fixed=function(){return n},n};var n;for(n=0;n<e.length;n++)this[n]=e[n];this.length=e.length}function F(e){this.dataObj=e,this.schemas={},this.schemasFixed={},this.links={},this.matches={},this.xorSelectors={},this.orSelectors={},this.dependencySelectors={},this.schemaFlux=0,this.schemasStable=!0,this.schemasStableListeners=new u(e),this.pendingNotify=!1,this.cachedSchemaList=null,this.cachedLinkList=null}function P(e,t){this.dataObj=e,this.potentialLink=t,this.active=!1,this.rawLink=null,this.updateMonitors=new l(e)}function J(e,t,n,r){var i=q.getKeyVariant(t,"$");this.xorSelector=new H(t,e,r.dataObj),this.xorSelector.onMatchChange(function(t){r.removeSchema(i),null!=t?r.addSchema(t,i,n,!1):e.length>0&&r.addSchema(e[0],i,n,!1)})}function V(e,t,n,r){for(var i=[],a=[],o=0;o<e.length;o++)i[o]=q.getKeyVariant(t,"$"+o),a[o]=!1;this.orSelector=new R(t,e,r.dataObj),this.orSelector.onMatchChange(function(t){for(var o=0;o<e.length;o++){for(var s=!1,l=0;l<t.length;l++)if(e[o]==t[l]){s=!0;break}s&&!a[o]?r.addSchema(e[o],i[o],n,!1):!s&&a[o]&&r.removeSchema(i[o]),a[o]=s}0==t.length&&e.length>0&&r.addSchema(e[0],i[0],n,!1)})}function N(e,t,n,r){this.inferredSchemaKeys={},this.applied={},this.schema=e,this.schemaKeyHistory=n,this.schemaSet=r;for(var i=this.schema.data.property("dependencies").keys(),a=0;a<i.length;a++){var o=i[a];this.inferredSchemaKeys[o]=q.getKeyVariant(t,"$"+a),this.dataUpdated(o)}}var B=e;e.toString=function(){return"<Jsonary>"},e.plugins={},t.prototype={toString:function(){var e="";return null!=this.scheme&&(e+=this.scheme+":"),this.doubleSlash&&(e+="//"),null!=this.username&&(e+=this.username,null!=this.password&&(e+=":"+this.password),e+="@"),null!=this.domain&&(e+=this.domain),null!=this.port&&(e+=":"+this.port),null!=this.path&&(e+=this.path),null!=this.query&&(e+="?"+this.query),null!=this.fragment&&(e+="#"+this.fragment),e},queryObj:function(){var e={};if(this.query)for(var t=0;t<this.query.length;t++){var n=this.query[t];e[n.key]=n.value}return e},resolve:function(e){var n=new t(e+"");if(null==n.scheme&&(n.scheme=this.scheme,n.doubleSlash=this.doubleSlash,null==n.domain))if(n.domain=this.domain,n.port=this.port,n.username=this.username,n.password=this.password,null==n.path)n.path=this.path,null==n.query&&(n.query=this.query);else if("/"!=n.path.charAt(0)&&null!=this.path){var r,i="/"==this.path.charAt(0);r=i?this.path.substring(1).split("/"):this.path.split("/"),".."==r[r.length-1]&&r.push(""),r.pop();for(var a=r.length-1;a>=0;a--)"."==r[a]&&r.slice(a,1);for(var o=n.path.split("/"),a=0;a<o.length;a++){var s=o[a];if("."!=s)if(".."==s){if(r.length>0&&".."!=r[r.length-1])r.pop();else if(!i){r=r.concat(o.slice(a));break}}else r.push(s)}n.path=(i?"/":"")+r.join("/")}return n.toString()}},e.baseUri=null,t.resolve=function(n,r){if(void 0==r)if(r=n,e.baseUri)n=e.baseUri;else{if("undefined"==typeof window)return n;n=window.location.href}return void 0==n?r:(n instanceof t||(n=new t(n)),n.resolve(r))},t.parse=function(e){return new t(e)};var U={toString:function(){for(var e=[],t=0;t<this.length;t++)"undefined"==typeof this[t].value?e.push(this[t].key):e.push(this[t].key+"="+encodeURIComponent(this[t].value));return e.join("&")},get:function(e,t){for(var n=this.length-1;n>=0;n--)if(this[n].key==e)return this[n].value;return t},set:function(e,t){for(var n=this.length-1;n>=0;n--)if(this[n].key==e)return this[n].value=t,void 0;this.push({key:e,value:t})}};e.Uri=t;var Q={"+":!0,"#":!0,".":!0,"/":!0,";":!0,"?":!0,"&":!0},K={"*":!0};o.prototype={fillFromObject:function(e){return this.fill(function(t){return e[t]})}};var q={guessBasicType:function(e){return null===e?"null":Array.isArray(e)?"array":"object"==typeof e?"object":"string"==typeof e?"string":"number"==typeof e?0==e%1?"integer":"number":"boolean"==typeof e?"boolean":void 0},resolveRelativeUri:function(e,n){return t.resolve(e,n)},urlsEqual:function(e,t){return"#"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),"#"==t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),e==t},linksEqual:function(e,t){if(void 0==e||void 0==t)return e==t;if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.href!=i.href||r.rel!=i.rel)return!1;if(r.method!=i.method||r["enc-type"]!=i["enc-type"])return!1;if(r.schema!=i.schema)return!1}return!0},log:function(e,t){try{e>=q.logLevel.ERROR&&(window.alert("ERROR: "+t),console.log("ERROR: "+t),console.trace()),e>=q.logLevel.WARNING&&console.log("WARNING: "+t)}catch(n){}},logLevel:{DEBUG:-1,STANDARD:0,WARNING:1,ERROR:2},getKeyVariant:function(e,t){if(void 0==t&&(t=q.getUniqueKey()),t+="",t.indexOf(".")>=0)throw new Error("variant name cannot contain a dot: "+t);return e+"."+t},keyIsVariant:function(e,t){return e+="",t+="",e===t||e.substring(0,t.length+1)===t+"."},keyIsRoot:function(e){return-1==e.indexOf(".")},hcf:function(e,t){for(e=Math.abs(e),t=Math.abs(t);;){var n=e%t;if(0==n)return t;if(isNaN(n))return 0/0;e=t,t=n}},recursiveCompare:function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!q.recursiveCompare(e[n],t[n]))return!1;return!0}if("object"==typeof e){for(var r in e)if(void 0===t[r]&&void 0!==e[r])return!1;for(var r in t)if(void 0===e[r]&&void 0!==e[r])return!1;for(var r in e)if(!q.recursiveCompare(e[r],t[r]))return!1;return!0}return e===t},lcm:function(e,t){return Math.abs(e*t/this.hcf(e,t))},encodeData:function(e,t,n){if(void 0==t&&(t="application/x-www-form-urlencoded"),"application/json"==t)return JSON.stringify(e);if("application/x-www-form-urlencoded"==t)return"dotted"==n?q.formEncode(e,"",".","","|").replace(/%20/g,"+").replace(/%2F/g,"/"):"pretty"==n?q.formEncode(e,"","[","]").replace(/%20/g,"+").replace(/%2F/g,"/").replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/%7C/g,"|"):q.formEncode(e,"","[","]").replace(/%20/g,"+");throw new Error("Unknown encoding type: "+this.encType)},decodeData:function(e,t,n){if(void 0==t&&(t="application/x-www-form-urlencoded"),"application/json"==t)return JSON.parse(e);if("application/x-www-form-urlencoded"==t)return e=e.replace(/\+/g,"%20"),"dotted"==n?q.formDecode(e.replace(/%7C/g,"|"),".","","|"):q.formDecode(e,"[","]");throw new Error("Unknown encoding type: "+this.encType)},formEncode:function(e,t,n,r,i){void 0==t&&(t="");var a=[];if(Array.isArray(e))for(var o=0;o<e.length;o++){var s=""==t?o:t+encodeURIComponent(n+r),l=""==t?o:t+encodeURIComponent(n+o+r),u=e[o];if(null==u)a.push(s+"=null");else if("object"==typeof u){var c=q.formEncode(u,l,n,r,i);c&&a.push(c)}else"boolean"==typeof u?u?a.push(s+"=true"):a.push(s+"=false"):""===u?a.push(s):a.push(s+"="+encodeURIComponent(u))}else if("object"==typeof e){for(var s in e)if(e.hasOwnProperty(s)){var u=e[s];if(s=""!=t?t+encodeURIComponent(n+s+r):encodeURIComponent(s),void 0===u);else if(null===u)a.push(s+"=null");else if(i&&Array.isArray(u)){if(u.length>0){for(var h=[];h.length<u.length;)h[h.length]=encodeURIComponent(u[h.length]);var d=i+h.join(i);a.push(s+"="+d)}}else if("object"==typeof u){var c=q.formEncode(u,s,n,r,i);c&&a.push(c)}else"boolean"==typeof u?u?a.push(s+"=true"):a.push(s+"=false"):""===u?a.push(s):a.push(s+"="+encodeURIComponent(u))}}else a.push(encodeURIComponent(e));return a.join("&")},formDecodeString:function(e){return"true"==e?e=!0:"false"==e?e=!1:"null"==e?e=null:parseFloat(e)+""==e&&(e=parseFloat(e)),e},formDecode:function(e,t,n,r){for(var i={},a=e.split("&"),o=0;o<a.length;o++){var s=a[o],l=s,u="";if(s.indexOf("=")>=0)if(l=s.substring(0,s.indexOf("=")),u=decodeURIComponent(s.substring(s.indexOf("=")+1)),r&&u.charAt(0)==r){u=u.split(r),u.shift();for(var c=0;c<u.length;c++)u[c]=q.formDecodeString(u[c])}else u=q.formDecodeString(u);l=decodeURIComponent(l);for(var h=i,d=l.split(t),c=1;c<d.length;c++)d[c]=d[c].substring(0,d[c].length-n.length);for(var c=0;c<d.length;c++)Array.isArray(h)&&""==d[c]&&(d[c]=h.length),c==d.length-1?h[d[c]]=u:(void 0==h[d[c]]&&(h[d[c]]=""==d[c+1]?[]:{}),h=h[d[c]])
}return i},escapeHtml:function(e){return e+="",e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")},encodePointerComponent:function(e){return e.toString().replace("~","~0").replace("/","~1")},decodePointerComponent:function(e){return e.toString().replace("~1","/").replace("~0","~")},splitPointer:function(e){var t=e.split("/");""==t[0]&&t.shift();for(var n=0;n<t.length;n++)t[n]=q.decodePointerComponent(t[n]);return t},joinPointer:function(e){for(var t="",n=0;n<e.length;n++)t+="/"+q.encodePointerComponent(e[n]);return t},prettyJson:function(e){function t(e){try{for(var t=JSON.stringify(JSON.parse(e)),n=t.split('"'),r=0;r<n.length;r++){var i=n[r];for(i=i.replace(/:/g,": "),i=i.replace(/,/g,", "),n[r]=i,r++;r<n.length&&"\\"==n[r].charAt(n[r].length-1);)r++}return n.join('"')}catch(a){return e}}var n=JSON.stringify(e,null,"	");return n=n.replace(/\{[^\{,}]*\}/g,t),n=n.replace(/\[[^\[,\]]*\]/g,t),n=n.replace(/\[[^\{\[\}\]]*\]/g,t)}};!function(){var e=0;q.getUniqueKey=function(){return e++}}();for(var G in q.logLevel)q.logLevel[q.logLevel[G]]=q.logLevel[q.logLevel[G]]||G;e.getMonitorKey=q.getUniqueKey,e.getKeyVariant=function(e,t){return q.getKeyVariant(e,"~"+t)},e.keyIsVariant=q.keyIsVariant,e.log=function(e,t){if("number"!=typeof e)throw alert("First argument to log() must be a number (preferably enum value from .logLevel)"),new Error("First argument to log() must be a number (preferably enum value from .logLevel)");q.log(e,t)},e.setLogFunction=function(e){q.log=e},e.logLevel=q.logLevel,e.encodeData=q.encodeData,e.decodeData=q.decodeData,e.encodePointerComponent=q.encodePointerComponent,e.decodePointerComponent=q.decodePointerComponent,e.splitPointer=q.splitPointer,e.joinPointer=q.joinPointer,e.escapeHtml=q.escapeHtml,e.prettyJson=q.prettyJson,e.extend=function(t){for(var n in t)void 0==e[n]&&(e[n]=t[n])},l.prototype={add:function(e,t){if("string"!=typeof e&&"number"!=typeof e)throw new Error("First argument must be a monitorKey, obtained using getMonitorKey()");this.contents[e]=t,this.addKey(e)},addKey:function(e){var t;for(t=0;t<this.keyOrder.length;t++){var n=this.keyOrder[t];if(n==e)return;if(q.keyIsVariant(e,n))return this.keyOrder.splice(t,0,e),void 0}this.keyOrder.push(e)},remove:function(e){delete this.contents[e],this.removeKey(e);var t=e+".";for(var n in this.contents)n.substring(0,t.length)==t&&(this.removeKey(n),delete this.contents[n])},removeKey:function(e){var t=this.keyOrder.indexOf(e);t>=0&&this.keyOrder.splice(t,1)},notify:function(){for(var e=arguments,t=0;t<this.keyOrder.length;t++){var n=this.keyOrder[t],r=this.contents[n];r.apply(this.context,e)}},isEmpty:function(){var e;for(e in this.contents)if(0!==this.contents[e].length)return!1;return!0}},u.prototype={add:function(e){this.listeners[this.listeners.length]=e},notify:function(){for(var e=arguments;this.listeners.length>0;){var t=this.listeners.shift();t.apply(this.context,e)}},isEmpty:function(){return 0===this.listeners.length}};var Y={depth:0,callbacks:[],increment:function(){this.depth++},decrement:function(){if(this.depth--,this.depth<0)throw new Error("DelayedCallbacks.depth cannot be < 0");for(;0==this.depth&&this.callbacks.length>0;){var e=this.callbacks.shift();this.depth++,e(),this.depth--}},add:function(e){this.depth++,this.callbacks.push(e),this.decrement()}};"undefined"==typeof XMLHttpRequest&&(XMLHttpRequest=function(){try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){}throw new Error("This browser does not support XMLHttpRequest.")}),e.ajaxFunction=function(e,t){var n=e.url,r=e.data,i=e.encType,a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState)if(a.status>=200&&a.status<300){var e=a.responseText||null;try{e=JSON.parse(e)}catch(n){if(204!=a.status)return t(n,e),void 0;e=null}var r=a.getAllResponseHeaders();if(""==r){r=[];for(var i=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"],o=0;o<i.length;o++){var s=a.getResponseHeader(i[o]);""!=s&&null!=s&&r.push(i[o]+": "+s)}r=r.join("\n")}t(null,e,r)}else{var e=a.responseText||null;try{e=JSON.parse(e)}catch(n){}var r=a.getAllResponseHeaders();if(""==r){r=[];for(var i=["Cache-Control","Content-Language","Content-Type","Expires","Last-Modified","Pragma"],o=0;o<i.length;o++){var s=a.getResponseHeader(i[o]);""!=s&&null!=s&&r.push(i[o]+": "+s)}r=r.join("\n")}t(new f(a.status,a),e,r)}},a.open(e.method,n,!0),a.setRequestHeader("Content-Type",i),a.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT"),a.send(r)},function(){var t={},n={};setInterval(function(){r.empty()},1e4);var r=function(e,r){return void 0!==r?(t[e]=r,n[e]=(new Date).getTime(),void 0):t[e]};r.cacheSeconds=10,r.empty=function(e){return},r.invalidate=function(e){"string"==typeof e&&(e=q.resolveRelativeUri(e));for(var n in t){var r=t[n],i=r.url;"string"==typeof e?-1!=i.indexOf(e)&&r.invalidate():e.test(i)&&r.invalidate()}},e.defaultCache=r,e.invalidate=r.invalidate}(),c.prototype={},e.addToCache=d,e.getData=function(e,t,n){"string"==typeof e&&(e={url:e});var r=h(e.url,e.method,e.data,e.encType,null,n).fragmentRequest;return void 0!=t&&r.getData(t),r},e.isRequest=function(e){return e instanceof p||e instanceof c};var z=q.getUniqueKey();f.prototype=new Error,e.HttpError=f,p.prototype={beingUsed:function(){return void 0==this.baseContext?(q.log(q.logLevel.DEBUG,"No base context: "+this.url),!0):this.baseContext.retainCount()>0},getResponse:function(e){this.responseListeners.add(e),this.checkForFullResponse()},checkForFullResponse:function(){this.document.raw.defined()&&this.responseListeners.notify(this.document.raw,this)},ajaxSuccess:function(e,t,n){this.fetched=!0;var r=this;r.successful=!0,q.log(q.logLevel.STANDARD,"Request success: "+this.url);for(var i=t.replace(/\r\n/g,"\n").split("\n"),a={},o=null,s={},l=0;l<i.length;l++){var u=i[l].split(": ")[0];if(""!=u){var c=i[l].substring(u.length+2);"\r"==c[c.length-1]&&(c=c.substring(0,c.length-1)),u=u.toLowerCase();for(var h=c.split(", "),d=0;d<h.length;d++){var c=h[d];void 0==a[u]?a[u]=c:"object"==typeof a[u]?a[u].push(c):a[u]=[a[u],c]}}}q.log(q.logLevel.DEBUG,"headers: "+JSON.stringify(a,null,4));for(var o=a["content-type"].split(";")[0],f=a["content-type"].substring(o.length+1);f.length>0;){f=f.replace(/^,\s*/,"");var p=f.split("=",1)[0];if(f=f.substring(p.length+1).trim(),p=p.trim(),""!=p)if('"'===f.charAt(0)){partValue=/^"([^\\"]|\\.)*("|$)/.exec(f)[0],f=f.substring(partValue.length).trim();try{s[p]=JSON.parse(partValue)}catch(m){s[p]=partValue}}else partValue=/^[^,]*/.exec(f)[0],f=f.substring(partValue.length).trim(),s[p]=partValue}if(r.headers=a,r.contentType=o,r.contentTypeParameters=s,r.document.setRaw(e),r.profileUrl=null,r.document.raw.removeSchema(z),void 0!=s.profile){var v=s.profile;v=q.resolveRelativeUri(r.url,v),r.profileUrl=v,r.document.raw.addSchema(v,z)}else void 0!=n&&r.document.raw.addSchema(n,z);if(void 0!=s.root){var g={href:s.root,rel:"root"};r.document.raw.addLink(g)}if(a.link)for(var A="object"==typeof a.link?a.link:[a.link],l=0;l<A.length;l++){var g=A[l],y=g.trim().split(";"),b=y.shift().trim();b=b.substring(1,b.length-1);for(var S={href:b},d=0;d<y.length;d++){var x=y[d],w=x.substring(0,x.indexOf("=")),c=x.substring(w.length+1);w=w.trim(),'"'==c.charAt(0)&&(c=JSON.parse(c)),"type"==w&&(w="mediaType"),S[w]=c}r.document.raw.addLink(S)}r.checkForFullResponse(),r.waitingForRoot=!0,r.document.raw.whenSchemasStable(function(){delete r.waitingForRoot;var e=r.document.raw.getLink("root");if(void 0!=e){var t=decodeURI(e.href.substring(e.href.indexOf("#")+1));r.document.setRoot(t)}else r.document.setRoot("")})},ajaxError:function(e,t){this.fetched=!0;var n=this;n.successful=!1,n.error=e,q.log(q.logLevel.WARNING,"Error fetching: "+this.url+" ("+e.message+")"),n.document.error=e,n.document.setRaw(t),n.document.raw.whenSchemasStable(function(){n.checkForFullResponse(),n.document.setRoot("")})},fetchData:function(t,n,r,i,a){var o=this;this.successful=null;var s=t,l=r;if("GET"!=n&&"DELETE"!=n||void 0==l||""==l||(s+=-1==s.indexOf("?")?"?":"&",s+=l,l=void 0),e.config.antiCacheUrls){var u="_="+Math.random();s+=-1==s.indexOf("?")?"?"+u:"&"+u}var c={url:s,data:l,encType:i,method:n};e.ajaxFunction(c,function(t,n,r){t?o.ajaxError(t,n):(o.ajaxSuccess(n,r,a),"PUT"==c.method&&e.invalidate(c.url))})}},m.prototype=p.prototype,v.prototype={isEmpty:function(){return 0==this.operations.length},each:function(e){for(var t=0;t<this.operations.length;t++)e.call(this,t,this.operations[t]);return this},plain:function(){for(var e=[],t=0;t<this.operations.length;t++)e[t]=this.operations[t].plain();return e},condense:function(){},filterImmediate:function(){for(var e=new v(this.prefix),t=0;t<this.operations.length;t++){var n=this.operations[t];n.immediateChild(this.prefix)&&e.operations.push(n)}return e},filter:function(e){e=this.prefix+e;for(var t=new v(e),n=0;n<this.operations.length;n++){var r=this.operations[n];r.hasPrefix(e)&&t.operations.push(r)}return t},filterRemainder:function(e){e=this.prefix+e;for(var t=new v(this.prefix),n=0;n<this.operations.length;n++){var r=this.operations[n];r.hasPrefix(e)||t.operations.push(r)}return t},replace:function(e,t){var n=new g("replace",e,t);return this.operations.push(n),this},add:function(e,t){var n=new g("add",e,t);return this.operations.push(n),this},remove:function(e){var t=new g("remove",e);return this.operations.push(t),this},move:function(e,t){var n=new g("move",e,t);return this.operations.push(n),this},inverse:function(){for(var e=new v(this.prefix),t=0;t<this.operations.length;t++)e.operations[t]=this.operations[t].inverse();return e.operations.reverse(),e}},g.prototype={action:function(){return this._patchType},value:function(){return this._value},subject:function(){return this._subject},setSubjectValue:function(e){return this._subjectValue=e,this},subjectValue:function(){return this._subjectValue},inverse:function(){switch(this._patchType){case"replace":return new g("replace",this._subject,this._subjectValue);case"add":return new g("remove",this._subject).setSubjectValue(this._value);case"remove":return new g("add",this._subject,this._subjectValue);case"move":return new g("move",this._target,this._subject);default:throw new Error("Unrecognised patch type for inverse: "+this._patchType)}},depthFrom:function(e){"object"==typeof e&&(e=e.pointerPath());var t=0/0;if(this._subject.substring(0,e.length)==e){var n=this._subject.substring(e.length);0==n.length?t=0:"/"==n.charAt(0)&&(t=n.split("/").length)}if(void 0!=this._target&&this._target.substring(0,e.length)==e){var r,n=this._target.substring(e.length);0==n.length?r=0:"/"==n.charAt(0)&&(r=n.split("/").length),!isNaN(r)&&t>r&&(t=r)}return t},subjectEquals:function(e){return this._subject==e},subjectChild:function(e){if(e+="/",this._subject.substring(0,e.length)==e){var t=this._subject.substring(e.length);if(-1==t.indexOf("/"))return q.decodePointerComponent(t)}return!1},subjectRelative:function(e){return e+="/",this._subject.substring(0,e.length)==e?this._subject.substring(e.length-1):!1},target:function(){return this._target},targetEquals:function(e){return this._target==e},targetChild:function(e){if(void 0!=this._target){if(e+="/",this._target.substring(0,e.length)==e){var t=this._target.substring(e.length);if(-1==t.indexOf("/"))return q.decodePointerComponent(t)}return!1}},targetRelative:function(e){return e+="/",this._target.substring(0,e.length)==e?this._target.substring(e.length-1):!1},plain:function(){var e={};return e[this._patchType]=this._subject,"remove"==this._patchType||("move"==this._patchType?e.to=this._target:e.value=this._value),e},matches:function(e){return this._subject==e?!0:"move"==this._patchType&&this._target==e?!0:!1},hasPrefix:function(e){return"object"==typeof e&&(e=e.pointerPath()),this.matches(e)?!0:(e+="/",this._subject.substring(0,e.length)==e?!0:"move"==this._patchType&&this._target.substring(0,e.length)==e?!0:!1)}};var W=[];e.registerChangeListener=function(e){W.push(e)};var X=!1,Z=[];e.batch=function(t){return void 0!=t?(e.batch(),t(),e.batchDone(),this):(X=!0,this)},e.batchDone=function(){for(X=!1;Z.length>0;){var e=Z.shift(),t=e.batchPatch;delete e.batchPatch,e.patch(t)}return this},A.prototype={resolveUrl:function(e){return t.resolve(this.url,e)},get:function(e){return this.root.get(e)},set:function(e,t){return this.root.set(e,t),this},move:function(e,t){var n=new v;return n.move(e,t),this.patch(n),this}};var _=/^(0|[1-9]\d*)$/,$="meta-schema-key",et=0;b.prototype={referenceUrl:function(){if(this.document.isDefinitive){var e=this.pointerPath();if(""==e||"/"==e.charAt(0))return this.document.url+"#"+encodeURI(this.pointerPath())}},subPath:function(e){var t=e.split("/");if(""!=t[0])throw new Error("Path must begin with / (or be empty): "+e);for(var n=this,r=1;r<t.length;r++)t[r]=q.decodePointerComponent(t[r]),n="array"==n.basicType()?n.index(t[r]):n.property(t[r]);return n},defined:function(){return void 0!=this.basicType()},setValue:function(e){if("undefined"==typeof e)return this.remove();if("object"!=this.basicType()&&"array"!=this.basicType()&&this.value()===e)return this;var t=new v;return this.defined()?t.replace(this.pointerPath(),e):t.add(this.pointerPath(),e),this.document.patch(t,this),this},remove:function(){var e=new v;return e.remove(this.pointerPath()),this.document.patch(e,this),this},itemValue:function(e){return this.index(e).value()},removeItem:function(e){return this.index(e).remove(),this},insertItem:function(e,t){if("array"!=this.basicType())throw Error("cannot insert into a non-array");var n=new v;return n.add(this.item(e).pointerPath(),t),this.document.patch(n,this),this},push:function(e){if("array"!=this.basicType())throw new Error("Can only push() on an array");return this.index(this.length()).setValue(e),this},propertyValue:function(e){return this.property(e).value()},removeProperty:function(e){return this.property(e).remove(),this},moveTo:function(e){if("object"==typeof e){if(e.document!=this.document){var t=this.value();return this.remove(),e.setValue(t),e}e=e.pointerPath()}var n=new v,r=this.pointerPath();return e!=r?(n.move(r,e),this.document.patch(n,this),this.document.root.subPath(e)):void 0},getLink:function(e){var t=this.links(e);return t[0]},equals:function(e){var t,n=this.basicType();if(n!=e.basicType())return!1;if("array"==n){if(this.length()!==e.length())return!1;for(t=0;t<this.length();t++)if(!this.index(t).equals(e.index(t)))return!1;return!0}if("object"==n){var t,r=this.keys(),i=e.keys();if(r.length!=i.length)return!1;for(r.sort(),i.sort(),t=0;t<r.length;t++)if(r[t]!==i[t])return!1;for(t=0;t<r.length;t++){var a=r[t];if(!this.property(a).equals(e.property(a)))return!1}return!0}return this.value()===e.value()},readOnlyCopy:function(){if(this.readOnly(!1))return this;var t=e.create(this.value(),this.document.url+"#:copy",!0);return this.schemas().each(function(e,n){t.addSchema(n)}),t},editableCopy:function(){var t=e.create(this.value(),this.document.url+"#:copy",!1),n=q.getUniqueKey();return this.schemas().fixed().each(function(e,r){t.addSchema(r,n)}),t},asSchema:function(){var e=this.readOnlyCopy(),t=new w(e);return this.readOnly(!1)&&s(this,{asSchema:t}),e.property("$ref").defined()||e.addSchema("http://json-schema.org/hyper-schema",$),t},asLink:function(e){var t,n=this.readOnlyCopy(),r=new k(n);return t=void 0==e?r.linkForData(this):r.linkForData(e),this.readOnly(!1)&&s(this,{asLink:t}),t},items:function(e){for(var t=0;t<this.length();t++){var n=this.index(t);e.call(n,t,n)}return this},properties:function(e,t,n){var r;if("function"==typeof e&&(t=e,e=this.keys()),t)for(var i=0;i<e.length;i++){var a=this.property(e[i]);t.call(a,e[i],a)}if(n){"function"!=typeof n&&(n=t);for(var r=this.keys(),i=0;i<r.length;i++)if(-1==e.indexOf(r[i])){var a=this.property(r[i]);n.call(a,r[i],a)}}return this},resolveUrl:function(e){for(var n=this;n;){var r=n.getLink("self");if(r)return t.resolve(r.href,e);n=n.parent()}return this.document.resolveUrl(e)},get:function(e){return this.subPath(e).value()},set:function(e,t){return this.subPath(e).setValue(t),this},json:function(){return JSON.stringify(this.value())}},b.prototype.indices=b.prototype.items,b.prototype.indexValue=b.prototype.itemValue,b.prototype.removeIndex=b.prototype.removeItem,b.prototype.index=function(e){return this.item(e)},e.extendData=function(e){for(var t in e)void 0==b.prototype[t]&&(b.prototype[t]=e[t])},e.create=function(e,t,n){var e="object"==typeof e?JSON.parse(JSON.stringify(e)):e,r=void 0!=t&&n;if(void 0!=t&&-1!=t.indexOf("#")){var i=t.substring(t.indexOf("#")+1);""!=i&&(r=!1),t=t.substring(0,t.indexOf("#"))}var a=new A(t,r,n);return a.setRaw(e),a.setRoot(""),a.root},e.isData=function(e){return e instanceof b},b.prototype.deflate=function(){return this.document.deflate(),{document:this.document.deflate(),path:this.pointerPath()}},A.prototype.deflate=function(){if(this.isDefinitive)return this.url;var e=this.raw,t=[];e.schemas().each(function(e,n){void 0!=n.referenceUrl()?t.push(n.referenceUrl()):t.push(n.data.deflate())});var n={baseUrl:this.url,readOnly:this.readOnly,value:e.value(),schemas:t,root:this.rootPath()};return n},e.inflate=function(t,n){if(void 0!==t.path&&void 0!==t.document)return e.inflate(t.document).root.subPath(t.path);if("string"==typeof t){var r=h(t).request;return n&&r.document.getRoot(function(e){e.whenSchemasStable(function(){n(null,r.document)})}),r.document}for(var i=e.create(t.value,t.baseUrl,t.readOnly),a=0;a<t.schemas.length;a++){var o=t.schemas[a];if("object"==typeof o)var o=e.inflate(o).asSchema();i.addSchema(o)}i.document.setRoot(t.root);var s=i.document;return n&&n(null,s),s},e.createSchema=function(t,n){var r=e.create(t,n,!0);return r.asSchema()},e.isSchema=function(e){return e instanceof w},e.getSchema=S;var tt=["null","boolean","integer","number","string","array","object"],nt={};w.prototype={toString:function(){return"<Schema "+this.data+">"},referenceUrl:function(e){return e&&this.data.property("$ref").defined()?this.data.resolveUrl(this.data.propertyValue("$ref")):this.data.referenceUrl()},isFull:function(){var e=this.data.propertyValue("$ref");return void 0===e},getFull:function(e){var t=this.data.propertyValue("$ref");if(void 0===t)return e&&e.call(this,this,void 0),this;if(t=this.data.resolveUrl(t),"#"!=t.charAt(0)||1!=t.length&&"/"!=t.charAt(1)){if(!e){var n=this;return this.getFull(function(e){n=e}),n}if("#"==t.charAt(0)){var r=decodeURIComponent(t.substring(1)),i=this.data.document;i.getFragment(r,function(t){var n=t.asSchema();e.call(n,n,null)})}else S(t,e)}else{var a=this.data.document.root,o=decodeURIComponent(t.substring(1)),s=a.subPath(o).asSchema();if(!e)return s;e.call(s,s,null)}},title:function(){return this.data.propertyValue("title")||null},forceTitle:function(){var e=this.data.propertyValue("title")||null;if(null===e){if(this.enumData().defined())return"enum";var t=this.basicTypes();if(1==t.length){if("array"!=t[0]||this.tupleTyping())return t[0];var n=this.indexSchemas(0),r=n.forceTitle();if(r)return"array of "+r+" items"}}return e},hasDefault:function(){return this.data.property("default").defined()},defaultValue:function(){return this.data.propertyValue("default")},propertySchemas:function(e){var t=[],n=this.data.property("properties").property(e);return n.defined()&&t.push(n.asSchema().getFull()),this.data.property("patternProperties").properties(function(n,r){var i=new RegExp(n);i.test(e)&&t.push(r.asSchema().getFull())}),0==t.length&&(n=this.data.property("additionalProperties"),n.defined()&&t.push(n.asSchema().getFull())),new M(t)},propertyDependencies:function(e){var t=this.data.property("dependencies");if(t.defined()){var n=t.property(e);if(n.defined())return"string"==n.basicType()?[n.value()]:"array"==n.basicType()?n.value():[n.asSchema()]}return[]},itemSchemas:function(e){var t,n=this.data.property("items");if(!n.defined())return new M;if("array"==n.basicType()?(t=n.index(e),t.defined()||(t=this.data.property("additionalItems"))):t=n,t.defined()){var r=t.asSchema().getFull();return new M([r])}return new M},tupleTyping:function(){var e=this.data.property("items");return"array"==e.basicType()?e.length():0},andSchemas:function(){var e=[],t=this.data.property("extends");return t.defined()&&("array"==t.basicType()?t.indices(function(t,n){e.push(n.asSchema())}):e.push(t.asSchema())),this.data.property("allOf").items(function(t,n){e.push(n.asSchema())}),new M(e)},notSchemas:function(){var t=[],n=this.data.property("disallow");return n.defined()&&("array"==n.basicType()?n.indices(function(n,r){"string"==r.basicType()?t.push(e.createSchema({type:r.value()})):t.push(r.asSchema())}):"string"==n.basicType()?t.push(e.createSchema({type:n.value()})):t.push(n.asSchema())),this.data.property("not").defined()&&t.push(this.data.property("not").asSchema()),t},types:function(){var e=this.data.property("type");if(e.defined()){if("string"===e.basicType())return"all"==e.value()?tt.slice(0):[e.value()];for(var t=[],n=0;n<e.length();n++){if("string"!=e.item(n).basicType())return tt.slice(0);if("all"==e.item(n).value())return tt.slice(0);t.push(e.item(n).value())}return-1!=t.indexOf("number")&&-1==t.indexOf("integer")&&t.push("integer"),t}return tt.slice(0)},xorSchemas:function(){var e=[],t=this.data.property("type");if(t.defined())for(var n=0;n<t.length();n++)if("string"!=t.item(n).basicType()){var r=[];t.items(function(e,t){"string"==t.basicType()?r.push(x(t.value())):r.push(t.asSchema())}),e.push(r);break}if(this.data.property("oneOf").defined()){var r=[];this.data.property("oneOf").items(function(e,t){r.push(t.asSchema())}),e.push(r)}return e},orSchemas:function(){var e=[];if(this.data.property("type"),this.data.property("anyOf").defined()){var t=[];this.data.property("anyOf").items(function(e,n){t.push(n.asSchema())}),e.push(t)}return e},equals:function(e,t){var n=this;if(t&&(e=e.getFull(),n=this.getFull()),n===e)return!0;var r=n.referenceUrl(),i=e.referenceUrl();return t&&!n.isFull()&&(r=n.data.resolveUrl(this.data.propertyValue("$ref"))),t&&!e.isFull()&&(i=e.data.resolveUrl(e.data.propertyValue("$ref"))),void 0!==r&&void 0!==i?q.urlsEqual(r,i):this.data.equals(e.data)},readOnly:function(){return!(!this.data.propertyValue("readOnly")&&!this.data.propertyValue("readonly"))},enumValues:function(){return this.data.propertyValue("enum")},enumData:function(){return this.data.property("enum")},minItems:function(){var e=this.data.propertyValue("minItems");return void 0==e?0:e},maxItems:function(){return this.data.propertyValue("maxItems")},tupleTypingLength:function(){return"array"!=this.data.property("items").basicType()?0:this.data.property("items").length()},minLength:function(){var e=this.data.propertyValue("minLength");return void 0==e?0:e},maxLength:function(){return this.data.propertyValue("maxLength")},pattern:function(){var e=this.data.propertyValue("pattern");return void 0!==e?new RegExp(e):null},numberInterval:function(){return this.data.propertyValue("divisibleBy")},minimum:function(){return this.data.propertyValue("minimum")},exclusiveMinimum:function(){return!!this.data.propertyValue("exclusiveMinimum")},maximum:function(){return this.data.propertyValue("maximum")},exclusiveMaximum:function(){return!!this.data.propertyValue("exclusiveMaximum")},minProperties:function(){var e=this.data.propertyValue("minProperties");return void 0==e?0:e},maxProperties:function(){return this.data.propertyValue("maxProperties")},definedProperties:function(e){if(e)return this.definedProperties(),this.definedProperties(e);var t=this.data.property("properties").keys();return this.definedProperties=function(e){e=e||[];for(var n=[],r=0;r<t.length;r++)-1==e.indexOf(t[r])&&n.push(t[r]);return n},t.slice(0)},knownProperties:function(e){if(e)return this.knownProperties(),this.knownProperties(e);var t={};this.data.property("properties").properties(function(e){t[e]=!0});for(var n=this.requiredProperties(),r=0;r<n.length;r++)t[n[r]]=!0;var i=Object.keys(t);return this.knownProperties=function(e){e=e||[];for(var t=[],n=0;n<i.length;n++)-1==e.indexOf(i[n])&&t.push(i[n]);return t},i.slice(0)},requiredProperties:function(){var e=this.data.propertyValue("required");"object"!=typeof e&&(e=[]);var t=this.data.property("properties");return void 0!=t&&t.properties(function(t,n){var r=n.property("required");void 0!=r&&"boolean"==r.basicType()&&r.value()&&e.push(t)}),e},allowedAdditionalProperties:function(){return!(this.data.propertyValue("additionalProperties")===!1)},getLink:function(e){for(var t=this.links(),n=0;n<t.length;n++)if(t[n].rel()==e)return t[n]},asList:function(){return new M([this])},format:function(){return this.data.propertyValue("format")},createValue:function(){var e=this.asList();return e.createValue.apply(e,arguments)},createData:function(){var e=this.asList();return e.createData.apply(e,arguments)}},w.prototype.basicTypes=w.prototype.types,w.prototype.extendSchemas=w.prototype.andSchemas,w.prototype.indexSchemas=w.prototype.itemSchemas,w.prototype.isComplete=w.prototype.isFull,e.extendSchema=function(e){for(var t in e)void 0==w.prototype[t]&&(w.prototype[t]=e[t])};var rt={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"};k.prototype={addHandler:function(e){return this.handlers.unshift(e),this},addPreHandler:function(e){return this.preHandlers.push(e),this},canApplyTo:function(e){var t,n,r=null;for(t=0;t<this.dataParts.length;t++){if(n=this.dataParts[t],null===n?r=e:"object"==e.basicType()?r=e.property(n):"array"==e.basicType()&&y(n)&&(r=e.index(n)),void 0==r||!r.defined())return!1;if("null"==r.basicType())return!1}return!0},linkForData:function(e){var t=this.data.value(),n=this.uriTemplate.fill(function(t){return t=j(t),null==t?e.value():"array"==e.basicType()?e.itemValue(t):e.propertyValue(t)});return t.href=e.resolveUrl(n),t.rel=t.rel.toLowerCase(),t.title=t.title,new I(t,this,e)},usesKey:function(e){var t;for(t=0;t<this.dataParts.length;t++)if(this.dataParts[t]===e||null===this.dataParts[t])return!0;return!1},rel:function(){return this.data.propertyValue("rel").toLowerCase()}};var it=[],at=[];e.addLinkHandler=function(e){it.unshift(e)},e.addLinkPreHandler=function(e){at.push(e)};var ot=q.getUniqueKey();I.prototype={toString:function(){return this.href},createSubmissionData:function(t,n){"function"==typeof t&&(n=t,t=void 0);var r=this.hrefBase,i=this.submissionSchemas;if(void 0!=n&&0==i.length&&"PUT"==this.method)return B.getData(this.href,function(e){n(t||e.editableCopy())}),this;if(void 0==n){for(var a=i.createValue(t),o=e.create(a,r),s=0;s<i.length;s++)o.addSchema(i[s],ot);return o}i.createValue(t,function(t){for(var a=e.create(t,r),o=0;o<i.length;o++)a.addSchema(i[o],ot);n(a)})},follow:function(t,n){"function"==typeof t&&(n=t,t=void 0),void 0!==t?t instanceof b||(t=e.create(t)):t=e.create(void 0);for(var r=at.concat(this.definition.preHandlers),i=0;i<r.length;i++){var a=r[i];if(a.call(this,this,t)===!1)return q.log(q.logLevel.DEBUG,"Link cancelled: "+this.href),null}var o=t.value(),s=e.getData({url:this.href,method:this.method,data:o,encType:this.encType},null,this.targetSchema);t=t.readOnlyCopy();var l=this.definition.handlers.concat(it);void 0!==n&&l.unshift(n);for(var i=0;i<l.length;i++){var a=l[i];if("function"!=typeof a){if(a)continue;break}if(a.call(this,this,t,s)===!1)break}return s},valueForUrl:function(e){function t(e,t){t=t.getFull();var n=t.types();return-1!=n.indexOf("null")&&"null"==e?null:-1==n.indexOf("boolean")||"true"!=e&&"false"!=e?-1!=n.indexOf("string")?e:-1==n.indexOf("number")||isNaN(parseFloat(e))?-1!=n.indexOf("integer")&&0==parseFloat(e)%1?parseFloat(e):n.indexOf("object")?B.decodeData(e):void 0:parseFloat(e):"true"==e}var n=this.definition.uriTemplate,r=n.fromUri(e),i={},a=this.subjectData.schemas();for(var o in r){var s=r[o],l=j(o);if(null==l){if("string"==typeof s&&(s=t(s,a)),void 0===s)return void 0;i=s}else{if("string"==typeof s&&(s=t(s,a.propertySchemas(l))),void 0===s)return void 0;i[l]=s}}return i}},O.prototype={setupXorSelectors:function(){var e=this;this.xorSelectors={};for(var t=this.schema.xorSchemas(),n=0;n<t.length;n++){var r=new H(q.getKeyVariant(this.monitorKey,"xor"+n),t[n],this.data);this.xorSelectors[n]=r,r.onMatchChange(function(){e.update()},!1)}},setupOrSelectors:function(){var e=this;this.orSelectors={};for(var t=this.schema.orSchemas(),n=0;n<t.length;n++){var r=new R(q.getKeyVariant(this.monitorKey,"or"+n),t[n],this.data);this.orSelectors[n]=r,r.onMatchChange(function(){e.update()},!1)}},setupAndMatches:function(){var e=this;this.andMatches=[];var t=this.schema.andSchemas();t.each(function(t,n){var r=q.getKeyVariant(e.monitorKey,"and"+t),i=e.data.addSchemaMatchMonitor(r,n,function(){e.update()},!1,!0);e.andMatches.push(i)})},setupNotMatches:function(){var e=this;this.notMatches=[];for(var t=this.schema.notSchemas(),n=0;n<t.length;n++)!function(t,n){var r=q.getKeyVariant(e.monitorKey,"not"+t),i=e.data.addSchemaMatchMonitor(r,n,function(){e.update()},!1,!0);e.notMatches.push(i)}(n,t[n])},addMonitor:function(e,t){return this.monitors.add(this.monitorKey,e),t!==!1&&e.call(this.schema,this.match,this.matchFailReason),this},dataUpdated:function(e){if(this.schemaLoaded){var t=this;if("object"==this.data.basicType()){this.indexMatches={},this.data.properties(function(e,n){if(void 0==t.propertyMatches[e]){var r=[],i=t.schema.propertySchemas(e);i.each(function(a){var o=n.addSchemaMatchMonitor(t.monitorKey,i[a],function(){t.subMatchUpdated(e,o)},!1,!0);r.push(o)}),t.propertyMatches[e]=r,t.addDependencies(e)}});var n=[];for(var e in this.propertyMatches)this.data.property(e).defined()||n.push(e);for(var r=0;r<n.length;r++){var e=n[r];delete this.propertyMatches[e],void 0!=this.dependencyKeys[e]&&(this.data.removeSchema(this.dependencyKeys[e]),delete this.dependencies[e],delete this.dependencyKeys[e])}}else if("array"==this.data.basicType()){this.propertyMatches={},this.data.indices(function(n,r){if(void 0==t.indexMatches[n]){var i=[],a=t.schema.indexSchemas(n);a.each(function(n){var o=r.addSchemaMatchMonitor(t.monitorKey,a[n],function(){t.subMatchUpdated(e,o)},!1,!0);i.push(o)}),t.indexMatches[n]=i}});var n=[];for(var e in this.indexMatches)this.data.length()<=e&&n.push(e);for(var r=0;r<n.length;r++)delete this.indexMatches[n[r]]}else this.propertyMatches={},this.indexMatches={};this.update()}},addDependencies:function(e){var t=this,n=this.schema.propertyDependencies(e);this.dependencies[e]=[],this.dependencyKeys[e]=[];for(var r=0;r<n.length;r++){var i=n[r];"string"==typeof i?this.dependencies[e].push(i):function(n){var r=q.getKeyVariant(t.monitorKey,"dep:"+e+":"+n);t.dependencyKeys[e].push(r);var a=t.data.addSchemaMatchMonitor(r,i,function(){t.dependencyUpdated(e,n)},!1,!0);t.dependencies[e].push(a)}(r)}},notify:function(){this.monitors.notify(this.match,this.matchFailReason)},setMatch:function(e,t){var n=this,r=this.match,i=this.matchFailReason;return this.match=e,this.matchFailReason=e?null:t,this.impatientCallbacks?this.notify():(this.pendingNotify||(this.pendingNotify=!0,Y.add(function(){n.pendingNotify=!1,n.match&&r||(n.match||r||!n.matchFailReason.equals(i))&&n.notify()})),void 0)},subMatchUpdated:function(){this.update()},subMatchRemoved:function(){this.update()},dependencyUpdated:function(){this.update()},update:function(){try{this.matchAgainstBasicTypes(),this.matchAgainstSubMatches(),this.matchAgainstImmediateConstraints(),this.setMatch(!0)}catch(e){if(!(e instanceof E))throw e;this.setMatch(!1,e)}},matchAgainstBasicTypes:function(){for(var e=this.data.basicType(),t=0;t<this.basicTypes.length;t++)if(this.basicTypes[t]==e||"integer"==e&&"number"==this.basicTypes[t])return;throw new E("Data does not match any of the basic types: "+this.basicTypes,this.schema)},matchAgainstSubMatches:function(){for(var e=0;e<this.andMatches.length;e++){var t=this.andMatches[e];if(!t.match){var n="extended schema #"+e+": "+t.message;throw new E(n,this.schema,t.failReason)}}for(var e=0;e<this.notMatches.length;e++){var r=this.notMatches[e];
if(r.match){var n='"not" schema #'+e+" matches";throw new E(n,this.schema)}}for(var i in this.xorSelectors){var a=this.xorSelectors[i];if(null==a.selectedOption){var n="XOR #"+i+": "+a.failReason.message;throw new E(n,this.schema,a.failReason)}}for(var i in this.orSelectors){var a=this.orSelectors[i];if(0==a.selectedOptions.length){var n="OR #"+i+": no matches";throw new E(n,this.schema)}}for(var i in this.propertyMatches)for(var o=this.propertyMatches[i],e=0;e<o.length;e++){var s=o[e];if(!s.match){var n=i+": "+s.matchFailReason.message;throw new E(n,this.schema,s.matchFailReason)}}for(var i in this.indexMatches)for(var o=this.indexMatches[i],e=0;e<o.length;e++){var s=o[e];if(!s.match){var n=i+": "+s.matchFailReason.message;throw new E(n,this.schema,s.matchFailReason)}}},matchAgainstImmediateConstraints:function(){this.matchAgainstEnums(),this.matchAgainstNumberConstraints(),this.matchAgainstArrayConstraints(),this.matchAgainstObjectConstraints()},matchAgainstEnums:function(){var e=this.schema.enumData();if(e.defined()){for(var t=0;t<e.length();t++){var n=e.index(t);if(n.equals(this.data))return}throw new E("Data does not match enum: "+JSON.stringify(e.value())+" ("+JSON.stringify(this.data.value())+")",this.schema)}},matchAgainstNumberConstraints:function(){if("number"==this.data.basicType()||"integer"==this.data.basicType()){var e=this.data.value(),t=this.schema.numberInterval();if(void 0!=t&&0!=e%t)throw new E("Number must be divisible by "+t);var n=this.schema.minimum();if(void 0!==n)if(this.schema.exclusiveMinimum()){if(n>=e)throw new E("Number must be > "+n)}else if(n>e)throw new E("Number must be >= "+n);var r=this.schema.maximum();if(void 0!=r)if(this.schema.exclusiveMaximum()){if(e>=r)throw new E("Number must be < "+r)}else if(e>r)throw new E("Number must be <= "+r)}},matchAgainstArrayConstraints:function(){if("array"==this.data.basicType()){var e=this.schema.minItems();if(void 0!==e&&e>this.data.length())throw new E("Data is not long enough - minimum length is "+e,this.schema);var t=this.schema.maxItems();if(void 0!==t&&t<this.data.length())throw new E("Data is too long - maximum length is "+t,this.schema)}},matchAgainstObjectConstraints:function(){if("object"==this.data.basicType()){for(var e=this.schema.requiredProperties(),t=0;t<e.length;t++){var n=e[t];if(!this.data.property(n).defined())throw new E("Missing key "+JSON.stringify(n),this.schema)}if(0==this.schema.allowedAdditionalProperties())for(var r=this.schema.definedProperties(),i=this.data.keys(),t=0;t<i.length;t++)if(-1==r.indexOf(i[t]))throw new E("Not allowed additional property: "+JSON.stringify(n),this.schema);this.matchAgainstDependencies()}},matchAgainstDependencies:function(){for(var e in this.dependencies)if(void 0!=this.data.property(e))for(var t=this.dependencies[e],n=0;n<t.length;n++){var r=t[n];if("string"==typeof r){if(!this.data.property(r).defined())throw new E("Dependency - property "+JSON.stringify(e)+" requires property "+JSON.stringify(r),this.schema)}else if(!r.match)throw new E("Dependency for "+e,this.schema,r.matchFailReason)}}},E.prototype=new Error,E.prototype.toString=function(){return this.message+" in "+this.schema.title()},E.prototype.equals=function(e){if(!(e instanceof E))return!1;if(null==this.subMatchFailReason){if(null!=e.subMatchFailReason)return!1}else if(null==e.subMatchFailReason||!this.subMatchFailReason.equals(e.subMatchFailReason))return!1;return this.message==e.message&&(null==this.schema&&null==e.schema||null!=this.schema&&null!=e.schema&&this.schema.equals(e.schema))},H.prototype={onMatchChange:function(e,t){return this.matchCallback=e,t!==!1&&e.call(this,this.selectedOption),this},update:function(){for(var e=null,t="No matches",n=0;n<this.subMatches.length;n++)if(this.subMatches[n].match){if(null!=e){t="multiple matches",e=null;break}e=this.options[n],t=null}this.failReason=new E(t),this.selectedOption!=e&&(this.selectedOption=e,void 0!=this.matchCallback&&this.matchCallback.call(this,this.selectedOption))}},R.prototype={onMatchChange:function(e,t){return this.matchCallback=e,t!==!1&&e.call(this,this.selectedOptions),this},update:function(){for(var e=[],t=0;t<this.subMatches.length;t++)this.subMatches[t].match&&e.push(this.options[t]);var n=!1;if(e.length!=this.selectedOptions.length)n=!0;else for(var t=0;t<e.length;t++)if(e[t]!=this.selectedOptions[t]){n=!0;break}n&&(this.selectedOptions=e,void 0!=this.matchCallback&&this.matchCallback.call(this,this.selectedOptions))}};var st=[];e.registerSchemaChangeListener=function(e){st.push(e)};var lt={},ut=!1;D.prototype={rel:function(e){if(void 0==e)return this;var t,n=[];for(t=0;t<this.length;t++)this[t].rel===e&&(n[n.length]=this[t]);return new D(n)}};var ct={"null":!0,"boolean":!0,integer:!0,number:!0,string:!0,array:!0,object:!0};M.prototype={indexOf:function(e,t){for(var n=this.length-1;n>=0;){if(e.equals(this[n],t))return n;n--}return n},containsUrl:function(e){if(e instanceof RegExp)for(var t=0;t<this.length;t++){var n=this[t];if(e.test(n.referenceUrl(!0)))return!0}else{e.indexOf("#")<0&&(e+="#");for(var t=0;t<this.length;t++){var n=this[t],r=n.referenceUrl(!0);if(null!=r&&r.substring(r.length-e.length)==e)return!0}}return!1},links:function(e){var t,n,r=[];for(t=0;t<this.length;t++){var n=this[t];r=r.concat(n.links())}return this.links=function(e){for(var t=[],n=0;n<r.length;n++){var i=r[n];(void 0==e||i.rel==e)&&t.push(i)}return t},this.links(e)},each:function(e){for(var t=0;t<this.length;t++)e.call(this,t,this[t]);return this},concat:function(e){for(var t=[],n=0;n<this.length;n++)t.push(this[n]);for(var n=0;n<e.length;n++)t.push(e[n]);return new M(t)},title:function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].title();n&&e.push(n)}return e.join(" - ")},forceTitle:function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].forceTitle();n&&e.push(n)}return e.join(" - ")},definedProperties:function(e){if(e)return this.definedProperties(),this.definedProperties(e);var t=!0,n={};this.each(function(e,r){if(t){r.allowedAdditionalProperties()||(t=!1,n={});for(var i=r.definedProperties(),a=0;a<i.length;a++)n[i[a]]=!0}else if(!r.allowedAdditionalProperties()){t=!1;for(var o={},i=r.definedProperties(),a=0;a<i.length;a++)n[i[a]]&&(o[i[a]]=!0);n=o}});var r=Object.keys(n);return s(this,{allowedAdditionalProperties:t}),this.definedProperties=function(e){e=e||[];for(var t=[],n=0;n<r.length;n++)-1==e.indexOf(r[n])&&t.push(r[n]);return t},r},knownProperties:function(e){if(e)return this.knownProperties(),this.knownProperties(e);var t;if(this.allowedAdditionalProperties()){t=this.definedProperties().slice(0);for(var n=this.requiredProperties(),r=0;r<n.length;r++)-1==t.indexOf(n[r])&&t.push(n[r])}else var t=this.definedProperties();return this.knownProperties=function(e){e=e||[];for(var n=[],r=0;r<t.length;r++)-1==e.indexOf(t[r])&&n.push(t[r]);return n},t.slice(0)},allowedAdditionalProperties:function(){var e=!0;return this.each(function(t,n){e=e&&n.allowedAdditionalProperties()}),s(this,{additionalProperties:e}),e},minProperties:function(){for(var e=0,t=0;t<this.length;t++){var n=this[t].minProperties();n>e&&(e=n)}return e},maxProperties:function(){for(var e=void 0,t=0;t<this.length;t++){var n=this[t].maxProperties();n>e||(e=n)}return e},types:function(){for(var e=ct,t=0;t<this.length;t++){for(var n=this[t].basicTypes(),r={},i=0;i<n.length;i++){var a=n[i];e[a]&&(r[a]=!0)}e=r}return Object.keys(e)},numberInterval:function(){for(var e=void 0,t=0;t<this.length;t++){var n=this[t].numberInterval();void 0!=n&&(e=void 0==e?n:q.lcm(e,n))}for(var t=0;t<this.length;t++){for(var r=this[t].basicTypes(),i=!1,a=0;a<r.length;a++){if("number"==r[a]){i=!1;break}"integer"==r[a]&&(i=!0)}if(i)return void 0==e?1:q.lcm(e,1)}return s(this,{numberInterval:e}),e},minimum:function(){for(var e=void 0,t=!1,n=0;n<this.length;n++){var r=this[n].minimum();void 0!=r&&(void 0==e||r>e)&&(e=r,t=this[n].exclusiveMinimum())}return s(this,{minimum:e,exclusiveMinimum:t}),e},exclusiveMinimum:function(){return this.minimum(),this.exclusiveMinimum()},maximum:function(){for(var e=void 0,t=!1,n=0;n<this.length;n++){var r=this[n].maximum();void 0!=r&&(void 0==e||e>r)&&(e=r,t=this[n].exclusiveMaximum())}return s(this,{maximum:e,exclusiveMaximum:t}),e},exclusiveMaximum:function(){return this.minimum(),this.exclusiveMinimum()},minLength:function(){for(var e=0,t=0;t<this.length;t++){var n=this[t].minLength();n>e&&(e=n)}return s(this,{minLength:e}),e},maxLength:function(){for(var e=void 0,t=0;t<this.length;t++){var n=this[t].maxLength();n>e||(e=n)}return s(this,{maxLength:e}),e},patterns:function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].pattern();n&&e.push(n)}return e},minItems:function(){for(var e=0,t=0;t<this.length;t++){var n=this[t].minItems();n>e&&(e=n)}return s(this,{minItems:e}),e},maxItems:function(){for(var e=void 0,t=0;t<this.length;t++){var n=this[t].maxItems();n>e||(e=n)}return s(this,{maxItems:e}),e},tupleTypingLength:function(){for(var e=0,t=0;t<this.length;t++){var n=this[t].tupleTypingLength();n>e&&(e=n)}return e},requiredProperties:function(){for(var e={},t=[],n=0;n<this.length;n++)for(var r=this[n].requiredProperties(),i=0;i<r.length;i++){var a=r[i];e[a]||(e[a]=!0,t.push(a))}return t},readOnly:function(){for(var e=!1,t=0;t<this.length;t++)if(this[t].readOnly()){e=!0;break}return this.readOnly=function(){return e},e},enumValues:function(){for(var e=void 0,t=0;t<this.length;t++){var n=this[t].enumData();if(n.defined())if(void 0==e)e=[],n.indices(function(t,n){e[t]=n});else{var r=[];n.indices(function(t,n){for(var i=0;i<e.length;i++)e[i].equals(n)&&r.push(n)}),e=r}}if(void 0!=e){for(var i=[],t=0;t<e.length;t++)i[t]=e[t].value();return i}},allCombinations:function(e){function t(){if(m--,0>=m){for(var t=[new M([])],r=0;r<p.length;r++){for(var i=p[r],a=[],o=0;o<i.length;o++)for(var s=0;s<t.length;s++)a.push(t[s].concat(i[o]));t=a}for(var l=0;l<t.length;l++)t[l]=n.concat(t[l]);e(t)}}if(e&&!this.isFull())return this.getFull(function(t){t.allCombinations(e)}),[];for(var n=this,r=this.xorSchemas(),i=0;i<r.length;i++){for(var a=!1,o=0;o<r[i].length;o++){var s=r[i][o];if(this.indexOf(s,!!e)>=0){a=!0;break}}if(!a){for(var l=[],u=1,c=function(){u--,0>=u&&e(l)},o=0;o<r[i].length;o++){var s=r[i][o];if(e)u++,this.concat([s]).allCombinations(function(e){l=l.concat(e),c()});else{var h=this.concat([s]).allCombinations();l=l.concat(h)}}return e&&c(),l}}for(var d=this.orSchemas(),f=null,p=[],m=1,i=0;i<d.length;i++)!function(r){for(var i=[],a=!1,o=0;o<d[r].length;o++){var s=d[r][o];-1==n.indexOf(s,!!e)?i.push(s):a=!0}if(i.length>0){for(var l=[[]],u=0;u<i.length;u++){for(var c=[],h=0;h<l.length;h++)c.push(l[h]),c.push(l[h].concat([i[u]]));l=c}if(a||l.shift(),e){p[r]=[];for(var f=0;f<l.length;f++){var v=new M(l[f]);m++,v.allCombinations(function(e){p[r]=p[r].concat(e),t()})}}else p[r]=l}}(i);for(var f=[new M([])],v=0;v<p.length;v++){for(var g=p[v],A=[],y=0;y<g.length;y++)for(var b=0;b<f.length;b++)A.push(f[b].concat(g[y]));f=A}for(var i=0;i<f.length;i++)f[i]=this.concat(f[i]);return e&&t(),f},createValue:function(t,n,r,i,a){function o(e){if(void 0!==e){var t=q.guessBasicType(e);-1!=A.indexOf(t)||"integer"==t&&-1!=A.indexOf("number")||(e=void 0)}return void 0!==e&&void 0===b&&(b=e),y--,n&&0>=y&&n(b),0>=y?b:void 0}var s=this;if("function"==typeof t){var l=t;t=n,n=l}if(e.isData(t)&&(t=t.value()),"undefined"==typeof a){if(n)return this.createValue(t,function(e){"undefined"==typeof e?s.createValue(t,n,r,i,!1):n(e)},r,i,!0),void 0;var u=this.createValue(t,n,r,i,!0);return"undefined"==typeof u&&(u=this.createValue(t,n,r,i,!1)),u}if(!i){var c=function(){return c=d,t},h=0,d=function(){for(;h<s.length;){var e=s[h++];if(e.hasDefault())return e.defaultValue()}c=p},f=0,p=function(){for(;f<ht.length;){var e=ht[f++];return e(s)}c=null};if(n){var m=function(e){if("undefined"!=typeof e)return n(e);for(;c;){var t=c();if("undefined"!=typeof t)return s.createValue(t,m,r,!0,a)}a?n(void 0):s.createValue(n,void 0,r,!0,a)};return m(void 0)}for(;c;){var v=c();if("undefined"!=typeof v){var g=this.createValue(v,void 0,r,!0,a);if("undefined"!=typeof g)return g}}return a?void 0:this.createValue(void 0,void 0,r,!0,a)}if(r){var A=this.basicTypes(),y=1,b=void 0,S=this.enumValues();if(void 0!=S){for(var x=0;x<S.length;x++)if(("undefined"==typeof t||q.recursiveCompare(t,S[x]))&&(y++,o(S[x])))return b}else{if("undefined"!=typeof t){var w=q.guessBasicType(t);if("integer"==w){var C=A.indexOf("number");-1!==C&&(A.splice(C,1),A.unshift("number"))}var k=A.indexOf(w);-1!==k&&(A.splice(k,1),A.unshift(w))}for(var x=0;"undefined"==typeof b&&x<A.length;x++){y++;var w=A[x];if("null"==w){if(o(null))return b}else if("boolean"==w){var j=this.createValueBoolean(t,a);if(o(j))return!0}else if("integer"==w||"number"==w){var j=this.createValueNumber(t,a);if(o(j))return b}else if("string"==w){var j=this.createValueString(t,a);if(o(j))return b}else if("array"==w)if(n)this.createValueArray(t,function(e){o(e)},a);else{var j=this.createValueArray(t,void 0,a);if(o(j))return b}else if("object"==w)if(n)var j=this.createValueObject(t,function(e){o(e)},a);else{var j=this.createValueObject(t,void 0,a);if(o(j))return b}}}return o(b)}if(null!=n)return this.allCombinations(function(e){function r(o){return o>=e.length?n(void 0):(e[o].createValue(t,function(e){"undefined"!=typeof e?n(e):r(o+1)},!0,i,a),void 0)}r(0)}),void 0;for(var I=this.allCombinations(),x=0;x<I.length;x++){var u=I[x].createValue(t,void 0,!0,i,a);if(void 0!==u)return u}},createValueBoolean:function(e,t){return void 0===e?!0:t&&"boolean"!=typeof e?void 0:!!e},createValueNumber:function(e,t){if(!t&&"string"==typeof e){var n=parseFloat(e);if(isNaN(n))return void 0;e=n}if("number"==typeof e){if(void 0!=s&&0!=e%s&&(e=Math.round(e/s)*s),(void 0==i||e>i||e==i&&!r)&&(void 0==a||a>e||e==a&&o))return e}else if("undefined"!=typeof e)return void 0;var r=this.exclusiveMinimum(),i=this.minimum(),a=this.maximum(),o=this.exclusiveMaximum(),s=this.numberInterval(),l=void 0;if(void 0!=i&&void 0!=a){if(i>a||i==a&&(r||o))return;if(void 0!=s){if(l=Math.ceil(i/s)*s,r&&l==i&&(l+=s),l>a||l==a&&o)return}else l=.5*(i+a)}else void 0!=i?(l=i,void 0!=s&&(l=Math.ceil(l/s)*s),r&&l==i&&(void 0!=s?l+=s:l++)):void 0!=a?(l=a,void 0!=s&&(l=Math.floor(l/s)*s),o&&l==a&&(void 0!=s?l-=s:l--)):l=0;return l},createValueString:function(e,t){var n=[""];if("undefined"!=typeof e)if("string"==typeof e)n.unshift(e);else{if(t)return void 0;if("number"==typeof e)n.unshift(""+e);else{if("boolean"!=typeof e)return void 0;n.unshift(e?"true":"false")}}var r=this.minLength(),i=this.maxLength(),a=this.patterns();if(null!=i&&r>i)return void 0;for(var o=0;o<n.length;o++){var s=n[o];if(s.length<r){var l="?";s+=new Array(r-s.length+1).join(l)}else s.length>i&&(s=s.substring(0,i));for(var u=0;u<a.length;u++)a[u].test(s);return s}},createValueArray:function(e,t,n){if("function"==typeof e){var r=e;e=t,t=r}if("undefined"!=typeof e&&!Array.isArray(e))return void 0;var i=this,a=[],o=this.minItems(),s=this.maxItems();if(!(null!=s&&o>s)){for(var l=1,u=0;a&&o>u;u++)!function(r){l++;var o=Array.isArray(e)?e[r]:void 0;if(t)i.createValueForIndex(r,o,function(e){"undefined"==typeof e?a=void 0:a&&(a[r]=e),l--,0==l&&t(a)},n||void 0);else{var s=i.createValueForIndex(r,o,void 0,n||void 0);"undefined"==typeof s?a=void 0:a&&(a[r]=s)}}(u);if(a&&Array.isArray(e)){null!=s&&e.length>s?e=e.slice(0,s):s=e.length;for(var u=o;a&&u<=e.length&&s>u;u++)!function(r){l++;var o=Array.isArray(e)?e[r]:void 0;if(t)i.createValueForIndex(r,o,function(e){a&&"undefined"!=typeof e&&s>r?a[r]=e:n?a=void 0:s>r&&(s=r),l--,0==l&&t(a)},n||void 0);else{var u=i.createValueForIndex(r,o,void 0,n||void 0);a&&"undefined"!=typeof u?a[r]=u:n?a=void 0:s>r&&(s=r)}}(u)}return l--,t&&0==l&&t(a),a}},createValueObject:function(e,t,n){if("function"==typeof e){var r=e;e=t,t=r}if("undefined"!=typeof e&&("object"!=typeof e||Array.isArray(e)))return void 0;for(var i=this,a={},o=1,s=this.requiredProperties(),l=0;a&&l<s.length;l++)!function(r){o++;var s="object"!=typeof e||Array.isArray(e)?void 0:e[r];if(t)i.createValueForProperty(r,s,function(e){"undefined"==typeof e?a=void 0:a&&(a[r]=e),o--,0==o&&t(a)},n||void 0);else{var l=i.createValueForProperty(r,s,void 0,n||void 0);"undefined"==typeof l?a=void 0:a&&(a[r]=l)}}(s[l]);if(a&&"object"==typeof e&&!Array.isArray(e))for(var u=this.definedProperties(),l=0;a&&l<u.length;l++){var c=u[l];a&&"undefined"==typeof a[c]&&function(r){o++;var s=e[r];if(t)i.createValueForProperty(r,s,function(e){a&&"undefined"!=typeof e?a[r]=e:n&&(a=void 0),o--,0==o&&t(a)},n||void 0);else{var l=i.createValueForProperty(r,s,void 0,n||void 0);a&&"undefined"!=typeof l?a[r]=l:n&&(a=void 0)}}(c)}return o--,t&&0==o&&t(a),a},createValueForIndex:function(t,n,r,i){if("function"==typeof n){var a=n;n=r,r=a}e.isData(n)&&(n=n.value());var o=this.indexSchemas(t);return o.createValue(n,r,void 0,void 0,i)},createValueForProperty:function(t,n,r,i){if("function"==typeof n){var a=n;n=r,r=a}e.isData(n)&&(n=n.value());var o=this.propertySchemas(t);return o.createValue(n,r,void 0,void 0,i)},createData:function(t,n){var r=this;if("function"==typeof t){var i=t;t=n,n=i}return e.isData(t)&&t==t.value(),n?(this.createValue(t,function(t){var i=e.create(t).addSchema(r.fixed());n(i)}),this):e.create(this.createValue(void 0,t)).addSchema(this)},indexSchemas:function(e){for(var t=new M,n=0;n<this.length;n++)t=t.concat(this[n].indexSchemas(e));return t},tupleTyping:function(){for(var e=0,t=0;t<this.length;t++)e=Math.max(e,this[t].tupleTyping());return e},propertySchemas:function(e){for(var t=new M,n=0;n<this.length;n++)t=t.concat(this[n].propertySchemas(e));return t},propertyDependencies:function(e){for(var t=[],n={},r=0;r<this.length;r++)for(var i=this[r].propertyDependencies(e),a=0;a<i.length;a++)"string"==typeof i[a]?n[i[a]]||(n[i[a]]=!0,t.push(i[a])):t.push(i[a]);return t},isFull:function(){for(var e=0;e<this.length;e++){if(!this[e].isFull())return!1;for(var t=this[e].andSchemas(),n=0;n<t.length;n++)if(-1==this.indexOf(t[n],!0))return!1}return!0},getFull:function(e){function t(r){i+=r.length;for(var o=0;o<r.length;o++)r[o].getFull(function(r){for(var o=0;o<n.length;o++)if(r.equals(n[o])){if(i--,0==i){var s=new M(n,a);e.call(s,s)}return}n.push(r);var l=r.extendSchemas();if(t(l),i--,0==i){var s=new M(n,a);e.call(s,s)}})}if(!e){for(var n=[],r=0;r<this.length;r++)n[r]=this[r].getFull();return new M(n)}if(0==this.length)return e.call(this,this),this;var i=0,n=[],a=this.fixed();return t(this),this},formats:function(){for(var e=[],t=0;t<this.length;t++){var n=this[t].format();null!=n&&e.push(n)}return e},containsFormat:function(e){return-1!==this.formats().indexOf(e)},xorSchemas:function(){for(var e=[],t=0;t<this.length;t++)e=e.concat(this[t].xorSchemas());return e},orSchemas:function(){for(var e=[],t=0;t<this.length;t++)e=e.concat(this[t].orSchemas());return e}},M.prototype.basicTypes=M.prototype.types,M.prototype.potentialLinks=M.prototype.links,e.extendSchemaList=function(e){for(var t in e)void 0==M.prototype[t]&&(M.prototype[t]=e[t])};var ht=[];e.extendCreateValue=function(e){ht.push(e)},e.createSchemaList=function(e){return Array.isArray(e)||(e=[e]),new M(e)},q.getUniqueKey();var dt=0;F.prototype={update:function(e){this.updateLinksWithKey(e),this.updateDependenciesWithKey(e),this.updateMatchesWithKey(e)},updateFromSelfLink:function(){this.cachedLinkList=null;var e=[];for(var t in this.links){var n=this.links[t];for(i=0;i<n.length;i++){var r=n[i];"self"==r.rel()&&(r.active=!1)}}for(var t in this.links){var n=this.links[t];for(i=0;i<n.length;i++){var r=n[i];"self"==r.rel()&&(r.update(),r.active&&(e.push(r),r.active=!1,this.cachedLinkList=null))}}for(var i=0;i<e.length;i++)e[i].active=!0;for(var t in this.links){var n=this.links[t];for(i=0;i<n.length;i++){var r=n[i];"self"!=r.rel()&&r.update()}}this.dataObj.properties(function(e,t){t.addLink(null)}),this.dataObj.items(function(e,t){t.addLink(null)})},updateLinksWithKey:function(e){var t,n,r,i,a=[];for(t in this.links)for(r=this.links[t],n=0;n<r.length;n++)i=r[n],(i.usesKey(e)||null==e)&&a.push(i);if(a.length>0){var o=null;for(n=0;n<a.length;n++){i=a[n];var s=i.active?i.rawLink.rawLink.href:null;i.update();var l=i.active?i.rawLink.rawLink.href:null;if(l!=s&&"self"==i.rel()){o=i;break}}null!=o&&this.updateFromSelfLink(o),this.invalidateSchemaState()}},updateMatchesWithKey:function(e){var t=[];for(schemaKey in this.matches)t.push(schemaKey);t.sort(),t.reverse();for(var n=0;n<t.length;n++){var r=this.matches[t[n]];if(void 0!=r)for(var i=0;i<r.length;i++)r[i].dataUpdated(e)}},updateDependenciesWithKey:function(e){var t=[];for(schemaKey in this.dependencySelectors)t.push(schemaKey);t.sort(),t.reverse();for(var n=0;n<t.length;n++)for(var r=this.dependencySelectors[t[n]],i=0;i<r.length;i++)r[i].dataUpdated(e)},alreadyContainsSchema:function(e,t){for(var n=0;n<t.length;n++){var r=t[n];if(void 0!=this.schemas[r])for(var i=0;i<this.schemas[r].length;i++){var a=this.schemas[r][i];if(e.equals(a))return!0}}return!1},addSchema:function(t,n,r,i){var a=this;void 0==n&&(n=q.getUniqueKey(),dt=0),void 0==i&&(i=!0),void 0==r?r=[n]:r[r.length]=n,void 0==this.schemas[n]&&(this.schemas[n]=[]),this.schemaFlux++,"string"==typeof t&&(t=e.createSchema({$ref:t})),t.getFull(function(e){if(a.alreadyContainsSchema(e,r))return a.schemaFlux--,a.checkForSchemasStable(),void 0;Y.increment(),a.schemas[n].push(e),a.schemasFixed[n]=a.schemasFixed[n]||i,a.dataObj.properties(function(t,i){for(var a=q.getKeyVariant(n,"prop"),o=e.propertySchemas(t),s=0;s<o.length;s++)i.addSchema(o[s],a,r)}),a.dataObj.indices(function(t,i){q.getKeyVariant(n,"idx");for(var a=e.indexSchemas(t),t=0;t<a.length;t++)i.addSchema(a[t],n,r)});for(var t=e.extendSchemas(),o=0;o<t.length;o++)a.addSchema(t[o],n,r,i);a.addLinks(e.links(),n,r),a.addXorSelectors(e,n,r),a.addOrSelectors(e,n,r),a.addDependencySelector(e,n,r),a.schemaFlux--,a.invalidateSchemaState(),Y.decrement()})},addLinks:function(e,t,n){var r,i;void 0==this.links[t]&&(this.links[t]=[]);var a=null;for(r=0;r<e.length;r++)i=new P(this.dataObj,e[r]),this.links[t].push(i),this.addMonitorForLink(i,t,n),i.update(),i.active&&"self"==i.rawLink.rawLink.rel&&(a=i);null!=a&&this.updateFromSelfLink(a),this.invalidateSchemaState()},addXorSelectors:function(e,t,n){for(var r=e.xorSchemas(),i=[],a=0;a<r.length;a++){var o=new J(r[a],q.getKeyVariant(t,"xor"+a),n,this);i.push(o)}this.xorSelectors[t]=void 0==this.xorSelectors[t]?i:this.xorSelectors[t].concat(i)},addOrSelectors:function(e,t,n){for(var r=e.orSchemas(),i=[],a=0;a<r.length;a++){var o=new V(r[a],q.getKeyVariant(t,"or"+a),n,this);i.push(o)}this.orSelectors[t]=void 0==this.orSelectors[t]?i:this.orSelectors[t].concat(i)},addDependencySelector:function(e,t,n){var r=new N(e,q.getKeyVariant(t,"dep"),n,this),i=[r];this.dependencySelectors[t]=void 0==this.dependencySelectors[t]?i:this.dependencySelectors[t].concat(i)},addLink:function(t){if(null==t)return this.updateFromSelfLink(),this.invalidateSchemaState(),void 0;if("invalidate"==t.rel||"invalidates"==t.rel){var n=this.dataObj.resolveUrl(t.href);return e.invalidate(n),void 0}var r=q.getUniqueKey(),i=e.create(t),a=new k(i);this.addLinks([a],r)},addMonitorForLink:function(t,n,r){var i=this,a=t.rel();if("describedby"===a){var o=q.getKeyVariant(n);t.addMonitor(o,function(n){if(i.removeSchema(o),n){var a=t.rawLink,s=e.createSchema({$ref:a.href});i.addSchema(s,o,r,!1)}})}},addSchemaMatchMonitor:function(e,t,n,r,i){var a=new O(e,this.dataObj,t,i);return void 0==this.matches[e]&&(this.matches[e]=[]),this.matches[e].push(a),a.addMonitor(n,r),a},removeSchema:function(e){Y.increment(),this.dataObj.indices(function(t,n){n.removeSchema(e)}),this.dataObj.properties(function(t,n){n.removeSchema(e)});var t,n,r=[];for(t in this.schemas)q.keyIsVariant(t,e)&&r.push(t);for(t in this.links)q.keyIsVariant(t,e)&&r.push(t);for(t in this.matches)q.keyIsVariant(t,e)&&r.push(t);for(n=0;n<r.length;n++)t=r[n],delete this.schemas[t],delete this.links[t],delete this.matches[t],delete this.xorSelectors[t],delete this.orSelectors[t],delete this.dependencySelectors[t];r.length>0&&this.invalidateSchemaState(),Y.decrement()},clear:function(){this.schemas={},this.links={},this.matches={},this.invalidateSchemaState()},getSchemas:function(){if(null!==this.cachedSchemaList)return this.cachedSchemaList;var e,t,n,r,i,a,o=[],s={};for(n in this.schemas){r=this.schemas[n];var l=this.schemasFixed[n];for(e=0;e<r.length;e++){for(i=r[e],l&&(s[i.data.uniqueId]=i),a=!1,t=0;t<o.length;t++)if(i.equals(o[t])){a=!0;break}a||o.push(i)}}var u=[];for(var n in s)u.push(s[n]);return this.cachedSchemaList=new M(o,u),this.cachedSchemaList},getLinks:function(e){var t,n,r,i;if(null!==this.cachedLinkList)return this.cachedLinkList.rel(e);var a=[];for(t in this.links)for(i=this.links[t],n=0;n<i.length;n++)r=i[n],r.active&&a.push(r.rawLink);return this.cachedLinkList=new D(a),this.cachedLinkList.rel(e)},invalidateSchemaState:function(){this.cachedSchemaList=null,this.cachedLinkList=null,this.schemasStable=!1,this.checkForSchemasStable()},checkForSchemasStable:function(){if(this.schemaFlux>0)return!1;var e,t,n,r;for(t in this.schemas)for(n=this.schemas[t],e=0;e<n.length;e++)if(r=n[e],!r.isComplete())return this.schemasStable=!1,!1;var i=this;return i.schemasStable||(i.schemasStable=!0,L(i.dataObj)),i.schemasStableListeners.notify(i.dataObj,i.getSchemas()),!0},addSchemasForProperty:function(e,t){for(var n in this.schemas)for(var r=q.getKeyVariant(n,"prop"),i=0;i<this.schemas[n].length;i++)for(var a=this.schemas[n][i],o=a.propertySchemas(e),s=0;s<o.length;s++)t.addSchema(o[s],r)},addSchemasForIndex:function(e,t){for(var n in this.schemas)for(var r=q.getKeyVariant(n,"idx"),i=0;i<this.schemas[n].length;i++)for(var a=this.schemas[n][i],o=a.indexSchemas(e),s=0;s<o.length;s++)t.addSchema(o[s],r)},removeSubSchemas:function(e){for(var t in this.schemas)e.removeSchema(t)},whenSchemasStable:function(e){this.schemasStableListeners.add(e),this.checkForSchemasStable()}},P.prototype={update:function(){var e=this.potentialLink.canApplyTo(this.dataObj);e?(this.rawLink=this.potentialLink.linkForData(this.dataObj),"self"==this.potentialLink.rel()&&this.dataObj.document.addSelfLink(this)):this.rawLink&&("self"==this.potentialLink.rel()&&this.dataObj.document.removeSelfLink(this),this.rawLink=null),this.active=e,this.updateMonitors.notify(this.active)},rel:function(){return this.potentialLink.rel()},usesKey:function(e){return this.potentialLink.usesKey(e)},addMonitor:function(e,t){this.updateMonitors.add(e,t)}},N.prototype={dataUpdated:function(e){if(null!=e)if(this.schemaSet.dataObj.property(e).defined())for(var t=this.schema.propertyDependencies(e),n=0;n<t.length;n++){var r=t[n];"string"!=typeof r&&this.schemaSet.addSchema(r,this.inferredSchemaKeys[e],this.schemaKeyHistory,!1)}else this.schemaSet.removeSchema(this.inferredSchemaKeys[e]);else for(var i=this.schema.data.property("dependencies").keys(),n=0;n<i.length;n++){var e=i[n];this.dataUpdated(e)}}},e.config={antiCacheUrls:!1,debug:!1},e.UriTemplate=o}("undefined"!=typeof module&&module.exports?exports:(this.Jsonary={},this.Jsonary)),function(e){function t(e){return"object"==typeof e?JSON.parse(JSON.stringify(e)):e}function n(e){e=e||10;for(var t="";t.length<e;)t+=p.charAt(Math.floor(Math.random()*p.length));return t}function r(e){this.uniqueId=y++;var r=this;this.elementLookup={},void 0==e&&(e=m+"."+v++ +n(4)+".");var i=0;this.getElementId=function(){return e+i++},this.enhancementContexts={},this.enhancementActions={},this.enhancementInputs={},"undefined"!=typeof document&&(f.registerChangeListener(function(e,t){e.each(function(e,n){for(var i=t.affectedData(n),a=0;a<i.length;a++)r.update(i[a],n)})}),f.registerSchemaChangeListener(function(e){for(var n={},i=0;i<e.length;i++){var o=e[i],s=o.uniqueId,l=r.elementLookup[s];n[s]=l?l.slice(0):[]}for(var u=0;u<e.length;u++)for(var o=e[u],s=o.uniqueId,l=n[s],i=0;i<l.length;i++){var c=a.getElementById(l[i]);if(void 0!=c){var h=c.jsonaryContext,f=t(this.uiStartingState),p=d(o,f,h.usedComponents);p.uniqueId==h.renderer.uniqueId?p.render(c,o,h):h.baseContext.render(c,o,h.label,f)}}})),this.rootContext=this,this.subContexts={},this.oldSubContexts={}}function i(){var e=[];for(var t in b.elementLookup){for(var n=b.elementLookup[t],r=!1,i=0;i<n.length;i++){var o=a.getElementById(n[i]);if(o){r=!0;break}}r||e.push(t)}for(var i=0;i<e.length;i++)delete b.elementLookup[e[i]];for(var t in b.enhancementContexts)if(b.enhancementContexts[t]){var s=b.enhancementContexts[t];f.log(f.logLevel.WARNING,"Orphaned context for element: "+JSON.stringify(t)+"\renderer:"+s.renderer.name+"\ncomponents:"+s.renderer.filterObj.component.join(", ")+"\ndata: "+s.data.json()),b.enhancementContexts[t]=null}for(var t in b.enhancementActions)if(b.enhancementActions[t]){var s=b.enhancementActions[t].context;f.log(f.logLevel.WARNING,"Orphaned action for element: "+JSON.stringify(t)+"\renderer:"+s.renderer.name+"\ncomponents:"+s.renderer.filterObj.component.join(", ")+"\ndata: "+s.data.json()),b.enhancementActions[t]=null}for(var t in b.enhancementInputs)if(b.enhancementInputs[t]){var s=b.enhancementInputs[t].context;f.log(f.logLevel.WARNING,"Orphaned action for input: "+JSON.stringify(t)+"\renderer:"+s.renderer.name+"\ncomponents:"+s.renderer.filterObj.component.join(", ")+"\ndata: "+s.data.json()),b.enhancementInputs[t]=null}}function a(e,t,n){"string"==typeof e&&(e=a.getElementById(e));var r=document.createElement("span");r.className="jsonary",e.innerHTML="",e.appendChild(r);var i=b.subContext(Math.random());return b.oldSubContexts={},b.subContexts={},i.render(r,t,"render",n)}function o(e,t){var n=b.renderHtml(e,null,t);return b.oldSubContexts={},b.subContexts={},'<span class="jsonary">'+n+"</span>"}function s(e,t,n){return b.asyncRenderHtml(e,null,t,function(e,t,r){e&&n(e,t,r),n(null,'<span class="jsonary">'+t+"</span>",r)})}function l(e){this.renderFunction=e.render||e.enhance,this.renderHtmlFunction=e.renderHtml,this.updateFunction=e.update,"function"==typeof e.filter?(this.filterFunction=e.filter,this.filterObj={}):(this.filterObj=e.filter||{},this.filterFunction=this.filterObj.filter),this.actionFunction=e.action;for(var t in e)void 0==this[t]&&(this[t]=e[t]);this.uniqueId=S++,this.name=e.name||"#"+this.uniqueId;var n=e.component||this.filterObj.component;void 0==n&&(n=A[A.length-1]),"string"==typeof n&&(n=[n]),this.component=this.filterObj.component=n,(e.saveState||e.saveUiState)&&(this.saveUiState=e.saveState||e.saveUiState),(e.loadState||e.loadUiState)&&(this.loadUiState=e.loadState||e.loadUiState)}function u(e){var t=new l(e);x[t.uniqueId]=t;var n=t.filterObj.type||["undefined","null","boolean","integer","number","string","object","array"],r=t.filterObj.component;Array.isArray(n)||(n=[n]),-1!==n.indexOf("number")&&-1===n.indexOf("integer")&&n.push("integer");for(var i=0;i<n.length;i++){var a=n[i];if(!w[a])throw new Error("Invalid type(s): "+a);for(var o=w[a],s=0;s<r.length;s++){var u=r[s];o[u]=o[u]||[],o[u].push(t)}}return t}function c(e){"object"==typeof e&&(e=e.uniqueId),delete x[e];for(var t in w)for(var n in w[t])for(var r=w[t][n],i=0;i<r.length;i++)r[i].uniqueId==e&&(r.splice(i,1),i--)}function h(e,t,n,r){r=!!r||void 0==r;for(var i=0;i<k.length;i++){var a=k[i],o=a(e,t,n,r);if(o===!1)break}}function d(e,t,n){for(var r=e.schemas(),i=e.basicType(),a=0;a<A.length;a++)if(-1==n.indexOf(A[a])){var o=A[a],s=w[i];if(s[o])for(var l=s[o],u=l.length-1;u>=0;u--){var c=l[u];if(c.canRender(e,r,t))return c}}}var f=e.Jsonary;f.config.checkTagParity=["div","span"];var p="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",m="Jsonary",v=0,g={ADD_REMOVE:"ADD_REMOVE",TYPE_SELECTOR:"TYPE_SELECTOR",RENDERER:"DATA_RENDERER",add:function(e,t){if(void 0!=this[e]){if(void 0===t)return;-1!=A.indexOf(e)&&A.splice(A.indexOf(e),1)}if(this[e]=e,"number"==typeof t){var n=Math.max(0,Math.min(A.length-1,Math.round(t)));A.splice(n,0,this[e])}else-1!=A.indexOf(t)?A.splice(A.indexOf(t),0,this[e]):-1!=A.indexOf(g[t])?A.splice(A.indexOf(g[t]),0,this[e]):A.splice(A.length-1,0,this[e])}},A=[g.ADD_REMOVE,g.TYPE_SELECTOR,g.RENDERER],y=0;
r.prototype={usedComponents:[],rootContext:null,baseContext:null,labelForData:function(e){if(this.data&&e.document.isDefinitive){var t=e.getLink("self"),n=t?t.href:e.referenceUrl();if(n){for(var r=this.data.referenceUrl()||this.data.resolveUrl(""),i=0;n.substring(0,r.length-i)!=r.substring(0,r.length-i);)i++;var a=n.substring(r.length-i);return i?i+"!"+a:"!"+a}}else if(this.data&&this.data.document==e.document){for(var o=this.data.pointerPath(),s=e.pointerPath(),i=0;s.substring(0,o.length-i)!=o.substring(0,o.length-i);)i++;var a=s.substring(o.length-i);return i?i+"!"+a:"!"+a}return this.renderer&&f.log(f.logLevel.WARNING,"No label supplied for data in renderer "+JSON.stringify(this.renderer.name)),"$"+e.uniqueId},subContext:function(e,t){f.isData(e)&&(e=this.labelForData(e)),t=t||{};var n=this.getSubContext(!1,this.data,e,t);return n.renderer=this.renderer,n.uiState||n.loadState(n.uiStartingState),n},subContextSavedStates:{},saveUiState:function(){var e={};for(var t in this.subContexts)e[t]=this.subContexts[t].saveUiState();for(var t in this.oldSubContexts)e[t]=this.oldSubContexts[t].saveUiState();var n=this.renderer?this.renderer.saveUiState:l.prototype.saveUiState;return n.call(this.renderer,this.uiState,e,this.data)},loadUiState:function(e){var t=this.renderer?this.renderer.loadUiState:l.prototype.loadUiState,n=t.call(this.renderer,e);this.uiState=n[0],this.subContextSavedStates=n[1]},saveCompleteState:function(e){var t={};t.rendererId=this.renderer?this.renderer.uniqueId:null,t.sub={};var n={actions:{},inputs:{},rootContext:this.uniqueId,contexts:{},documents:{}};n.contexts[this.uniqueId]=t;for(var r in this.subContexts){var i=this.subContexts[r];t.sub[r]=i.uniqueId;var a=i.saveCompleteState(!0);for(var o in a.contexts)n.contexts[o]=a.contexts[o];for(var o in a.documents)n.documents[o]=a.documents[o]}for(var r in this.oldSubContexts){var i=this.oldSubContexts[r];t.sub[r]=i.uniqueId;var a=i.saveCompleteState(!0);for(var o in a.contexts)n.contexts[o]=a.contexts[o];for(var o in a.documents)n.documents[o]=a.documents[o]}if(this.data?(t.data={path:this.data.pointerPath(),document:this.data.document.uniqueId},n.documents[this.data.document.uniqueId]||(n.documents[this.data.document.uniqueId]=this.data.document.deflate(!0))):t.data=null,!e){for(var r in this.enhancementActions){var s=this.enhancementActions[r];n.actions[r]={context:s.context.uniqueId,name:s.actionName,params:s.params};for(var l=s.context;l&&l.baseContext!=l&&n.contexts[l.uniqueId];)n.contexts[l.uniqueId].keep=!0,l=l.baseContext}for(var r in this.enhancementInputs){var s=this.enhancementInputs[r];n.inputs[r]={context:s.context.uniqueId,name:s.actionName,params:s.params};for(var l=s.context;l&&l.baseContext!=l&&n.contexts[l.uniqueId];)n.contexts[l.uniqueId].keep=!0,l=l.baseContext}var u={};for(var r in n.contexts)n.contexts[r].keep&&(u[r]=n.contexts[r],delete u[r].keep);n.contexts=u,n.uiState=this.saveUiState()}return n},getSubContext:function(e,n,r,i){function a(e,n,r,i,a,o){this.uniqueId=y++,this.rootContext=e,this.baseContext=n,this.label=r,this.data=i,this.uiStartingState=t(a||{}),this.usedComponents=o,this.subContexts={},this.oldSubContexts={}}if("object"==typeof r&&null!=r)throw new Error("Label cannot be an object");if(r||""===r)var o=r;else var o=this.labelForData(n);if(void 0!=this.oldSubContexts[o]&&(this.subContexts[o]=this.oldSubContexts[o]),void 0!=this.subContexts[o]&&(null===this.subContexts[o].data?this.subContexts[o].data=n:this.subContexts[o].data!=n&&(delete this.subContexts[o],delete this.oldSubContexts[o],delete this.subContextSavedStates[o])),this.subContextSavedStates[o]&&(i=this.subContextSavedStates[o],delete this.subContextSavedStates[o]),void 0==this.subContexts[o]){var s=[];this.data==n&&(s=this.usedComponents.slice(0),void 0!=this.renderer&&(s=s.concat(this.renderer.filterObj.component))),"object"==typeof e&&(e=e.id),a.prototype=this.rootContext,this.subContexts[o]=new a(this.rootContext,this,o,n,i,s)}var l=this.subContexts[o];return l.elementId=e,l.parent=this,l},clearOldSubContexts:function(){this.oldSubContexts=this.subContexts,this.subContexts={}},rerender:function(){if(this.parent&&!this.elementId)return this.parent.rerender();var e=a.getElementById(this.elementId);null!=e&&(this.renderer.render(e,this.data,this),this.clearOldSubContexts())},asyncRerenderHtml:function(e){var t=this;void 0==this.uiState&&this.loadState(this.uiStartingState);var n=this.renderer,r=this.data;n.asyncRenderHtml(r,this,function(n,r){return n?e(n,r,t):(t.clearOldSubContexts(),r='<span class="jsonary">'+r+"</span>",e(null,r,t),void 0)})},render:function(e,t,n,r){if(void 0==r&&"object"==typeof n&&(r=n,n=null),"string"==typeof t&&(t=f.getData(t)),void 0!=t.getData){var i=this;e.innerHTML='<div class="loading"></div>';var a=this.getSubContext(e.id,null,n,r);return t.getData(function(t){i.render(e,t,n,r)}),a}"object"!=typeof r&&(r={}),(void 0==e.id||""==e.id)&&(e.id=this.getElementId());var o=e.jsonaryContext,a=this.getSubContext(e.id,t,n,r);if(e.jsonaryContext=a,o){var s=o.data.uniqueId,l=this.elementLookup[s].indexOf(e.id);l>=0&&this.elementLookup[s].splice(l,1)}var u=t.uniqueId;void 0==this.elementLookup[u]&&(this.elementLookup[u]=[]),-1==this.elementLookup[u].indexOf(e.id)&&this.elementLookup[u].push(e.id);var c=d(t,r,a.usedComponents);return void 0!=c?(a.renderer=c,void 0==a.uiState&&a.loadState(a.uiStartingState),c.render(e,t,a),a.clearOldSubContexts()):e.innerHTML="NO RENDERER FOUND",a},renderHtml:function(e,t,n){void 0==n&&"object"==typeof t&&(n=t,t=null);var r=this.getElementId();if("string"==typeof e&&(e=f.getData(e)),void 0!=e.getData){var i=this,o=!1;if(e.getData(function(s){if(o){var l=a.getElementById(r);l?i.render(l,s,t,n):f.log(f.logLevel.WARNING,"Attempted delayed render to non-existent element: "+r)}else o=!0,e=s}),!o)return o=!0,'<span id="'+r+'"><div class="loading"></div></span>'}n===!0&&(n=this.uiStartingState),"object"!=typeof n&&(n={});var s=this.getSubContext(r,e,t,n),l=d(e,n,s.usedComponents);s.renderer=l,void 0==s.uiState&&s.loadState(s.uiStartingState);var u=l.renderHtml(e,s);s.clearOldSubContexts();var c=e.uniqueId;return void 0==this.elementLookup[c]&&(this.elementLookup[c]=[]),-1==this.elementLookup[c].indexOf(r)&&this.elementLookup[c].push(r),this.addEnhancement(r,s),'<span id="'+r+'">'+u+"</span>"},asyncRenderHtml:function(e,t,n,r){var i=this;void 0==n&&"object"==typeof t&&(n=t,t=null);var a=this.getElementId();if("string"==typeof e&&(e=f.getData(e)),void 0!=e.getData){t=t||"async"+Math.random();var o=this.getSubContext(a,null,t,n);return e.getData(function(e){i.asyncRenderHtml(e,t,n,r)}),o}n===!0&&(n=this.uiStartingState),"object"!=typeof n&&(n={});var o=this.getSubContext(a,e,t,n),s=d(e,n,o.usedComponents);return o.renderer=s,void 0==o.uiState&&o.loadState(o.uiStartingState),s.asyncRenderHtml(e,o,function(e,t){o.clearOldSubContexts(),r(null,t,o)}),o},update:function(e,n){var r=e.uniqueId,i=this.elementLookup[r];if(void 0!=i&&0!=i.length)for(var i=i.slice(0),o=0;o<i.length;o++){var s=a.getElementById(i[o]);if(void 0!=s){var l=s.jsonaryContext||this.enhancementContexts[i[o]],u=t(this.uiStartingState),c=d(e,u,l.usedComponents);c.uniqueId==l.renderer.uniqueId?c.update(s,e,l,n):l.baseContext.render(s,e,l.label,u)}}},actionHtml:function(e,t){var n=2,r=!1,i=f.render.actionUrl(this,t);"boolean"==typeof t&&(r=arguments[1],i=arguments[2]||i,t=arguments[3],n+=2);for(var a=[],o=n;o<arguments.length;o++)a.push(arguments[o]);var s=this.getElementId();return this.addEnhancementAction(s,t,this,a,r),f.render.actionHtml(s,i,e)},inputNameForAction:function(e){var t=!1,n=1;"boolean"==typeof e&&(t=e,e=arguments[1],n++);for(var r=[],i=n;i<arguments.length;i++)r.push(arguments[i]);var a=this.getElementId();return this.enhancementInputs[a]={inputName:a,actionName:e,context:this,params:r,historyChange:t},a},addEnhancement:function(e,t){this.enhancementContexts[e]=t},addEnhancementAction:function(e,t,n,r,i){null==r&&(r=[]),this.enhancementActions[e]={actionName:t,context:n,params:r,historyChange:i}},enhanceElement:function(e){for(var t=e;e;)if(e.firstChild)e=e.firstChild;else{for(;!e.nextSibling&&e!=t;)1==e.nodeType&&this.enhanceElementSingle(e),e=e.parentNode;if(1==e.nodeType&&this.enhanceElementSingle(e),e==t)break;if(e.parentNode!=e.nextSibling.parentNode)throw new Error("DOM mismatch - did you forget a close tag? "+e.innerHTML);e=e.nextSibling}},enhanceElementSingle:function(e){var t=e.id,n=this.enhancementContexts[t];if(void 0!=n){e.jsonaryContext=n,delete this.enhancementContexts[t];var r=n.renderer;void 0!=r&&r.enhance(e,n.data,n)}var i=this.enhancementActions[e.id];void 0!=i&&(delete this.enhancementActions[e.id],e.onclick=function(){i.context.elementId;var e=i.context,t=[e,i.actionName].concat(i.params);return e.renderer.action.apply(e.renderer,t)&&e.rerender(),h(e.data,e,i.actionName,i.historyChange),!1});var a=this.enhancementInputs[e.name];void 0!=a&&(delete this.enhancementInputs[e.name],e.onchange=function(){var e=this.value;if("checkbox"==this.getAttribute("type")&&(e=this.checked),"select"==this.tagName.toLowerCase()&&null!=this.getAttribute("multiple")){e=[];for(var t=0;t<this.options.length;t++){var n=this.options[t];n.selected&&e.push(n.value)}}a.context.elementId;var r=a.context,i=[r,a.actionName,e].concat(a.params);r.renderer.action.apply(r.renderer,i)&&r.rerender(),h(r.data,r,a.actionName,a.historyChange)}),e=null}},r.prototype.saveState=r.prototype.saveUiState,r.prototype.loadState=r.prototype.loadUiState;var b=new r;a.loadDocumentsFromState=function(e,t){var n={},r=0,i=null;for(var a in e.documents)r++,n[a]=f.inflate(e.documents[a],function(e){i=i||e,r--,0==r&&t&&t(i,n)});return e.parsedDocuments=function(){return n},n},a.loadCompleteState=function(e){function t(t){var n=e.contexts[t];if(n.data){var r=i[n.data.document];return r.root.subPath(n.data.path)}return null}function n(i,a){var o=e.contexts[a];r[a]=i;var s=x[o.rendererId];if(i.renderer=s,i.loadState(i.uiStartingState),o.sub)for(var l in o.sub){var u=o.sub[l];if(!r[u]&&e.contexts[u]){var c=t(u),h=i.getSubContext("",c,l);n(h,u)}}}var r={};e.parsedDocuments||a.loadDocumentsFromState(e);var i=e.parsedDocuments(),o=e.rootContext,s=t(o),l=b.getSubContext("",s,null,e.uiState);n(l,o);var u={};for(var c in e.actions)!function(t,n){var n=e.actions[t],i=r[n.context];u[t]=function(){var e=[i,n.name].concat(n.params||[]);return i.renderer.action.apply(i.renderer,e)}}(c,e.actions[c]);var h={};for(var c in e.inputs)!function(t,n){var n=e.inputs[t],i=r[n.context];h[t]=function(e){var t=[i,n.name,e].concat(n.params||[]);return i.renderer.action.apply(i.renderer,t)}}(c,e.inputs[c]);return{context:l,actions:u,inputs:h}},"undefined"!=typeof document&&setInterval(i,3e4),"undefined"!=typeof document&&(f.cleanup=i),a.empty=void 0!=e.jQuery?function(t){e.jQuery(t).empty()}:function(e){e.innerHTML=""},a.Components=g,a.actionUrl=function(){return"javascript:void(0)"},a.actionHtml=function(e,t,n){return'<a href="'+f.escapeHtml(t)+'" id="'+e+'" class="jsonary-action">'+n+"</a>"},a.rendered=function(e){var t=e.uniqueId;if(!b.elementLookup[t])return!1;for(var n=b.elementLookup[t],r=0;r<n.length;r++){var i=n[r],o=a.getElementById(i);if(o)return!0}return!1},a.saveData=function(e,t){if("undefined"==typeof localStorage)return"LOCALSTORAGE_MISSING";for(var n=(new Date).getTime()-72e5,r=Object.keys(localStorage),i=0;i<r.length;i++){var a=r[i];try{var o=JSON.parse(localStorage[a]);o.accessed<n&&delete localStorage[a]}catch(s){}}return localStorage[e.saveStateId]=JSON.stringify({accessed:(new Date).getTime(),data:e.deflate()}),t},a.loadData=function(e){if("undefined"==typeof localStorage)return void 0;var t=localStorage[e];return t?(t=JSON.parse(t),f.inflate(t.data)):void 0};var S=0;l.prototype={updateAll:function(){var e=[];for(var t in b.elementLookup)e=e.concat(b.elementLookup[t]);for(var n=0;n<e.length;n++){var r=a.getElementById(e[n]);if(void 0!=r){var i=r.jsonaryContext;(i.renderer.uniqueId=this.uniqueId)&&i.rerender()}}},render:function(e,t,n){return null==e?(f.log(f.logLevel.WARNING,"Attempted to render to non-existent element.\n	Data path: "+t.pointerPath()+"\n	Document: "+t.document.url),this):(void 0!=e[0]&&(e=e[0]),a.empty(e),e.innerHTML=this.renderHtml(t,n),null!=this.renderFunction&&this.renderFunction(e,t,n),n.enhanceElement(e),this)},renderHtml:function(e,t){var n="";if(void 0!=this.renderHtmlFunction&&(n=this.renderHtmlFunction(e,t),f.config.debug))for(var r=0;r<f.config.checkTagParity.length;r++){var i=f.config.checkTagParity[r],a=n.match(new RegExp("<s*"+i,"gi")),o=n.match(new RegExp("</s*"+i,"gi"));!a||o&&a.length==o.length||(f.log(f.logLevel.ERROR,"<"+i+"> mismatch in: "+this.name),n='<div class="error">&lt;'+i+"&gt; mismatch in "+f.escapeHtml(this.name)+"</div>")}return n},asyncRenderHtml:function(e,t,n){function r(e){var t=Object.create(e);return t.renderHtml=l,t.subContext=function(){return r(e.subContext.apply(this,arguments))},t}function i(){if(o--,!(o>0)){for(var e in s);n(null,a,t)}}var a="",o=1,s={};if(void 0!=this.renderHtmlFunction){var l=function(e,t,n){var r="<<ASYNC"+Math.random()+">>",a=null;return o++,this.asyncRenderHtml(e,t,n,function(e,t){s[r]=t,a=t,i()}),null!==a?(delete s[r],a):r};a=this.renderHtmlFunction(e,r(t))}i()},enhance:function(e,t,n){return null!=this.renderFunction&&this.renderFunction(e,t,n),this},update:function(e,t,n,r){var i;return i=void 0!=this.updateFunction?this.updateFunction(e,t,n,r):this.defaultUpdate(e,t,n,r),i&&this.render(e,t,n),this},action:function(){var e=this.actionFunction.apply(this,arguments);return e},canRender:function(e,t,n){return void 0!=this.filterFunction?this.filterFunction(e,t,n):!0},defaultUpdate:function(e,t,n,r){var i=!1,a="replace"!=r.action(),o=t.pointerPath();return r.subjectEquals(o)||a&&r.subjectChild(o)!==!1?i=!0:void 0!=r.target()&&(r.targetEquals(o)||a&&r.targetChild(o)!==!1)&&(i=!0),i},saveUiState:function(e,t){var n={};for(key in e)n[key]=e[key];for(var r in t)for(var i in t[r])n[r+"-"+i]=t[r][i];for(key in n)f.isData(n[key])&&(n[key]=this.saveStateData(n[key]));return n},saveStateData:function(e){return e?e.document.isDefinitive?"url:"+e.referenceUrl():(e.saveStateId=e.saveStateId||n(),a.saveData(e,e.saveStateId)||e.saveStateId):void 0},loadUiState:function(e){var t={},n={};for(var r in e)if(-1!=r.indexOf("-")){var i=r.split("-"),a=i.shift(),o=i.join("-");n[a]||(n[a]={}),n[a][o]=e[r]}else t[r]=this.loadStateData(e[r])||e[r],f.isRequest(t[r])&&function(e){t[e].getData(function(n){t[e]=n})}(r);return[t,n]},loadStateData:function(e){if(!e||"string"!=typeof e)return void 0;if("url:"==e.substring(0,4)){var t=e.substring(4),n=null,r=f.getData(t,function(e){n=e});return n||r}var n=a.loadData(e);return n&&(n.saveStateId=e),n}},l.prototype.super_=l.prototype;var x={},w={undefined:{},"null":{},"boolean":{},integer:{},number:{},string:{},object:{},array:{}};if(a.register=u,a.deregister=c,"undefined"!=typeof document){var C=[document];a.addDocument=function(e){return C.push(e),this},a.removeDocument=function(e){var t=C.indexOf(e);return-1!==t&&C.splice(t,1),this},a.getElementById=function(e){for(var t=0;t<C.length;t++){var n=C[t].getElementById(e);if(n)return n}return null}}var k=[];if(a.addActionHandler=function(e){k.push(e)},"undefined"!=typeof e.jQuery){var j=function(e,t){var n=this[0];return void 0!=n&&a(n,e,t),this};f.extendData({$renderTo:function(e,t){"string"==typeof e&&(e=jQuery(e));var n=e[0];void 0!=n&&a(n,this,t)}}),j.register=function(e){if(void 0!=e.render){var t=e.render;e.render=function(e,n){var r=$(e);t.call(this,r,n)}}if(void 0!=e.update){var n=e.update;e.update=function(e,t,r){var i=$(e);n.call(this,i,t,r)}}a.register(e)},j.empty=function(e){e.each(function(e,t){a.empty(t)})},jQuery.fn.extend({renderJson:j}),jQuery.extend({renderJson:j})}f.extend({render:a,renderHtml:o,asyncRenderHtml:s}),f.extendData({renderTo:function(e,t){"string"==typeof e&&(e=a.getElementById(e)),a(e,this,t)}}),f.invalidate=function(e){return function(){var t=e.apply(this,arguments),n=[];for(var r in b.elementLookup){var i=b.elementLookup[r];n=n.concat(i)}for(var o=0;o<n.length;o++){var s=a.getElementById(n[o]);s&&s.jsonaryContext&&s.jsonaryContext.data.document.access()}return t}}(f.invalidate)}(this);var Jsonary=this.Jsonary,baseSchema={id:"http://json-schema.org/draft-04/schema#",$schema:"http://json-schema.org/draft-04/schema#",title:"JSON Schema",description:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},positiveInteger:{type:"integer",minimum:0},positiveIntegerDefault0:{allOf:[{$ref:"#/definitions/positiveInteger"},{"default":0}]},simpleTypes:{title:"Simple type","enum":["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},minItems:1,uniqueItems:!0}},type:"object",properties:{id:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"},title:{type:"string"},description:{type:"string"},"default":{},multipleOf:{type:"number",minimum:0,exclusiveMinimum:!0},maximum:{type:"number"},exclusiveMaximum:{type:"boolean","default":!1},minimum:{type:"number"},exclusiveMinimum:{type:"boolean","default":!1},maxLength:{$ref:"#/definitions/positiveInteger"},minLength:{$ref:"#/definitions/positiveIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{oneOf:[{type:"boolean"},{$ref:"#"}],"default":{}},items:{oneOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],"default":{}},maxItems:{$ref:"#/definitions/positiveInteger"},minItems:{$ref:"#/definitions/positiveIntegerDefault0"},uniqueItems:{type:"boolean","default":!1},maxProperties:{$ref:"#/definitions/positiveInteger"},minProperties:{$ref:"#/definitions/positiveIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{oneOf:[{type:"boolean"},{$ref:"#"}],"default":{}},definitions:{type:"object",additionalProperties:{$ref:"#"},"default":{}},properties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},"default":{}},dependencies:{type:"object",additionalProperties:{oneOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},"enum":{type:"array",minItems:1,uniqueItems:!0},type:{oneOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},dependencies:{exclusiveMaximum:["maximum"],exclusiveMinimum:["minimum"]},"default":{}},hyperSchema={$schema:"http://json-schema.org/draft-04/hyper-schema#",id:"http://json-schema.org/draft-04/hyper-schema#",title:"JSON Hyper-Schema",allOf:[{$ref:"http://json-schema.org/draft-04/schema#"}],properties:{additionalItems:{oneOf:[{type:"boolean"},{$ref:"#"}]},additionalProperties:{oneOf:[{type:"boolean"},{$ref:"#"}]},dependencies:{additionalProperties:{oneOf:[{$ref:"#"},{type:"array"}]}},items:{oneOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}]},definitions:{additionalProperties:{$ref:"#"}},patternProperties:{additionalProperties:{$ref:"#"}},properties:{additionalProperties:{$ref:"#"}},allOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"},links:{type:"array",items:{$ref:"#/definitions/linkDescription"}},fragmentResolution:{type:"string"},media:{type:"object",properties:{type:{description:"A media type, as described in RFC 2046",type:"string"},binaryEncoding:{description:"A content encoding scheme, as described in RFC 2045",type:"string"}}},pathStart:{description:"Instances' URIs must start with this value for this schema to apply to them",type:"string",format:"uri"}},definitions:{schemaArray:{title:"Array of schemas",type:"array",items:{$ref:"#"}},linkDescription:{title:"Link Description Object",type:"object",required:["href","rel"],properties:{href:{description:"a URI template, as defined by RFC 6570, with the addition of the $, ( and ) characters for pre-processing",type:"string"},rel:{description:"relation to the target resource of the link",type:"string"},title:{description:"a title for the link",type:"string"},targetSchema:{description:"JSON Schema describing the link target",$ref:"#"},mediaType:{description:"media type (as defined by RFC 2046) describing the link target",type:"string"},method:{description:'method for requesting the target of the link (e.g. for HTTP this might be "GET" or "DELETE")',type:"string"},encType:{description:"The media type in which to submit data along with the request",type:"string","default":"application/json"},schema:{description:"Schema describing the data to submit along with the request",$ref:"#"}}}},links:[{rel:"self",href:"{+id}"},{rel:"full",href:"{+($ref)}"}]};return Jsonary.addToCache("http://json-schema.org/schema",{allOf:[{$ref:"draft-04/schema"}]}),Jsonary.addToCache("http://json-schema.org/draft-04/schema",baseSchema),Jsonary.addToCache("http://json-schema.org/hyper-schema",{allOf:[{$ref:"draft-04/hyper-schema"}]}),Jsonary.addToCache("http://json-schema.org/draft-04/hyper-schema",hyperSchema),function(){function e(){if(window.location.href!=o){o=window.location.href;var e=o.split("#").slice(1).join("#"),i=Jsonary.Uri.resolve(o.split("#")[0],e);n.resolved=i,a=!0,n.base=i.split("?")[0];var l=i.split("?").slice(1).join("?");l?n.query.setValue(Jsonary.decodeData(l,"application/x-www-form-urlencoded",n.queryVariant)):n.query.setValue({}),a=!1,s&&window.history&&n.useHistory&&window.location.href!==n.resolved&&t(!1);for(var u=0;u<r.length;u++)r[u].call(n,n,n.query)}}function t(e){l();var t=Jsonary.encodeData(n.query.value(),"application/x-www-form-urlencoded",n.queryVariant),r=n.base+"?"+t;n.replace(r,e),o=window.location.href}if("undefined"!=typeof window){var n={query:Jsonary.create(null),queryVariant:"pretty",useHistory:!0},r=[];n.onChange=function(e,t){l();var i=0,a=function(){0>=i&&e.apply(this,arguments)};return r.push(a),(t||void 0==t)&&a.call(n,n,n.query),{ignore:function(e){this.disable(),e(),this.enable()},enable:function(){i--},disable:function(){i++}}};var i=!1;n.addHistoryPoint=function(){i=!0},n.replace=function(e,t){l();var a=window.location.href;if(void 0==t&&(t=!0),n.useHistory&&window.history&&window.history.pushState&&window.history.replaceState)i?window.history.pushState({},"",e):window.history.replaceState({},"",e);else{var o=e.split("#")[0],s=window.location.href.split("#")[0];o==s?e="":o.split("?")[0]==s.split("?")[0]?e="?"+e.split("?").slice(1).join("?"):e.split("/").slice(0,3).join("/")==window.location.href.split("/").slice(0,3).join("/")&&(e="/"+e.split("/").slice(3).join("/")),i?window.location.href="#"+e.replace(/%23/g,"#"):window.location.replace("#"+e.replace(/%23/g,"#"))}if(e!=a&&(i=!1),t)for(var u=0;u<r.length;u++)r[u].call(n,n,n.query)};var a=!1,o=null;n.parse=function(e){var t={},r=e.split("#").slice(1).join("#"),i=Jsonary.Uri.resolve(e.split("#")[0],r);t.resolved=i,t.base=i.split("?")[0];var a=i.split("?").slice(1).join("?");return t.query=a?Jsonary.create(Jsonary.decodeData(a,"application/x-www-form-urlencoded",n.queryVariant)):Jsonary.create({}),t},n.query.document.registerChangeListener(function(){a||t(!0)}),Jsonary.extend({location:n});var s=!1,l=function(){s=!0};"onhashchange"in window&&(window.onhashchange=e),"onpopstate"in window&&(window.onpopstate=e),setInterval(e,100),e()}}(this),"undefined"!=typeof window&&function(e){function t(e,t){for(var n=e.getElementsByTagName("link"),r=0;r<n.length;r++){var i=n[r];t.write('<link href="'+escapeHtml(i.href)+'" rel="'+escapeHtml(i.rel||"")+'">')}for(var a=e.getElementsByTagName("style"),r=0;r<a.length;r++){var i=a[r];t.write("<style>"+i.innerHTML+"</style>")}}function n(e){for(var t=0;t<i.length;t++)if(i[t].call(null,e))return!0;return!1}function r(e,t){for(var r=e.getElementsByTagName("script"),i=0;i<r.length;i++){var a=r[i];a.src&&n(a.src)&&t.write('<script src="'+escapeHtml(a.src)+'"></script>')}}var i=[],a=[],o=[];Jsonary.popup=function(n,i,s,l,u){if(void 0===u&&(u=!0),"object"==typeof n){var c=[];for(var h in n)"boolean"==typeof n[h]?c.push(h+"="+(n[h]?"yes":"no")):c.push(h+"="+n[h]);n=c.join(",")}var d=e.open(null,null,n);d.document.open(),d.document.write("<html><head><title>"+escapeHtml(i||"Popup")+"</title>"),t(e.document,d.document),r(e.document,d.document),d.document.write('</head><body class="jsonary popup"></body></html>'),d.document.close(),Jsonary.render.addDocument(d.document);var f=function(){u&&d.close(),Jsonary.render.removeDocument(e.document)},p=function(t){if(t=t||e.event,Jsonary.render.removeDocument(d.document),e.removeEventListener?e.removeEventListener("beforeunload",f,!1):e.detachEvent&&e.detachEvent("onbeforeunload",f),l){var n=l(t);return t&&(t.returnValue=n),n}},m=function(t){t=t||e.event;for(var n=0;n<a.length;n++)a[n].call(d.window,d.window,d.document);return s?s.call(d.window,d.window,d.document):void 0};d.addEventListener?(d.addEventListener("load",m,!1),d.addEventListener("beforeunload",p,!1),e.addEventListener("beforeunload",f,!1)):d.attachEvent&&(d.attachEvent("onload",m),d.attachEvent("onbeforeunload",p),e.attachEvent("onbeforeunload",f));for(var v=0;v<o.length;v++)o[v].call(d.window,d.window);return d},Jsonary.popup.addScripts=function(e){"boolean"==typeof e&&i.push(function(){return e}),"function"==typeof e&&i.push(e);for(var t=0;t<e.length;t++)!function(e){e instanceof RegExp?i.push(function(t){return e.test(t)}):i.push(function(e){return-1!==e.indexOf("search")})}(e[t]);return this},Jsonary.popup.addPreSetup=function(e){return o.push(e),this},Jsonary.popup.addSetup=function(e){return a.push(e),this}}(window),function(){if("undefined"!=typeof window){var e=!1,t=!1,n={};document.onkeydown=function(r){var i=null!=window.event?window.event.keyCode:r.keyCode;17==i?e=!0:16==i?t=!0:n[i]=!0;var a=0;for(var o in n)90!=o&&89!=o&&a++;0==a&&(90==i?e&&(t?Jsonary.redo():Jsonary.undo()):89==i&&e&&!t&&Jsonary.redo())},document.onkeyup=function(r){var i=null!=window.event?window.event.keyCode:r.keyCode;17==i?e=!1:16==i?t=!1:delete n[i]};var r=[],i=[],a=0;Jsonary.registerChangeListener(function(e,t){if(a>0)return a--,void 0;if(!t.readOnly){for(var n=!1,o=0;!n&&o<e.operations.length;o++)for(var s=e.operations[o],l=t.affectedData(s),u=0;u<l.length;u++){var c=l[u];if(Jsonary.render.rendered(c)){n=!0;break}}if(n){for(r.push({patch:e,document:t});r.length>Jsonary.undo.historyLength;)r.shift();i.length>0&&(i=[])}}}),Jsonary.extend({undo:function(){var e=r.pop();void 0!=e&&(a++,i.push(e),e.document.patch(e.patch.inverse()))},redo:function(){var e=i.pop();void 0!=e&&(a++,r.push(e),e.document.patch(e.patch))}}),Jsonary.undo.historyLength=10}}(),function(e){function t(e){if(void 0==e){if("undefined"==typeof document)return;var t=document.getElementsByTagName("script"),n=t[t.length-1];e=n.getAttribute("src")}if(!s[e]){s[e]=!0;var r="";if("undefined"!=typeof XMLHttpRequest){var i=new XMLHttpRequest;i.open("GET",e,!1),i.send(),r=i.responseText}else if("undefined"!=typeof require){var a=require("fs");r=a.readFileSync(e).toString()}var l=(" "+r).split(/\/\*\s*[Tt]emplate:/);l.shift();for(var u=0;u<l.length;u++){var c=l[u];c=c.substring(0,c.indexOf("*/"));var h=c.indexOf("\n"),d=c.substring(0,h).trim(),f=c.substring(h+1);o[d]=f}}}function n(e){t();var n=o[e];return n?r(n):null}function r(e){return{toString:function(){return this.code},code:e,compile:function(e,t,n){return i(this.code,e,t,n)}}}function i(t,n,r,i){void 0==n&&(n=e.defaultFunction),void 0==r&&(r=e.defaultHeaderCode),void 0==i&&(i={}),"subFunc"+Math.floor(1e9*Math.random());var o="(function () {\n",s=[],l=[];for(var u in i)i[u]&&(l.push(u),s.push(i[u]));var c=(" "+t).split(/<\?js|<\?|<%/g),h=c.shift().substring(1);if(r&&(o+="\n"+r+"\n"),o+="	var _arguments = arguments;\n",void 0!==i.echo)o+="	echo("+JSON.stringify(h)+");\n";else{var d="result"+Math.floor(1e9*Math.random());o+="	var "+d+" = "+JSON.stringify(h)+";\n",o+="	var echo = function (str) {"+d+" += str;};\n"}for(;c.length>0;){var f=c.shift(),p=f.match(/\?>|%>/).index,m=f.substring(0,p),v=f.substring(p+2);if(/\s/.test(m.charAt(0)))o+="\n"+m+"\n";else{var g=n(m)||a(m);if("string"==typeof g)o+="\n		echo("+g+");\n";else{s.push(g);var A="fn"+Math.floor(1e10*Math.random());l.push(A),o+="\n	echo("+A+".apply(this, _arguments));\n"}}o+="	echo("+JSON.stringify(v)+");\n"}o+=void 0!==i.echo?'\n	return "";\n})':"\n	return "+d+";\n})";var y=Function.apply(null,l.concat(["return "+o]));return y.apply(null,s)}function a(e){return function(t){var n=""+t[e];return n.replace("&","&amp;").replace("<","&lt;").replace(">","gt;").replace('"',"&quot;").replace("'","&#39;")}}var o={},s={};e.loadTemplates=t,e.getTemplate=n,e.create=r,e.defaultFunction=a,e.defaultHeaderCode="var value = arguments[0];"}("undefined"!=typeof module&&module.exports?exports:(this.jstl={},this.jstl)),function(e){var t=["var data = arguments[0], context = arguments[1];","function want(path) {","	var subData = data.subPath(path);","	return subData.defined() || !subData.readOnly();","};","function action(html, actionName) {","echo(context.actionHtml.apply(context, arguments));","};","function render(subData, label) {","	echo(context.renderHtml(subData, label));","};"].join("\n"),n=function(e){return"$"==e?function(e,t){return t.renderHtml(e)}:"/"==e.charAt(0)?function(t,n){return n.renderHtml(t.subPath(e))}:"="==e.charAt(0)?"window.escapeHtml("+e.substring(1)+")":function(t){var n=""+t.propertyValue(e);return n.replace("&","&amp;").replace("<","&lt;").replace(">","gt;").replace('"',"&quot;").replace("'","&#39;")}};e.extend({template:function(e){var r=jstl.getTemplate(e);if(null==r)throw new Exception("Could not locate template: "+e);return r.compile(n,t)},loadTemplates:function(){jstl.loadTemplates()}})}(Jsonary),function(e){function t(e){if(!(this instanceof t))return new t(e);var n=this;e=e||{},this.config=e;for(var r in t.defaults)e[r]||(e[r]="function"==typeof t.defaults[r]?t.defaults[r]:JSON.parse(JSON.stringify(t.defaults[r])));for(var i=0;i<e.columns.length;i++)e.columns[i],e.cellRenderHtml[r]=e.cellRenderHtml[r]||e.defaultCellRenderHtml,e.titleHtml[r]=e.titleHtml[r]||e.defaultTitleHtml;e.rowRenderHtml=this.wrapRowFunction(e,e.rowRenderHtml);for(var r in e.cellRenderHtml)e.cellRenderHtml[r]=this.wrapCellFunction(e,e.cellRenderHtml[r],r);for(var r in e.titleHtml)e.titleHtml[r]=this.wrapTitleFunction(e,e.titleHtml[r],r);e.filter&&(this.filter=function(t,n){return e.filter(t,n)}),this.addColumn=function(t,r,i){return e.columns.push(t),"function"==typeof r?e.titleHtml[t]=n.wrapTitleFunction(e,r,t):(void 0!=r&&(e.titles[t]=r),e.titleHtml[t]=n.wrapTitleFunction(e,e.defaultTitleHtml,t)),i=i||e.defaultCellRenderHtml,e.cellRenderHtml[t]=n.wrapCellFunction(e,i,t),this},this.component=e.component}function n(e){if(!(this instanceof n))return new n(e);e=e||{};for(var r in n.defaults)e[r]||(e[r]="function"==typeof n.defaults[r]?n.defaults[r]:JSON.parse(JSON.stringify(n.defaults[r])));for(var r in e.sort)"function"!=typeof e.sort[r]&&(e.sort[r]=e.defaultSort);t.call(this,e);var i=this.addColumn;this.addColumn=function(t,n,r,a){return a&&(e.sort[t]="function"==typeof a?a:e.defaultSort),i.call(this,t,n,r)},this.addConditionalColumn(function(e){return!e.readOnly()&&e.length()>e.schemas().minItems()},"remove","",function(e,t){var n='<td class="json-array-table-remove">',r=e.parent(),i=r.schemas().tupleTypingLength(),a=r.schemas().minItems(),o=parseInt(e.parentKey());return(o>=i||o==r.length()-1)&&r.length()>a&&(n+=t.actionHtml('<span class="json-array-table-delete">X</span>',"remove")),n+"</td>"}),e.cellAction.remove=function(e,t,n){return"remove"==n?(e.remove(),!1):void 0},this.addConditionalColumn(function(e){return!e.readOnly()&&e.length()>e.schemas().tupleTypingLength()+1},"move",function(e,t){return void 0!=t.uiState.moveRow?'<th style="padding: 0; text-align: center">'+t.actionHtml('<div class="json-array-table-move-cancel" style="float: left">cancel</div>',"move-cancel")+"</th>":"<th></th>"},function(e,t){var n='<td class="json-array-table-move">',r=t.parent.parent,i=e.parent(),a=i.schemas().tupleTypingLength(),o=parseInt(e.parentKey());
return o>=a&&(n+=void 0==r.uiState.moveRow?r.actionHtml('<div class="json-array-table-move-select">move</div>',"move-select",o):r.uiState.moveRow==o?r.actionHtml('<div class="json-array-table-move-cancel">cancel</div>',"move-cancel"):r.uiState.moveRow>o?r.actionHtml('<div class="json-array-table-move-to json-array-table-move-up">to here</div>',"move",r.uiState.moveRow,o):r.actionHtml('<div class="json-array-table-move-to json-array-table-move-down">to here</div>',"move",r.uiState.moveRow,o)),n+"</td>"})}t.prototype={wrapRowFunction:function(e,t){var n=this;return function(r,i){var a=n.rowContext(r,i);return t.call(e,r,a)}},wrapTitleFunction:function(e,t,n){return function(r,i){var a=i;return t.call(e,r,a,n)}},wrapCellFunction:function(e,t,n){var r=this;return function(i,a){var o=r.cellContext(i,a,n);return t.call(e,i,o,n)}},action:function(e){var t=this;if("col"!=e.label.substring(0,3)||e.cellData){if("row"==e.label.substring(0,3)&&!e.rowData){var n=e.parent;e.data.items(function(e,r){t.rowContext(r,n)})}}else{var r=e.label.substring(3),i=e.parent,n=i.parent;e.data.items(function(e,a){if(t.rowContext(a,n)==i){var o=""==r||"/"==r.charAt(0)?a.subPath(r):a;t.cellContext(o,i,r)}})}if(e.cellData){for(var r=e.columnPath,a=this.config.cellAction[r],o=[e.cellData];o.length<=arguments.length;)o.push(arguments[o.length-1]);return a.apply(this.config,o)}if(e.rowData){for(var s=this.config.rowAction,o=[e.rowData];o.length<=arguments.length;)o.push(arguments[o.length-1]);return s.apply(this.config,o)}for(var o=[e.data];o.length<=arguments.length;)o.push(arguments[o.length-1]);return this.config.action.apply(this.config,o)},rowContext:function(e,t){var n="row"+t.labelForData(e),r=t.subContext(n);return r.rowData=e,r},cellContext:function(e,t,n){var r=t.subContext("col"+n);return r.columnPath=n,r.cellData=e,r},renderHtml:function(e,t){return this.config.tableRenderHtml(e,t)},rowRenderHtml:function(e,t){var n=this.config;return n.rowRenderHtml(e,t)},enhance:function(e,t,n){return this.config.enhance?this.config.enhance(e,t,n):this.config.render?this.config.render(e,t,n):void 0},update:function(){return this.config.update?(this.config.defaultUpdate=this.config.defaultUpdate||this.defaultUpdate,this.config.update.apply(this,arguments)):this.defaultUpdate.apply(this,arguments)},register:function(t){return t&&(this.filter=t),e.render.register(this)}},t.defaults={columns:[],titles:{},titleHtml:{},defaultTitleHtml:function(t,n,r){return"<th>"+e.escapeHtml(void 0!=this.titles[r]?this.titles[r]:r)+"</th>"},cellRenderHtml:{},defaultCellRenderHtml:function(t,n,r){return'<td data-column="'+e.escapeHtml(r)+'">'+n.renderHtml(t,r)+"</td>"},cellAction:{},rowRenderHtml:function(e,t){for(var n="<tr>",r=0;r<this.columns.length;r++){var i=this.columns[r],a=""==i||"/"==i.charAt(0)?e.subPath(i):e;this.cellRenderHtml[i],n+=this.cellRenderHtml[i](a,t,i)}return n+="</tr>"},rowAction:function(e,t,n){throw new Error("Unknown row action: "+n)},tableRenderHtml:function(e,t){var n="";return n+='<table class="json-array-table">',n+=this.tableHeadRenderHtml(e,t),n+=this.tableBodyRenderHtml(e,t),n+="</table>"},tableHeadRenderHtml:function(e,t){for(var n="<thead><tr>",r=0;r<this.columns.length;r++){var i=this.columns[r];n+=this.titleHtml[i](e,t)}return n+"</tr></thead>"},rowOrder:function(e){for(var t=[],n=e.length;t.length<n;)t[t.length]=t.length;return t},tableBodyRenderHtml:function(e,t){this.config;for(var n="<tbody>",r=this.rowOrder(e,t),i=0;i<r.length;i++){var a=e.item(currentPage[i]);n+=this.rowRenderHtml(a,t)}return e.readOnly()||(null==e.schemas().maxItems()||e.schemas().maxItems()>e.length())&&(n+='<tr><td colspan="'+this.columns.length+'" class="json-array-table-add">',n+=t.actionHtml("+ add","add"),n+="</td></tr>"),n+"</tbody>"},action:function(e,t,n){if("add"==n){var r=e.length(),i=e.schemas().indexSchemas(r);return i.createValue(function(t){e.push(t)}),!1}}},n.prototype=Object.create(t.prototype),n.prototype.addConditionalColumn=function(t,n,r,i){var a="function"==typeof r?r:function(){return"<th>"+e.escapeHtml(r)+"</th>"};i||(i=function(e,t){return this.defaultCellRenderHtml(e,t)});var o=function(e,n){return t.call(this,e,n)?a.call(this,e,n):'<th style="display: none"></th>'},s=function(e,r){var a=r.parent.parent;return t.call(this,a.data,a)?i.call(this,e,r,n):'<td style="display: none"></td>'};this.addColumn(n,o,s)},n.prototype.addLinkColumn=function(e,t,n,r,i,a){var o="string"==typeof e&&"/"==e.charAt(0)?e:"";if("string"==typeof t){var s="link"+e+"$"+t;this.addColumn(s,n,function(e,n){if(!n.data.readOnly())return"<td></td>";var s="<td>";if(n.parent.uiState.linkRel){if(i){var l=e.subPath(o).links(n.parent.uiState.linkRel)[n.parent.uiState.linkIndex||0];if(l&&l.rel==t)if("string"==typeof a){var u="function"==typeof a?a.call(this,e,n,l):a;if(s+=n.parent.actionHtml(a,"link-confirm",n.parent.uiState.linkRel,n.parent.uiState.linkIndex,o||void 0),i){var u="function"==typeof i?i.call(this,e,n,l):i;s+=n.parent.actionHtml(u,"link-cancel")}}else if(a){var u="function"==typeof i?i.call(this,e,n,l):i;s+=n.parent.actionHtml(u,"link-confirm",n.parent.uiState.linkRel,n.parent.uiState.linkIndex,o||void 0)}else if(i){var u="function"==typeof i?i.call(this,e,n,l):i;s+=n.parent.actionHtml(u,"link-cancel")}}}else{var c=e.subPath(o).links(t)[0];if(c){var u="function"==typeof r?r.call(this,e,n,c):r;s+=n.parent.actionHtml(u,"link",t,0,o||void 0)}}return s+"</td>"})}else{var l=t;t=l.rel();var s="link"+e+"$"+t+"$";this.addColumn(s,n,function(e,n){var s="<td>";if(n.parent.uiState.linkRel){if(i){var u=e.subPath(o).links(n.parent.uiState.linkRel)[n.parent.uiState.linkIndex||0];if(u.definition==l)if("string"==typeof a){var c="function"==typeof a?a.call(this,e,n,u):a;if(s+=n.parent.actionHtml(a,"link-confirm",n.parent.uiState.linkRel,n.parent.uiState.linkIndex,o||void 0),i){var c="function"==typeof i?i.call(this,e,n,u):i;s+=n.parent.actionHtml(c,"link-cancel")}}else if(a){var c="function"==typeof a?a.call(this,e,n,u):a;s+=n.parent.actionHtml(c,"link-confirm",n.parent.uiState.linkRel,n.parent.uiState.linkIndex,o||void 0)}else if(i){var c="function"==typeof i?i.call(this,e,n,u):i;s+=n.parent.actionHtml(c,"link-cancel")}}}else for(var h=e.subPath(o).links(t),d=0;d<h.length;d++){var f=h[d];if(f.definition=l){var c="function"==typeof r?r.call(this,e,n,f):r;s+=n.parent.actionHtml(c,"link",t,0,o||void 0)}}return s+"</td>"})}return this},n.defaults={sort:{},defaultSort:function(e,t){return null==e?null==t?0:-1:null==t||e>t?1:t>e?-1:0},rowOrder:function(e,t){function n(e,t){var n=t.split("/")[0],a=t.substring(n.length),o="desc"==n?-1:1;i.push(function(e,t){var n=e.get(a),i=t.get(a),s="function"==typeof r.sort[a]?r.sort[a](n,i):r.defaultSort(n,i);return o*s})}var r=this,i=[];t.uiState.sort=t.uiState.sort||[];for(var a=0;a<t.uiState.sort.length;a++)n(a,t.uiState.sort[a]);for(var o=[],s=e.length();o.length<s;)o[o.length]=o.length;var l=-1;return o.sort(function(t,n){for(var r=0;r<i.length;r++){var a=i[r](e.item(t),e.item(n));if(0!=a)return l=Math.max(l,r),a}return l=i.length,t-n}),t.uiState.sort=t.uiState.sort.slice(0,l+1),o},rowsPerPage:null,pages:function(e){if(null==this.rowsPerPage)return[e];for(var t=[];e.length;)t.push(e.splice(0,this.rowsPerPage));return t},tableHeadRenderHtml:function(e,t){var n="<thead>",r=this.rowOrder(e,t),i=this.pages(r,e,t);if(i.length>1){var a=t.uiState.page||1;n+='<tr><th colspan="'+this.columns.length+'" class="json-array-table-pages">',a>1?(n+=t.actionHtml('<span class="button">&lt;&lt;</span>',"page",1),n+=t.actionHtml('<span class="button">&lt;</span>',"page",a-1)):(n+='<span class="button disabled">&lt;&lt;</span>',n+='<span class="button disabled">&lt;</span>'),n+='page <select name="'+t.inputNameForAction("page")+'">';for(var o=1;o<=i.length;o++)n+=o==a?'<option value="'+o+'" selected>'+o+"</option>":'<option value="'+o+'">'+o+"</option>";n+="</select>/"+i.length,a<i.length?(n+=t.actionHtml('<span class="button">&gt;</span>',"page",a+1),n+=t.actionHtml('<span class="button">&gt;&gt;</span>',"page",i.length)):(n+='<span class="button disabled">&gt;</span>',n+='<span class="button disabled">&gt;&gt;</span>'),n+="</tr>"}n+="<tr>";for(var o=0;o<this.columns.length;o++){var s=this.columns[o];n+=this.titleHtml[s](e,t)}return n+="</tr>",n+"</thead>"},tableBodyRenderHtml:function(e,t){this.config;var n="<tbody>",r=this.rowOrder(e,t),i=this.pages(r,e,t);i.length||(i=[[]]);var a=t.uiState.page||1,o=i[a-1];o||(o=i[0]||[],t.uiState.page=0);for(var s=0;s<o.length;s++){var l=e.item(o[s]);n+=this.rowRenderHtml(l,t)}return a!=i.length||e.readOnly()||(null==e.schemas().maxItems()||e.schemas().maxItems()>e.length())&&(n+='<tr><td colspan="'+this.columns.length+'" class="json-array-table-add">',n+=t.actionHtml("+ add","add"),n+="</td></tr>"),n+"</tbody>"},action:function(e,n,r,i,a){if("sort"==r){delete n.uiState.page;var o=i;return n.uiState.sort=n.uiState.sort||[],n.uiState.sort[0]=="asc"+o?n.uiState.sort[0]="desc"+i:(-1!=n.uiState.sort.indexOf("desc"+o)?n.uiState.sort.splice(n.uiState.sort.indexOf("desc"+o),1):-1!=n.uiState.sort.indexOf("asc"+o)&&n.uiState.sort.splice(n.uiState.sort.indexOf("asc"+o),1),n.uiState.sort.unshift("asc"+i)),!0}if("page"==r)return n.uiState.page=parseInt(i),!0;if("move-select"==r){var s=i;return n.uiState.moveRow=s,!0}if("move-cancel"==r)return delete n.uiState.moveRow,!0;if("move"==r){var l=i,u=a;return delete n.uiState.moveRow,e.item(l).moveTo(e.item(u)),!1}return t.defaults.action.apply(this,arguments)},defaultTitleHtml:function(n,r,i){if(n.readOnly()&&"/"==i.charAt(0)&&this.sort[i]){var a="<th>";return r.uiState.sort=r.uiState.sort||[],r.uiState.sort[0]=="asc"+i?(a+='<div class="json-array-table-sort-asc">',a+=r.actionHtml(e.escapeHtml(this.titles[i]),"sort",i),a+='<span class="json-array-table-sort-text">up</span>',a+="</div>"):r.uiState.sort[0]=="desc"+i?(a+='<div class="json-array-table-sort-desc">',a+=r.actionHtml(e.escapeHtml(this.titles[i]),"sort",i),a+='<span class="json-array-table-sort-text">down</span>',a+="</div>"):(a+='<div class="json-array-table-sort">',a+=r.actionHtml(e.escapeHtml(this.titles[i]),"sort",i),a+="</div>"),a+"</th>"}return t.defaults.defaultTitleHtml.call(this,n,r,i)},rowExpandRenderHtml:function(e,t,n){return result='<td class="json-array-table-full" colspan="'+this.columns.length+'">',result+=n===!0?t.renderHtml(e,"expand"):t.renderHtml(n,"expand"),result+"</td>"},rowRenderHtml:function(n,r){var i="";if(r.uiState.expand)i+=t.defaults.rowRenderHtml.call(this,n,r),i+=this.rowExpandRenderHtml(n,r,r.uiState.expand);else if(r.uiState.linkRel){var a=n.subPath(r.uiState.linkPath||"").links(r.uiState.linkRel)[r.uiState.linkIndex||0];r.uiState.linkData?"edit"==a.rel&&0==a.submissionSchemas.length?i+=t.defaults.rowRenderHtml.call(this,r.uiState.linkData,r):(i+=t.defaults.rowRenderHtml.call(this,n,r),i+='<td class="json-array-table-full" colspan="'+this.columns.length+'">',i+='<div class="json-array-table-full-title">'+e.escapeHtml(a.title||a.rel)+"</div>",i+='<div class="json-array-table-full-buttons">',i+=r.actionHtml('<span class="button action">confirm</span>',"link-confirm",r.uiState.linkRel,r.uiState.linkIndex,r.uiState.linkPath),i+=r.actionHtml(' <span class="button action">cancel</span>',"link-cancel"),i+="</div>",i+=r.renderHtml(r.uiState.linkData,"linkData"),i+="</td>"):(i+=t.defaults.rowRenderHtml.call(this,n,r),i+='<td class="json-array-table-full" colspan="'+this.columns.length+'">',i+='<div class="json-array-table-full-title">'+e.escapeHtml(a.title||a.rel)+"</div>",i+='<div class="json-array-table-full-buttons">',i+=r.actionHtml('<span class="button action">confirm</span>',"link-confirm",r.uiState.linkRel,r.uiState.linkIndex,r.uiState.linkPath),i+=r.actionHtml(' <span class="button action">cancel</span>',"link-cancel"),i+="</div>",i+="</td>")}else i+=t.defaults.rowRenderHtml.call(this,n,r);return i},rowAction:function(n,r,i,a,o,s){if(thisConfig=this,delete r.parent.uiState.moveRow,"expand"==i)return r.uiState.expand&&!a?delete r.uiState.expand:r.uiState.expand=a||!0,!0;if("link"==i){var l=a,u=o,c=s||"",h=n.subPath(c).links(l)[u||0];if(h.submissionSchemas.length){r.uiState.linkRel=l,r.uiState.linkIndex=u;var d=e.create();d.addSchema(h.submissionSchemas),r.uiState.linkData=d,c?r.uiState.linkPath=c:delete r.uiState.linkPath,h.submissionSchemas.createValue(function(e){d.setValue(e)}),delete r.uiState.expand}else if("edit"==h.rel)r.uiState.linkRel=l,r.uiState.linkIndex=u,c?r.uiState.linkPath=c:delete r.uiState.linkPath,r.uiState.linkData=n.subPath(c).editableCopy(),delete r.uiState.expand;else if("GET"!=h.method)r.uiState.linkRel=l,r.uiState.linkIndex=u,c?r.uiState.linkPath=c:delete r.uiState.linkPath,delete r.uiState.linkData,delete r.uiState.expand;else{var f="self"==h.rel?!0:h.href;r.uiState.expand==f?delete r.uiState.expand:r.uiState.expand=f}return!0}if("link-confirm"==i){var l=a,u=o,c=s||"",h=n.subPath(c).links(l)[u||0];return h&&h.follow(r.uiState.linkData,function(e,t,i){return thisConfig.linkHandler(n,r,e,t,i)}),delete r.uiState.linkRel,delete r.uiState.linkIndex,delete r.uiState.linkPath,delete r.uiState.linkData,delete r.uiState.expand,!0}return"link-cancel"==i?(delete r.uiState.linkRel,delete r.uiState.linkIndex,delete r.uiState.linkPath,delete r.uiState.linkData,delete r.uiState.expand,!0):t.defaults.rowAction.apply(this,arguments)},update:function(e,t,n,r){return void 0!=n.uiState.moveRow?(delete n.uiState.moveRow,!0):this.defaultUpdate(e,t,n,r)},linkHandler:function(){}},e.plugins=e.plugins||{},e.plugins.TableRenderer=t,e.plugins.FancyTableRenderer=n}(Jsonary),function(e){e.plugins.Generator=function(e){if(!e.rendererForData)throw"Generator must have method rendererForData";return e.renderHtml=function(t,n){return n.generatedRenderer=n.generatedRenderer||e.rendererForData(t),n.generatedRenderer.renderHtml(t,n)},e.enhance=function(t,n,r){return r.generatedRenderer=r.generatedRenderer||e.rendererForData(n),r.generatedRenderer.enhance?r.generatedRenderer.enhance(t,n,r):r.generatedRenderer.render?r.generatedRenderer.render(t,n,r):void 0},e.action=function(t){return t.generatedRenderer=t.generatedRenderer||e.rendererForData(t.data),t.generatedRenderer.action.apply(t.generatedRenderer,arguments)},e.update=function(t,n,r){return r.generatedRenderer=r.generatedRenderer||e.rendererForData(r.data),r.generatedRenderer.defaultUpdate=this.defaultUpdate,r.generatedRenderer.update?r.generatedRenderer.update.apply(r.generatedRenderer,arguments):this.defaultUpdate.apply(this,arguments)},e}}(Jsonary),function(e){e.render.Components.add("LIST_LINKS"),e.render.register({name:"Jsonary list links with prompt",component:e.render.Components.LIST_LINKS,update:function(){return!1},renderHtml:function(t,n){if(!t.readOnly())return n.renderHtml(t);var r="";if(n.uiState.editInPlace){var i='<span class="button action">save</span>';r+=n.actionHtml(i,"submit");var i='<span class="button action">cancel</span>';return r+=n.actionHtml(i,"cancel"),r+=n.renderHtml(n.uiState.submissionData,"~linkData")}var a=t.links();if(a.length){r+='<span class="link-list">';for(var o=0;o<a.length;o++){var s=a[o];if("self"!=s.rel){var i='<span class="button link">'+e.escapeHtml(s.title||s.rel)+"</span>";r+=n.actionHtml(i,"follow-link",o)}}r+="</span>"}if(void 0!=n.uiState.submitLink){var s=t.links()[n.uiState.submitLink];r+='<div class="prompt-outer"><div class="prompt-inner">',r+=n.actionHtml('<div class="prompt-overlay"></div>',"cancel"),r+='<div class="prompt-box"><h1>'+e.escapeHtml(s.title||s.rel)+"</h1><h2>"+e.escapeHtml(s.method)+" "+e.escapeHtml(s.href)+"</h2>",r+="<div>"+n.renderHtml(n.uiState.submissionData,"~linkData")+"</div>",r+="</div>",r+='<div class="prompt-buttons">',r+=n.actionHtml('<span class="button">Submit</span>',"submit"),r+=n.actionHtml('<span class="button">cancel</span>',"cancel"),r+="</div>",r+="</div></div>"}return r+=n.renderHtml(t,"data")},action:function(t,n,r){if("follow-link"==n){var i=t.data.links()[r];return"GET"==i.method&&0==i.submissionSchemas.length?(i.follow(),!1):(t.uiState.submitLink=r,"PUT"==i.method&&0==i.submissionSchemas.length?(t.uiState.editing=t.data.editableCopy(),t.uiState.submissionData=t.data.editableCopy()):(t.uiState.submissionData=e.create().addSchema(i.submissionSchemas),i.submissionSchemas.createValue(function(e){t.uiState.submissionData.setValue(e)})),"PUT"==i.method&&(t.uiState.editInPlace=!0),!0)}if("submit"==n){var i=t.data.links()[t.uiState.submitLink];return i.follow(t.uiState.submissionData),delete t.uiState.submitLink,delete t.uiState.editInPlace,delete t.uiState.submissionData,!0}return delete t.uiState.submitLink,delete t.uiState.editInPlace,delete t.uiState.submissionData,!0},filter:function(){return!0},saveState:function(e,t){var n={};for(var r in t.data)n[r]=t.data[r];if(void 0!=n.link||void 0!=n.inPlace||void 0!=n.linkData||void 0!=n[""]){var i={"":"-"};for(var r in n)i["-"+r]=n[r];n=i}if(void 0!==e.submitLink){var a=[e.submitLink];a.push(e.editInPlace?1:0),a.push(this.saveStateData(e.submissionData)),n.link=a.join("-")}return n},loadState:function(e){var t={};if(void 0!=e.link){var n=e.link.split("-");t.submitLink=parseInt(n.shift())||0,parseInt(n.shift())&&(t.editInPlace=!0),t.submissionData=this.loadStateData(n.join("-")),delete e.link,t.submissionData||(t={})}if(void 0!=e[""]){delete e[""];var r={};for(var i in e)r[i.substring(1)]=e[i];e=r}return[t,{data:e}]}})}(Jsonary),function(e){function t(e,t){var n=getComputedStyle(e,null);for(var r in n)("font"==r.substring(0,4)||"text"==r.substring(0,4))&&(t.style[r]=n[r])}function n(e,t,n){t.innerHTML="",t.appendChild(document.createTextNode(e.value+n));var r=getComputedStyle(t,null);e.style.width=parseInt(r.width.substring(0,r.width.length-2))+4+"px",e.style.height=parseInt(r.height.substring(0,r.height.length-2))+4+"px"}function r(e){for(var t="",n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1==i.nodeType){var a=i.tagName.toLowerCase();if("br"==a){t+="\n";continue}"li"==i.tagName&&(t+="\n*	"),("p"==a||/^h[0-6]$/.test(a)||"header"==a||"aside"==a||"blockquote"==a||"footer"==a||"div"==a||"table"==a||"hr"==a)&&""!=t&&(t+="\n"),("td"==a||"th"==a)&&(t+="	"),t+=r(i),"tr"==a&&(t+="\n")}else 3==i.nodeType&&(t+=i.nodeValue)}return t=t.replace("\r\n","\n"),t=t.replace(/\n$/,"")}var i=Jsonary.escapeHtml;void 0==e.escapeHtml&&(e.escapeHtml=i),Jsonary.render.register({name:"Jsonary plain add/remove",component:Jsonary.render.Components.ADD_REMOVE,renderHtml:function(e,t){if(!e.defined()){t.uiState.undefined=!0;var n="add",r=e.parent();if(r&&"array"==r.basicType()){var i=r.schemas().indexSchemas(e.parentKey());i.getFull(function(e){i=e}),n=i.title()||n}else if(r&&"object"==r.basicType()){var i=r.schemas().propertySchemas(e.parentKey());i.getFull(function(e){i=e}),n=i.title()||e.parentKey()||n}return t.actionHtml('<span class="json-undefined-create">+ '+Jsonary.escapeHtml(n)+"</span>","create")}delete t.uiState.undefined;var a=!1;if(null!=e.parent()){var r=e.parent();if("object"==r.basicType()){var o=r.schemas().requiredProperties(),s=r.schemas().minProperties();a=-1==o.indexOf(e.parentKey())&&r.keys().length>s}else if("array"==r.basicType()){var l=r.schemas().tupleTypingLength(),u=r.schemas().minItems(),c=parseInt(e.parentKey());(c>=l||c==r.length()-1)&&r.length()>u&&(a=!0)}}var h="";if(a){var d=r.basicType();h+="<div class='json-"+d+"-delete-container'>",h+=t.actionHtml("<span class='json-"+d+"-delete'>X</span>","remove")+" ",h+=t.renderHtml(e,"data"),h+="</div>"}else h+=t.renderHtml(e,"data");return h},action:function(e,t){if("create"==t){var n=e.data,r=n.parent(),i=n.parentKey();if(void 0!=r){var a=r.schemas();"array"==r.basicType()?a.createValueForIndex(i,function(e){r.index(i).setValue(e)}):("object"!=r.basicType()&&r.setValue({}),a.createValueForProperty(i,function(e){r.property(i).setValue(e)}))}else n.schemas().createValue(function(e){n.setValue(e)})}else"remove"==t?e.data.remove():alert("Unkown action: "+t)},update:function(e,t,n){return t.defined()==!!n.uiState.undefined},filter:function(e){return!e.readOnly()},saveState:function(e,t){return t.data||{}},loadState:function(e){return[{},{data:e}]}}),Jsonary.render.register({name:"Jsonary plain type-selector",component:Jsonary.render.Components.TYPE_SELECTOR,renderHtml:function(e,t){var n="",r=e.schemas().enumValues(),i=e.schemas().basicTypes();if(i.length>1&&null==r){n+='<select name="'+t.inputNameForAction("select-basic-type")+'">';for(var a=0;a<i.length;a++)if("integer"!=i[a]||-1==i.indexOf("number")){var o=Jsonary.escapeHtml(i[a]);n+=i[a]==e.basicType()||"number"==i[a]&&"integer"==e.basicType()?'<option value="'+o+'" selected>'+o+"</option>":'<option value="'+o+'">'+o+"</option>"}n+="</select> "}return n+=t.renderHtml(e,"data")},action:function(e,t,n){if("select-basic-type"==t){e.uiState.dialogOpen=!1;var r=e.data.schemas().concat([Jsonary.createSchema({type:n})]);return r.createValue(function(t){e.data.setValue(t)}),!0}alert("Unkown action: "+t)},update:function(){return!1},filter:function(e){return!e.readOnly()},saveState:function(e,t){var n={};if(e.dialogOpen&&(n.dialogOpen=!0),!t.data||void 0==t.data._&&void 0==t.data.dialogOpen)for(var r in t.data)n[r]=t.data[r];else n._=t.data;return n},loadState:function(e){var t=e,n={};if(void 0!=e._){var n=e._;delete e._}else{var t={};e.dialogOpen&&(t.dialogOpen=!0),delete e.dialogOpen,n=e}return[t,{data:n}]}}),Jsonary.render.Components.add("SCHEMA_SWITCHER",Jsonary.render.Components.TYPE_SELECTOR),Jsonary.render.register({name:"Jsonary plain schema-switcher",component:Jsonary.render.Components.SCHEMA_SWITCHER,renderHtml:function(e,t){var n,r="",i=e.schemas().fixed(),a=!1,o=i.orSchemas();if(0==o.length&&(n=i.xorSchemas(),1==n.length&&(a=!0)),t.uiState.xorSelected=[],t.uiState.orSelected=[],a)for(var s=0;s<n.length;s++){var l=n[s],u=t.inputNameForAction("selectXorSchema",s);r+='<select name="'+u+'">';for(var c=0;c<l.length;c++){var h=l[c];h.getFull(function(e){h=e});var d="";-1!=e.schemas().indexOf(h)&&(t.uiState.xorSelected[s]=c,d=" selected"),r+='<option value="'+c+'"'+d+">"+h.forceTitle()+"</option>"}r+="</select>"}if(t.uiState.dialogOpen){r+='<div class="json-select-type-dialog-outer"><span class="json-select-type-dialog">',r+=t.actionHtml("close","closeDialog"),n=n||i.xorSchemas();for(var s=0;s<n.length;s++){var l=n[s],u=t.inputNameForAction("selectXorSchema",s);r+='<br><select name="'+u+'">';for(var c=0;c<l.length;c++){var h=l[c];h.getFull(function(e){h=e});var d="";-1!=e.schemas().indexOf(h)&&(t.uiState.xorSelected[s]=c,d=" selected"),r+='<option value="'+c+'"'+d+">"+h.title()+"</option>"}r+="</select>"}for(var s=0;s<o.length;s++){var l=o[s],u=t.inputNameForAction("selectOrSchema",s);r+='<br><select name="'+u+'" multiple size="'+l.length+'">',t.uiState.orSelected[s]=[];for(var c=0;c<l.length;c++){var h=l[c];h.getFull(function(e){h=e});var d="";-1!=e.schemas().indexOf(h)?(t.uiState.orSelected[s][c]=!0,d=" selected"):t.uiState.orSelected[s][c]=!1,r+='<option value="'+c+'"'+d+">"+h.title()+"</option>"}r+="</select>"}r+="</span></div>"}return!a&&i.length<e.schemas().length&&(r+=t.actionHtml('<span class="json-select-type button">Schemas</span>',"openDialog")+" "),r+=t.renderHtml(e,"data")},createValue:function(e){for(var t=e.data,n=e.data.schemas().fixed(),r=e.data.schemas().fixed().xorSchemas(),i=0;i<r.length;i++)n=n.concat([r[i][e.uiState.xorSelected[i]].getFull()]);for(var a=e.data.schemas().fixed().orSchemas(),i=0;i<a.length;i++)for(var o=a[i],s=0;s<o.length;s++)e.uiState.orSelected[i][s]&&(n=n.concat([o[s].getFull()]));n=n.getFull(),t.setValue(n.createValue()),n.createValue(function(e){t.setValue(e)})},action:function(e,t,n,r){if("closeDialog"==t)return e.uiState.dialogOpen=!1,!0;if("openDialog"==t)return e.uiState.dialogOpen=!0,!0;if("selectXorSchema"==t)return e.uiState.xorSelected[r]=n,this.createValue(e),!0;if("selectOrSchema"==t){e.uiState.orSelected[r]=[];for(var i=0;i<n.length;i++)e.uiState.orSelected[r][n[i]]=!0;return this.createValue(e),!0}alert("Unkown action: "+t)},update:function(){return!1},filter:function(e){return!e.readOnly()},saveState:function(e,t){var n={};if(e.dialogOpen&&(n.dialogOpen=!0),void 0!=t.data._||void 0!=t.data.dialogOpen)n._=t.data;else for(var r in t.data)n[r]=t.data[r];return n},loadState:function(e){var t=e,n={};if(void 0!=e._){var n=e._;delete e._}else{var t={};e.dialogOpen&&(t.dialogOpen=!0),delete e.dialogOpen,n=e}return[t,{data:n}]}}),Jsonary.render.register({name:"Jsonary plain raw JSON display",renderHtml:function(e){return e.defined()?'<span class="json-raw">'+i(JSON.stringify(e.value()))+"</span>":""},filter:function(){return!0}}),Jsonary.render.register({name:"Jsonary plain null",renderHtml:function(){return'<span class="json-null">null</span>'},filter:function(e){return"null"==e.basicType()}}),Jsonary.render.register({name:"Jsonary plain objects",renderHtml:function(e,t){t.uiState;var n="";n+='<fieldset class="json-object-outer">';var r=e.schemas().title();r&&(n+='<legend class="json-object-title">'+Jsonary.escapeHtml(r)+"</legend>"),n+='<table class="json-object"><tbody>';var a=function(e,r){if(r.defined())var a=r.schemas().fixed().title();else{var o=r.parent().schemas().propertySchemas(r.parentKey());if(o.readOnly())return;var a=o.title()}n+='<tr class="json-object-pair">',n+=""==a?'<td class="json-object-key"><div class="json-object-key-title">'+i(e)+"</div></td>":'<td class="json-object-key"><div class="json-object-key-title">'+i(e)+'</div><div class="json-object-key-text">'+i(a)+"</div></td>",n+='<td class="json-object-value">'+t.renderHtml(r)+"</td>",n+="</tr>"};if(e.readOnly()){var o=e.schemas().knownProperties();e.properties(o,function(e,t){t.defined()&&a(e,t)},!0)}else{var s=e.schemas(),o=s.knownProperties(),l=o.length-s.requiredProperties().length>5,u=s.maxProperties(),c=null==u||u>s.keys().length;if(e.properties(o,function(e,t){(!l&&c||t.defined())&&a(e,t)},a),c&&(s.allowedAdditionalProperties()||l))if(t.uiState.addInput){if(n+='<tr class="json-object-pair"><td class="json-object-key"><div class="json-object-key-text">',n+=t.actionHtml('<span class="button">add</span>',"add-confirm"),n+="<br>",n+="</div></td><td>",l){var h=[];e.properties(o,function(e,t){t.defined()||h.push(e)}),n+='<select name="'+t.inputNameForAction("select-preset")+'">',s.allowedAdditionalProperties()&&(n+='<option value="custom">Enter your own:</option>'),n+='<optgroup label="Known properties">',h.sort();for(var d=0;d<h.length;d++){var f=h[d];n+=f==t.uiState.addInputSelect?'<option value="key-'+Jsonary.escapeHtml(f)+'" selected>'+Jsonary.escapeHtml(f)+"</option>":'<option value="key-'+Jsonary.escapeHtml(f)+'">'+Jsonary.escapeHtml(f)+"</option>"}n+="</optgroup></select>"}!s.allowedAdditionalProperties()||l&&null!=t.uiState.addInputSelect?n+=t.actionHtml('<span class="button">cancel</span>',"add-cancel"):(n+='<input type="text" class="json-object-add-input" name="'+t.inputNameForAction("add-input")+'" value="'+Jsonary.escapeHtml(t.uiState.addInputValue)+'"></input>',n+=t.actionHtml('<span class="button">cancel</span>',"add-cancel"),e.property(t.uiState.addInputValue).defined()&&(n+='<span class="warning"><code>'+Jsonary.escapeHtml(t.uiState.addInputValue)+"</code> already exists</span>")),n+="</td></tr>"}else n+='<tr class="json-object-pair"><td class="json-object-key"><div class="json-object-key-text">',n+=t.actionHtml('<span class="button">add</span>',"add-input"),n+="</div></td><td></td></tr>"}return n+="</table>",n+="</fieldset>"},action:function(e,t,n){var r=e.data;if("select-preset"==t){if("custom"==n)delete e.uiState.addInputSelect;else{var i=n;e.uiState.addInputSelect=i.substring(4)}return!0}if("add-input"==t)return e.uiState.addInput=!0,e.uiState.addInputValue=void 0==n?"key":n,!0;if("add-cancel"==t)return delete e.uiState.addInput,delete e.uiState.addInputValue,delete e.uiState.addInputSelect,!0;if("add-confirm"==t){var i=null!=e.uiState.addInputSelect?e.uiState.addInputSelect:e.uiState.addInputValue;null==i||r.property(i).defined()||(delete e.uiState.addInput,delete e.uiState.addInputValue,delete e.uiState.addInputSelect,r.schemas().createValueForProperty(i,function(e){r.property(i).setValue(e)}))}},filter:function(e){return"object"==e.basicType()}}),Jsonary.render.register({name:"Jsonary plain arrays",renderHtml:function(e,t){e.schemas().tupleTypingLength();var n=e.schemas().maxItems(),r="";if(e.indices(function(e,n){r+='<div class="json-array-item">',r+='<span class="json-array-value">'+t.renderHtml(n)+"</span>",r+="</div>"}),!e.readOnly()&&(null==n||e.length()<n)){var i='<span class="json-array-add">+ add</span>';r+=t.actionHtml(i,"add")}return r},action:function(e,t){var n=e.data;if("add"==t){var r=n.length();n.schemas().createValueForIndex(r,function(e){n.index(r).setValue(e)})}},filter:function(e){return"array"==e.basicType()}}),Jsonary.render.register({name:"Jsonary plain display string",renderHtml:function(e){return'<span class="json-string">'+i(e.value())+"</span>"},filter:function(e){return"string"==e.basicType()&&e.readOnly()}}),Jsonary.render.register({name:"Jsonary plain edit string",renderHtml:function(e,t){e.schemas().maxLength();var n=t.inputNameForAction("new-value"),r=i(e.value()).replace('"',"&quot;"),a="";return a+="width: 90%",'<textarea class="json-string" name="'+n+'" style="'+a+'">'+r+"</textarea>"},action:function(e,t,n){"new-value"==t&&e.data.setValue(n)},render:function(e,a){function o(e){c.innerHTML=e.length<l?"Too short (minimum "+l+" characters)":null!=u&&e.length>u?"Too long (+"+(e.length-u)+" characters)":null!=u?u-e.length+" characters left":""}if(null!==e.contentEditable){e.innerHTML='<div class="json-string json-string-content-editable">'+i(a.value()).replace(/\n/g,"<br>")+"</div>";var s=e.childNodes[0];return s.contentEditable="true",s.onblur=function(){var e=r(s);a.setValue(e)},void 0}if("function"==typeof window.getComputedStyle){var l=a.schemas().minLength(),u=a.schemas().maxLength(),c=document.createElement("span");c.className="json-string-notice";for(var h=document.createElement("div"),d=null,f=0;f<e.childNodes.length;f++)if(1==e.childNodes[f].nodeType){d=e.childNodes[f];break}e.insertBefore(h,d),t(d,h),h.style.display="inline",h.style.position="absolute",h.style.width="auto",h.style.height="auto",h.style.left="-100000px",h.style.top="0px",h.style.whiteSpace="pre",h.style.zIndex=-1e4;var p="MMMMM";n(d,h,p),d.value=a.value(),d.onkeyup=function(){o(this.value),n(this,h,p)},d.onfocus=function(){o(a.value()),p="MMMMM\nMMM",n(this,h,p)},d.onblur=function(){a.setValue(this.value),c.innerHTML="",p="MMMMM",n(this,h,p)},e.appendChild(c),d=null,e=null}},update:function(e,t,n,r){if(null!==e.contentEditable){var a=e.childNodes[0];return a.innerHTML=i(t.value()).replace(/\n/g,"<br>"),!1}if("replace"==r.action()){for(var o=null,s=0;s<e.childNodes.length;s++)if("textarea"==e.childNodes[s].tagName.toLowerCase()){o=e.childNodes[s];break}return o.value=t.value(),o.onkeyup(),!1}return!0},filter:function(e){return"string"==e.basicType()&&!e.readOnly()}}),Jsonary.render.register({name:"Jsonary plain booleans",renderHtml:function(e,t){if(e.readOnly())return e.value()?'<span class="json-boolean-true">yes</span>':'<span class="json-boolean-false">no</span>';var n=t.inputNameForAction("switch");return'<input type="checkbox" class="json-boolean" name="'+n+'" value="1" '+(e.value()?"checked":"")+"></input>"},action:function(e,t,n){"switch"==t&&e.data.setValue(!!n)},filter:function(e){return"boolean"==e.basicType()}}),Jsonary.render.register({name:"Jsonary plain edit number",renderHtml:function(e,t){var n="";if(e.value().toString().length>3){var r=e.value().toString().length;n='style="width: '+r+'em;"'}var i='<input class="json-number-input" type="text" value="'+e.value()+'" name="'+t.inputNameForAction("input")+'" '+n+"></input>",a=e.schemas().numberInterval();if(void 0!=a){var o=e.schemas().minimum();i=null==o||e.value()>o+a||e.value()==o+a&&!e.schemas().exclusiveMinimum()?t.actionHtml('<span class="json-number-decrement button">-</span>',"decrement")+i:'<span class="json-number-decrement button disabled" onmousedown="event.preventDefault();">-</span>'+i;
var s=e.schemas().maximum();i+=null==s||e.value()<s-a||e.value()==s-a&&!e.schemas().exclusiveMaximum()?t.actionHtml('<span class="json-number-increment button">+</span>',"increment"):'<span class="json-number-increment button disabled" onmousedown="event.preventDefault;">+</span>'}return'<span class="json-number">'+i+"</span>"},action:function(e,t,n){var r=e.data,i=r.schemas().numberInterval();if("increment"==t){var a=r.value()+i,o=!0,s=r.schemas().maximum();void 0!=s&&(a>s||a==s&&r.schemas().exclusiveMaximum())&&(o=!1),o&&r.setValue(a)}else if("decrement"==t){var a=r.value()-i,o=!0,l=r.schemas().minimum();void 0!=l&&(l>a||a==l&&r.schemas().exclusiveMinimum())&&(o=!1),o&&r.setValue(a)}else if("input"==t){var u=n,a=parseFloat(u);if(!isNaN(a)){void 0!=i&&(a=Math.round(a/i)*i);var o=!0,l=r.schemas().minimum();void 0!=l&&(l>a||a==l&&r.schemas().exclusiveMinimum())&&(o=!1);var s=r.schemas().maximum();void 0!=s&&(a>s||a==s&&r.schemas().exclusiveMaximum())&&(o=!1),o||(a=r.schemas().createValueNumber()),r.setValue(a)}}},filter:function(e){return("number"==e.basicType()||"integer"==e.basicType())&&!e.readOnly()}}),Jsonary.render.register({name:"Jsonary plain enums",render:function(e,t){var n=t.schemas().enumValues();if(0==n.length)return e.innerHTML='<span class="json-enum-invalid">invalid</span>',void 0;if(1!=n.length){for(var r=document.createElement("select"),a=0;a<n.length;a++){var o=document.createElement("option");o.setAttribute("value",a),t.equals(Jsonary.create(n[a]))&&(o.selected=!0),o.appendChild(document.createTextNode(n[a])),r.appendChild(o)}r.onchange=function(){var e=this.value;t.setValue(n[e])},e.appendChild(r),e=r=o=null}else if("string"==typeof n[0])e.innerHTML='<span class="json-string">'+i(n[0])+"</span>";else if("number"==typeof n[0])e.innerHTML='<span class="json-number">'+n[0]+"</span>";else if("boolean"==typeof n[0]){var s=n[0]?"true":"false";e.innerHTML='<span class="json-boolean-'+s+'">'+s+"</span>"}else e.innerHTML='<span class="json-raw">'+i(JSON.stringify(n[0]))+"</span>"},filter:function(e){return!e.readOnly()&&null!=e.schemas().enumValues()}})}(this),function(){Jsonary.render.register({renderHtml:function(e){var t=new Date(e.value());return isNaN(t.getTime())?'<span class="json-string json-string-date">'+Jsonary.escapeHtml(e.value())+"</span>":'<span class="json-string json-string-date">'+t.toLocaleString()+"</span>"},filter:function(e,t){return"string"==e.basicType()&&e.readOnly()&&-1!=t.formats().indexOf("date-time")}}),Jsonary.render.register({renderHtml:function(e,t){if(e.readOnly())return t.uiState.showPassword?Jsonary.escapeHtml(e.value()):t.actionHtml("(show password)","show-password");var n=t.inputNameForAction("update");return'<input type="password" name="'+n+'" value="'+Jsonary.escapeHtml(e.value())+'"></input>'},action:function(e,t,n){return"show-password"==t?(e.uiState.showPassword=!0,!0):("update"==t&&e.data.setValue(n),void 0)},filter:function(e,t){return"string"==e.basicType()&&-1!=t.formats().indexOf("password")}})}(),Jsonary.render.register({component:[Jsonary.render.Components.LIST_LINKS],renderHtml:function(e,t){var n=e.getLink("full-preview"),r=t.renderHtml(n.follow(null,!1));return t.actionHtml(r,"full")},action:function(e,t){var n=e.data;if("full"==t){var r=n.getLink("full");r.follow()}},filter:function(e){return e.readOnly()&&e.getLink("full")&&e.getLink("full-preview")}}),Jsonary.render.register({component:[Jsonary.render.Components.LIST_LINKS],renderHtml:function(e,t){var n=e.getLink("full-preview");return t.renderHtml(e)+" - "+t.renderHtml(n.follow(null,!1))},filter:function(e){return!e.readOnly()&&e.getLink("full")&&e.getLink("full-preview")}}),function(e){e.render.register({component:[e.render.Components.RENDERER,e.render.Components.LIST_LINKS],renderHtml:function(t,n){var r='<select name="'+n.inputNameForAction("select-url")+'">',i={},a=[],o={},s={},l=t.links("instances"),u=t.getLink("full"),c="",h=t.getLink("full-preview");if(h&&e.Uri.resolve(h.href,"#")==e.Uri.resolve(u.href,"#"))var d=u.href.split("#").slice(1).join("#"),f=h.href.split("#").slice(1).join("#"),c=decodeURIComponent(f.substring(d.length));for(var p=!1,m=0;m<l.length;m++){var v=l[m];v.follow(null,!1).getData(function(e){e.items(function(e,t){var n=t.getLink("self")?t.getLink("self").href:t.referenceUrl();if(!i[n]){i[n]=t;var r=u.valueForUrl(n);void 0!==r&&(a.push(n),o[n]=r,s[n]=t.subPath(c))}}),p&&(n.rerender(),p=!1)})}p=!0;for(var g="",A=!1,m=0;m<a.length;m++){var y=a[m],b="";t.equals(e.create(o[y]))&&(A=!0,b=" selected"),g+='<option value="'+e.escapeHtml(y)+'"'+b+">"+n.renderHtml(s[y])+"</option>"}return A||(g="<option selected>"+n.renderHtml(h.follow(null,!1),"current")+"</option>"+g),r+=g,r+"</select>"},action:function(e,t,n){var r=e.data;if("select-url"==t){var i=n,a=r.getLink("full"),o=a.valueForUrl(i);r.setValue(o)}},filter:function(e){return!e.readOnly()&&e.getLink("instances")&&e.getLink("full")}})}(Jsonary),Jsonary.render.register(Jsonary.plugins.Generator({rendererForData:function(e){function t(r,o,s){r=r.getFull(),o=o||"";var l=r.basicTypes();if(1!=l.length||"object"!=l[0]||0>=s){var u=o;a[u]||(a[u]=!0,i.addColumn(u,r.title()||u,function(e,t){return"object"==e.basicType()&&s>0?"<td></td>":this.defaultCellRenderHtml(e,t,u)}),i.config.sort[u]=!0)}if(-1!=l.indexOf("object")&&s>0){if(e.readOnly())for(var c=r.links(),h=0;h<c.length;h++){var d=c[h];n(d,h)}for(var f=r.knownProperties(),p={},h=0;h<f.length;h++){var m=f[h];p[m]=r.propertySchemas(m).displayOrder()}f.sort(function(e,t){return null==p[e]?null==p[t]?e>t?1:t>e?-1:0:1:null==p[t]?-1:p[e]=p[t]});for(var h=0;h<f.length;h++){var m=f[h];t(r.propertySchemas(m),o+Jsonary.joinPointer([m]),s-1)}}}function n(e,t){"link$"+t+"$"+e.rel();var n=Jsonary.escapeHtml(e.data.property("title").value()||e.rel()),r=n,a=null,o=!0;"edit"==e.rel()&&(a="save"),i.addLinkColumn(e,e.rel(),n,r,a,o)}var r=Jsonary.plugins.FancyTableRenderer,i=new r({sort:{},rowsPerPage:15}),a={},o=e.schemas().indexSchemas(0).getFull(),s=o.knownProperties().length>=8?0:1;return e.schemas().displayAsTable()&&(s=2),t(o,"",s),i},filter:function(e,t){if("array"==e.basicType()){if(t.displayAsTable())return!0;if(!t.tupleTyping()){var n=t.indexSchemas(0).getFull(),r=n.basicTypes();if(1==r.length&&"object"==r[0]&&n.knownProperties().length<20)return!0}}return!1}})),Jsonary.extendSchema({displayOrder:function(){return this.data.propertyValue("displayOrder")}}),Jsonary.extendSchemaList({displayOrder:function(){var e=null;return this.each(function(t,n){var r=n.displayOrder();null!=r&&(null==e||e>r)&&(e=r)}),e}}),Jsonary.extendSchema({displayAsTable:function(){return!!this.data.propertyValue("displayAsTable")}}),Jsonary.extendSchemaList({displayAsTable:function(){var e=!1;return this.each(function(t,n){e=e||n.displayAsTable()}),e}}),"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var e=document.createElement("style");e.innerHTML='.json-array-table{border-spacing:0;border-collapse:collapse}.json-array-table .json-array-table{width:100%;margin:-4px;width:calc(100% + 8px)}.json-array-table>thead>tr>th{background-color:#EEE;border-bottom:1px solid #666;padding:.3em;font-size:.9em;font-weight:700;text-align:center}.json-array-table>thead{border:1px solid #BBB}.json-array-table>thead>tr>th.json-array-table-pages{border-bottom:1px solid #BBB;background-color:#DDD}.json-array-table>thead>tr>th.json-array-table-pages .button{font-family:Courier New,monospace}.json-array-table>tbody>tr>td{border:1px solid #CCC;border-top-color:#DDD;border-bottom-color:#DDD;padding:3px;font-size:inherit;text-align:left}.json-array-table>tbody>tr>td.json-array-table-full{padding:.3em;background-color:#EEE}.json-array-table>tbody>tr>td.json-array-table-add{text-align:center;background-color:#F8F8F8;border:1px solid #DDD}.json-array-table-full-buttons{text-align:center}.json-array-table-full-title{text-align:center;margin:-.3em;margin-bottom:.5em;background-color:#CCC;border-bottom:1px solid #BBB;font-weight:700;padding:.2em}.json-array-table-move-select,.json-array-table-move-cancel,.json-array-table-move-to,.json-array-table-delete{display:block;width:16px;height:16px;text-indent:16px;overflow:hidden;background-position:center middle;background-repeat:no-repeat;opacity:.35}.json-array-table-move-select:hover,.json-array-table-move-cancel:hover,.json-array-table-move-to:hover,.json-array-table-delete:hover{opacity:1}.json-array-table-delete{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAApElEQVQ4y82SsQ3CMBBFHxEFAyAKF6HLCKTPHhnkJsgg2SODuDNFhJAHcIFsmhSWYgeQkeCkq/7/r7h/8G9zAcKGHhZPPmxFQgYSa0lIsCLh1raxsV42pfEuZDO8y0B4TBNV0wDgtWbfdRyHYZVJAWrA3PuewzwD4JTiNI4AZ+Aam6vS2lIAY0XwWuOUwimF1xorAmBeAT8+4ldrLH6k4lf+zTwBbL+JOS+cUboAAAAASUVORK5CYII=")}.json-array-table-move-select{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAdElEQVQ4y62Tyw2AIBBEH94oAauwB+qedrQEj3iRRBMW5TPJXAjzQnYHsLUB6XagUQFIkpKkKsQZ4V3S6zDGCLACRw1QDNcg7m/YgriWsAUJj2m3essv8PTpXOiXLxWm1WF4iNPWOKVIXVUe/kyfkFwY69IFeyZbUaKi2aEAAAAASUVORK5CYII=")}.json-array-table-move-cancel{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAZklEQVQ4y81SwQmAQAwLDuIYjpwtOlee8XNCxTs5KaKBvtKEpi3wN2wAfMO79YzFEeGBSea6Jo4I286Na6seh1mTafHFhKRJPhLjGJmkJVmSSeZIJyxvnLIUobTE8hnLj1R+5W+wA9RyupOydS/wAAAAAElFTkSuQmCC")}.json-array-table-move-up{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAW0lEQVQ4y+2QwQmAMAxFX4+OEKfoDp37r6MjeKwXhQomGM99kEvgPULApwL9GiOJAV1SlxRGiiNvkh7L1hrACuxR4FWOIuWr7EVKRvYiNnw7O/W+YOEfB5MJcAIH0y4k53GkLAAAAABJRU5ErkJggg==")}.json-array-table-move-down{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAY0lEQVQ4y+2RsQnAMAwEz2VGUKbwDp7710lGSOk0MYhgB8W1H4RAcC/xgqUlSE/fJvkLwIA6WbldYMAhKbS2lAKwA2dy85CJh30GIZM33DMYmvTgLxlQJVVJLTD7+6Ls0h7CNyr1LiTNtq8FAAAAAElFTkSuQmCC")}.json-array-table-sort,.json-array-table-sort-asc,.json-array-table-sort-desc{padding-left:15px;padding-right:15px;margin-left:-5px;margin-right:-5px}.json-array-table-sort-asc,.json-array-table-sort-desc{background-position:right center;background-repeat:no-repeat}.json-array-table-sort-text{display:block;float:right;width:0;overflow:hidden}.json-array-table-sort-asc{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAXklEQVQoz+3SuwmAQBBF0SPGNmG1lrENmCoWZGoH7pqssCyCn9gLE0xweW9g+ClpMaD5Is9IGN9ITRZilmPeHzUIWaon3IkL9iI1Fek7prriSYe+EK/OgRXb/08fOAC7tBnlR5zMuwAAAABJRU5ErkJggg==")}.json-array-table-sort-desc{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAW0lEQVQoz2NgGAUkAUY0NgsRev4yMDD8wyaxE0nyPxL+BxXfhs9UHQYGhgVoGmF4AVQeL9BlYGBYi2T7Pyhfl9iw0GFgYNgO1byWGBvRgT4DA0MHKTZic8FwAwDm/hlxhNq1AAAAAABJRU5ErkJggg==")}',document.head.appendChild(e)}(),"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var e=document.createElement("style");e.innerHTML='.jsonary .loading{margin:0;padding:15px;margin-left:15px;margin-right:15px;background-image:url("data:image/gif;base64,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");background-position:middle;background-repeat:no-repeat}.jsonary .link{color:#05C}.jsonary .link:hover{color:#07F;text-decoration:underline}.jsonary .jsonary-action,.jsonary a.jsonary-action{text-decoration:none}.jsonary .error,.jsonary .warning{border:1px solid;border-radius:3px;font-size:.8em;padding:.3em;padding-left:25px;padding-right:.5em;background-position:3px 50%;background-repeat:no-repeat}.jsonary .warning{border-color:#DBB;background-color:#F8F8F0;color:#820;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAG7AAABuwE67OPiAAAACXZwQWcAAAAQAAAAEABcxq3DAAAB2ElEQVQ4y6WTu2tUURCHvzn3nZu7j+hmtTDCBlstUqZQgvoHKGKjjdpIUJtgIwQsVQQNCqJYaaNYiIuYWOQvSCtEEQtJCEHi7jW72d372GNxTaJg1lUHBuacM/Od35yHaK35H1O9FuOqfT595ZzqSdBa/9aTOet0PHekG8+f0J1Z68xOeTsq0JF7xxyZFKN0Etmwb/9VC923xqT4x/ZgGIgBKjg8HL+xr/QNSBP/urF7nIX7N1l4cBdVOIhOzOm+AMmsdU0Gx3fBOuHiB8L3HxGpofxDQ9Fra/rPgDS4ahQrwDKOEhwloJYwcgHdxJvqCWhX1Q0jqOTEWAFzDS/I4w8Ng9NEvAaqOBK0XqpbP9fI1kN6KFaz6IYD+1NPrBgM+PS0hE4jRi+EIKBTh8Y73QpGozxjOgYwN0mNAblnFlxP8vVs1oTKpS+ZRvmxW7eDVS54jcV4ZnCMi9sKnogftnO13ETLEjfOABaszBQA2DtVhy6QgO54fKtK3PY2iuWzuqkAwjqP7YqXFduAk7mJYIpkwE0VqoV9ILDcGo+2WugsMxEcDzK5ySpoIIXS5VoWr2djEoAyzr48jfm1o9tnYKgXX59/PhctRX18zVXErWnlJ89+vYV/tO89rcJJiVkaLAAAACV0RVh0Y3JlYXRlLWRhdGUAMjAwOS0xMS0xNVQxNzowMjozNC0wNzowMLbnjhIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTAtMDItMjBUMjM6MjY6MjQtMDc6MDAuw1DWAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEwLTAxLTExVDA5OjI0OjQ0LTA3OjAwGJHf5wAAAGd0RVh0TGljZW5zZQBodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9saWNlbnNlcy9ieS1zYS8zLjAvIG9yIGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL0xHUEwvMi4xL1uPPGMAAAAldEVYdG1vZGlmeS1kYXRlADIwMDktMDMtMTlUMTA6NTI6NTEtMDY6MDB/aP0GAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAABN0RVh0U291cmNlAE94eWdlbiBJY29uc+wYrugAAAAndEVYdFNvdXJjZV9VUkwAaHR0cDovL3d3dy5veHlnZW4taWNvbnMub3JnL+83qssAAAAASUVORK5CYII=")}.jsonary .error{border-color:#DCB;background-color:#F8F0F0;color:#800;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAA3XAAAN1wFCKJt4AAAACXZwQWcAAAAQAAAAEABcxq3DAAACbklEQVQ4y41TS0sbYRQ9984kTia+sEKFmqLUbUi66kIIcSHFnVBKC4VCf0P2zT/wN7gpVLp20V0IrmtH0IrMwkcx0y5iqs2M+b6Ze7uor1YED5zdPeeee+GQquIm2pXKHBG9Y9eti0gZANhxtsTalqqu1oIgvDlPlwbtSoWJucFDQ+8fzs/7hVKJvakpAMB5FCE5OsqijY2BGtNUkZVaEMiVQbtSYXac9vDsbPXR0lIRSYKs14PEMQCAi0W44+NQz8P39fW4f3CwKVlWqwWBMAAQc6NYKlWnFxeLdncX59vbsJ0Osl+/kJ2ewh4fI9nZgd3bw+OlJd+fnn5KzA0AoFa5POfk85tzr14Np4eHkLMzgOial1AFVOGMjMAplRCurfUzY6rO28nJxoNyuZ7L5dh0OlCRa2bZLaZxDPI8IJ934uPjvqsi9dzoqGN+/kTY7YKIcLX3ZoKLFArgSaGA3MiIIyJ1NzOm7HgeBlGE558/4z749uIF8jMzyIwpu1maIksSpIPBvcQAkBoDThJkaQpXRbb6UTTvMOPLwgJABPo/+n9ncLGIfhRBRbZca0zrdxQ9G52aclNjrsV3magiNzaG351Oao1psVi72gtDY62FMCM15m4OBhBmWGvRC0Mj1q7ycrcbpsY0fwRBnwoFCNHV8C0xEahQwI8g6KfGNJe73ZBUFZ98n4m5nfP96vjMTJFUIYMBVOTvNY4DHhqCAujt7/dtHH9VkdrLOJarMn3M55mIGiBq+hMTnut5Ts73AVXY83PYOE6TkxOjqk2orrw25rpMN/GBeQ7AO2KuQ7V88dAtFWkBWH0j8k+d/wDGsYUOvG2ZLQAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxMC0wMi0yMFQyMzoyNDo0MC0wNzowMBgWrX8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTAtMDEtMTFUMDk6MTI6NDgtMDc6MDBLzaPVAAAANHRFWHRMaWNlbnNlAGh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL0dQTC8yLjAvbGoGqAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAATdEVYdFNvdXJjZQBHTk9NRS1Db2xvcnOqmUTiAAAAMXRFWHRTb3VyY2VfVVJMAGh0dHA6Ly9jb2RlLmdvb2dsZS5jb20vcC9nbm9tZS1jb2xvcnMvUB216wAAAABJRU5ErkJggg==")}.jsonary .prompt-outer{display:inline;position:fixed;text-align:center;left:0;right:0;top:0;bottom:0;padding:5%;z-index:10000;overflow:auto;background-color:#CCC;background-color:rgba(100,100,100,.3);background-image:URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AwdEQcKfNuiKQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAATElEQVQY043QsQ2AQAxD0Y9rlvBYbJQts8QNQMVJIOCcysWTJWerqgPA9uBx3b1fWQkCUIJm4wrZHkrQrfEPTbhCAErQ65ivLyhBACczESoFljB75gAAAABJRU5ErkJggg==")}.jsonary .prompt-inner{display:inline-block}.jsonary .prompt-overlay{position:fixed;top:0;left:0;bottom:0;right:0}.jsonary .prompt-box{position:relative;text-align:left;background-color:#fff;border:2px solid #000;border-radius:10px;padding:1em;padding-bottom:1.5em;padding-top:.5em}.jsonary .prompt-box h1{text-align:center;font-size:1.3em;font-weight:700;border:0;border-bottom:1px solid #000;margin:0}.jsonary .prompt-box h2{color:#666;text-align:center;font-size:1.1em;font-style:italic;border:0;margin:0;padding:0;margin-bottom:1em}.jsonary .prompt-buttons{position:relative;top:-13px;border:2px solid #000;border-bottom-left-radius:10px;border-bottom-right-radius:10px;padding-top:.3em;padding-bottom:.3em}.jsonary .prompt-buttons-top{padding:.3em;text-align:center}.jsonary .dialog-anchor{position:relative;height:1em}.jsonary .dialog-overlay{position:fixed;top:0;left:0;width:70%;height:100%;background-color:#000;padding-left:15%;padding-right:15%;background-color:rgba(100,100,100,.2);background-image:URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AwdEQcKfNuiKQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAATElEQVQY043QsQ2AQAxD0Y9rlvBYbJQts8QNQMVJIOCcysWTJWerqgPA9uBx3b1fWQkCUIJm4wrZHkrQrfEPTbhCAErQ65ivLyhBACczESoFljB75gAAAABJRU5ErkJggg==");z-index:1000;opacity:.5}.jsonary .dialog-box{position:absolute;top:-.1em;left:-0em;width:auto;height:auto;padding:.3em;padding-top:1.3em;border:2px solid #000;border-radius:5px;background-color:#FFF;box-shadow:0 0 20px rgba(0,0,0,.1),0 3px 5px rgba(0,0,0,.3);min-width:100px;z-index:1001}.jsonary .dialog-title{display:block;margin:-.3em;margin-top:-1.3em;margin-bottom:.3em;padding-left:3em;padding-right:3em;background-color:#EEE;border-bottom:2px solid #000;font-weight:700;border-top-left-radius:4px;border-top-right-radius:4px;white-space:pre}.jsonary .dialog-close{position:absolute;display:block;margin:0;top:0;left:0;font-weight:400;font-size:.8em}.jsonary .dialog-close.button,.jsonary .dialog-close .button{margin:0;border-top-left-radius:2px;border-bottom-left-radius:2px}.jsonary input[type=text]{border:1px solid;background-color:#FFF;border-radius:3px;border-color:#CCC;border-top-color:#A6A6A6;border-bottom-color:#DDD}.jsonary textarea,.jsonary select,.jsonary textarea:hover,.jsonary select:hover{border:1px solid;background-color:#FFF;border-radius:3px;border-color:#BBB;border-top-color:#AAA;border-bottom-color:#CCC}.jsonary select{box-shadow:-1px -1px 0 rgba(0,0,0,.05),1px 0 0 rgba(0,0,0,.025),0 1px 0 rgba(255,255,255,.5),-1px 0 0 rgba(255,255,255,.25)}.jsonary select:hover{box-shadow:-1px -1px 0 rgba(0,0,0,.1),1px 0 0 rgba(0,0,0,.05),0 1px 0 rgba(255,255,255,.5),-1px 0 0 rgba(255,255,255,.5)}.jsonary .button{display:inline;text-align:center;color:#444;font-weight:700;text-decoration:none;margin-left:.5em;margin-right:.5em;padding-left:.3em;padding-right:.3em;border:1px solid;border-radius:3px;border-left-color:#BBB;border-right-color:#DDD;border-top-color:#F3F3F3;border-bottom-color:#AAA;box-shadow:0 0 1px rgba(0,0,0,.9),0 2px 4px rgba(0,0,0,.05);background:#E4E4E4;font-family:"Trebuchet MS";white-space:nowrap;cursor:pointer}.jsonary .button:hover{color:#222;background:#EEE;box-shadow:0 0 1px rgba(0,0,0,1),0 0 4px rgba(255,255,255,1),0 2px 4px rgba(0,0,0,.05)}.jsonary .button:active{background-color:#E0E0E0;border-left-color:#C8C8C8;border-right-color:#DDD;border-top-color:#E8E8E8;border-bottom-color:#BBB;box-shadow:0 0 1px rgba(0,0,0,1),0 0 4px rgba(255,255,255,.7),0 2px 3px rgba(0,0,0,.05)}.jsonary .button.link{color:#05C;background-color:#E0E8F0}.jsonary .button.link:hover{color:#07F;background-color:#E8F0F8;background-image:none}.jsonary .button.action{color:#000;background-color:#F0B870;font-weight:700}.jsonary .button.action:hover{background-color:#FCC47C}.jsonary .button.disabled,.jsonary .button.disabled:hover{border-color:#DDD;color:#999;background-color:#EEE;cursor:default}',document.head.appendChild(e)}(),"undefined"!=typeof window&&"undefined"!=typeof document&&function(){var e=document.createElement("style");e.innerHTML='.json-schema,.json-link{margin-right:.5em;margin-left:.5em;border:1px solid #DD3;background-color:#FFB;padding-left:.5em;padding-right:.5em;color:#880;font-size:.85em;font-style:italic;text-decoration:none}.json-link{border:1px solid #88F;background-color:#DDF;color:#008;font-style:normal}.json-raw{display:inline;white-space:pre}.json-null{font-style:italic;color:#666}.valid{background-color:#DFD}.invalid{background-color:#FDD}textarea{vertical-align:middle}.json-object{width:100%;font-size:inherit}.json-object-title{font-weight:700}.json-object-outer{background-color:#FFF;background-color:rgba(255,255,255,.8);border-radius:3px}.json-object-outer>legend{background-color:#EEE;border:1px solid #BBB;border-radius:3px;font-size:.8em;padding:.2em;padding-left:.7em;padding-right:.7em}.json-object-pair{margin-bottom:.3em}.json-object-key{padding:0;vertical-align:top;width:4em}.json-object-key-text,.json-object-key-title{text-align:right;font-style:italic;padding-right:.5em;border-right:1px solid #000;white-space:pre}.json-object-key-title{font-weight:700;font-style:normal;min-height:1.2em}.json-object-value{padding-left:.5em;vertical-align:top}.json-object-delete-container,.json-array-delete-container{position:relative;vertical-align:top;padding-left:1.2em}.json-object-delete,.json-array-delete{position:absolute;left:0;top:0;font-family:Arial,sans-serif;font-style:normal;font-weight:700;font-size:.9em;color:red;text-decoration:none;margin-right:1em;opacity:.5;transition:opacity .05s ease-in;text-shadow:0 -1px 1px rgba(255,255,255,.7),0 1px 1px rgba(0,0,0,.8)}.json-object-delete:hover,.json-array-delete:hover{opacity:1}.json-object-delete-value{}.json-object-add{display:block;padding-left:2.2em;color:#888;font-size:.9em}.json-object-add-key,.json-object-add-key-new{text-decoration:none;margin-left:1em;color:#000;border:1px solid #888;background-color:#EEE}.json-object-add-key-new{border:1px dotted #BBB;background-color:#EEF;font-style:italic}.json-select-type-dialog-outer{position:relative}.json-select-type-dialog{position:absolute;top:-.65em;left:-.5em;width:12em;border:2px solid #000;border-radius:10px;background-color:#fff;padding:.5em;z-index:1;opacity:.95;box-shadow:0 1px 3px rgba(0,0,0,.1)}.json-select-type-background{position:fixed;top:0;right:0;bottom:0;left:0;background-image:URL("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AwdEQcKfNuiKQAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAAATElEQVQY043QsQ2AQAxD0Y9rlvBYbJQts8QNQMVJIOCcysWTJWerqgPA9uBx3b1fWQkCUIJm4wrZHkrQrfEPTbhCAErQ65ivLyhBACczESoFljB75gAAAABJRU5ErkJggg==")}.json-select-type{font-family:monospaced;font-weight:700;font-size:.8em;padding-left:.3em;padding-right:.3em}.json-array{font-size:inherit}.json-array-item{display:block}.json-array-add{display:block;padding-left:2.2em;color:#000;font-family:monospace;font-style:normal;font-weight:700;color:#00F;text-decoration:none;margin-right:1em}.json-string{white-space:pre-wrap;border-radius:3px;font-size:inherit}.json-string-content-editable{display:inline;display:inline-block;vertical-align:text-top;background-color:#FFF;background-color:rgba(255,255,255,.95);outline:1px solid #BBB;outline:1px solid rgba(0,0,0,.05);color:#444;margin:.1em;padding:.3em;font-family:inherit;text-shadow:none;font-size:.9em;line-height:1.2em;min-width:5em;min-height:1.2em;max-height:20em;overflow:auto;border:1px solid;background-color:#FFF;border-radius:3px;border-color:#CCC;border-top-color:#A6A6A6;border-bottom-color:#DDD}.json-string-content-editable:focus{color:#000;border-color:#48C;box-shadow:0 0 2px rgba(0,0,0,.1);z-index:1}.json-string-content-editable p{display:block!important;margin:0!important;padding:0!important}.json-string-content-editable *{position:static!important;margin:0!important;padding:0!important;font-size:inherit!important;font-family:inherit!important;color:#000!important;background:none!important;border:0!important;outline:0!important;font-weight:400!important;font-style:normal!important;text-decoration:none!important;text-transform:none!important;font-variant:normal!important;line-height:1.2em!important}textarea.json-string{font-size:inherit;font-weight:inherit;background-color:#FFF;background-color:rgba(255,255,255,.5);width:30%}.json-string-notice{color:#666;margin-left:.5em}.json-number{font-family:monospace;color:#000;font-weight:700;text-decoration:none;white-space:nowrap}input.json-number-input{width:3em;text-align:center;font-family:Trebuchet MS;font-weight:700}.json-number-increment,.json-number-decrement{font-family:monospace;padding-left:.5em;padding-right:.5em}.json-boolean-true,.json-boolean-false{font-family:monospace;color:#080;font-weight:700;text-decoration:none}.json-boolean-false{color:#800}.json-undefined-create{color:#008;text-decoration:none}.json-undefined-create:hover{color:#08F}.prompt-overlay{position:fixed;top:0;left:0;width:70%;height:100%;background-color:#000;padding-left:15%;padding-right:15%;background-color:rgba(100,100,100,.5)}.prompt-buttons{background-color:#EEE;border:2px solid #000;text-align:center;position:relative}.prompt-data{background-color:#fff;border:2px solid #000;border-radius:10px;position:relative}',document.head.appendChild(e)
}(),this}.call(this);