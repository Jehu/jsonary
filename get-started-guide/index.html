<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
  <head>
		<title>Get started with Jsonary and JSON Hyper-Schema</title>
		<link rel="stylesheet" href="../css/main.css">
		<meta name="viewport" content="width=960">
	</head>
	<body>
		<script src="http://ajax.cdnjs.com/ajax/libs/json2/20110223/json2.js"></script>
		<div align="center">
			<div id="content">
				<h1>Get started with Jsonary and JSON Hyper-Schema</h1>
				<div class="tagline">a quick guide to getting going</div>

				<div id="nav">
					back to
					<a class="nav-link" href="../">main page</a>
				</div>
				
				<h2>Extract the bundle</h2>
				<div class="section">
					<p><a href="../get-started-bundle.zip">The bundle</a> contains the Jsonary library, a standard set of renderers, and an in-browser AJAX-based "generic client", which can navigate APIs using JSON Hyper-Schema.
					<p>The contents of the bundle must be placed somewhere where cross-domain requests are not an issue (therefore, probably on the same server as your API).
				</div>

				<h2>Navigate to the bundle in your browser</h2>
				<div class="section">
					<p>If you navigate to the bundle in your browser, you should see a page a bit like <a href="../get-started-bundle/">this one</a>.
					<p>At this point, you should be able to enter a URL from your JSON API, and see it displayed.
				</div>

				<h2>Reference a hyper-schema</h2>
				<div class="section">
					<p>Now, you need to modify the HTTP headers for that page, to reference a hyper-schema.  The simplest way to do this is using the <code>profile=</code> parameter on the Content-Type header:
<pre class="example code">
Content-Type: application/json; profile=/path/to/hyper-schema
</pre>
					<p>You probably don't have a hyper-schema ready, so an example schema is provided in the bundle directory, called <code>example-schema.json</code>.  The result should look something <a href="../get-started-bundle/#../demos/json/example-data.php">like this</a> - you should see the data annotated with the title of your schema.
				</div>

				<h2>Edit your hyper-schema</h2>
				<div class="section">
					<p>Now, you can create your own hyper-schema, and reference that instead of the example one.  Refreshing the page should re-fetch the data and the schema, so you can see the effect your changes have made.
					<p>If your schema is a static file, and you are not seeing your changes appear, you may find it is being cached by your browser.
					<p>The end result should be something like <a href="../get-started-bundle/#../blog/">this</a>, with the schema titles and links annotated on your data.  Clicking the links should navigate the client to the new URL, or present a form/confirmation dialog if necessary.  As you describe more and more of the API with hyper-schemas, the client should start to be able to interact with it.
				</div>
				
				<h2>Where next?</h2>
				<div class="section">
					<p>Once you have a client working, you can start adding custom renderers for particular parts of your API.  <a href="../feature-tour/stage5/">This page</a> should give you a good start.
				</div>

				<h2>Modifications</h2>
				<div class="section">
					<p>Your API might require some small modifications that cannot be covered by the schema - authentication, for example.  The code for the "generic client" is fairly small, and it should be straightforward to modify it appropriately.
					<p>The most common modification is to add information (such as an OAuth token) to all outgoing requests.  For this, you probably want to use a "link pre-handler" - a callback which is called before all links are followed:
<pre class="example code">
Jsonary.addLinkPreHandler(function(link, dataToSubmit) {
	if (dataToSubmit.basicType() == "object") {
		dataToSubmit.property("access_token").setValue(accessToken);
	}
});
</pre>
					<p>You will also probably want to modify the <code>navigateTo()</code> function (the line where it calls <code>Jsonary.getData()</code> to include the token.
				</div>
			</div>
		</div>
	</body>
</html>
