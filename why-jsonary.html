<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>Why Jsonary?</title>
		<link rel="stylesheet" href="css/main.css">
		<link rel="stylesheet" href="css/json-highlight.css">
		<link rel="stylesheet" href="renderers/basic.jsonary.css" />
		<link rel="stylesheet" href="renderers/common.css" />
		<meta name="viewport" content="width=960">
	</head>
	<body>
		<script src="jsonary.js"></script>
		<script src="plugins/jsonary.undo.js"></script>
		<script src="renderers/basic.jsonary.js"></script>
		<script src="renderers/list-schemas.js"></script>
		<script src="renderers/list-links.js"></script>
		<div align="center">
			<div id="content">
				<h1>Why Jsonary?</h1>
				<div class="tagline">What can it do for me?</div>

				<div id="nav">
					back to
					<a class="nav-link" href=".">main page</a>
				</div>
				
				<h2>Hyper-schemas are powerful</h2>
				<div class="section">
					<p>JSON Hyper-Schemas allow APIs to provide their own documentation in a machine-readable format, allowing clients to adapt to any changes in the API.  See <a href="why-hyper-schema.html">this page</a> for why you should support them for your JSON API.
					<p>However, hard-coding API details into your client is more straightforward than fetching and parsing a hyper-schema to find the hyper-links.  When it comes to a tradeoff between "easy" and "flexible", "easy" often wins.
				</div>
		
				<h2>Enter Jsonary</h2>
				<div class="section">
					<p>Jsonary is a library that aims to make using hyper-schemas <em>easier</em> than hard-coding the API details into your client.
					<p>Jsonary presents wrappers around your data (and the schemas).  This allows for schema/data associations, callbacks for data/schema changes, and easy access to information about links and schemas.
					<p>This gives your client a huge head start when it comes to flexibility - in fact, it's very simple to create a <a href="walkthrough-basic/">"generic" client</a> that takes all of its cues from the server.  This is not only useful for debugging, but the UI can be replaced piece-by-piece to eventually form your production client.
				</div>

				<h2>Schemas and links</h2>
				<div class="section">
					<p>Jsonary handles everything to do with schemas - fetching them, assigning them to data, inspecting them for data constraints, and using them to infer hyper-links from the data.
<pre class="example code">
Jsonary.getData("/some/url/", function (data) {
	var schemas = data.schemas(); // already associated with schema(s),via HTTP headers.
	var links = data.links();
	var subProperty = data.property("author");
	var subPropertyLinks = subProperty.links();
});
</pre>
					<p>Editable data can be queried for constraints about its possible structure:
<pre class="example code">
var allowedTypes = data.schemas().types();  // possible types, e.g. ["object", "string"]
var requiredProperties = data.schemas().requiredProperties() // required properties for object, e.g. ["name", "email"]
var minLength = data.schemas().minLength(); // minimum string length, e.g. 1
</pre>
					<p>This can be used to create an adaptive UI.  But if you're creating a UI, it gets better:
				</div>

				<h2>The rendering system</h2>
				<div class="section">
					<p>Jsonary comes with a rendering system.  Just call through to <code>Jsonary.render(element, data)</code>, and that element will be filled with a UI representing the data (editable if the data is editable).
					<p>You can register your own renderers, taking responsibility for certain types of data, or data with particular schemas applied, for instance.  Renderers can define their UI as HTML (including clickable links to perform actions), by manipulating DOM nodes, or both.
					<p>For editable data, the default set of renderers are completely adaptive to the constraints specified by the data schema.  For example, <a href="demos/index-input.html">this page</a> lets you input some data/schema, and see how the default renderers respond to your constraints.
				</div>
				
				<h2>Following hyper-links</h2>
				<div class="section">
					<p>Jsonary separates following links from handling links being followed.  So the UI code can define that when a button is clicked, a link on the data is followed, but it doesn't need to specify what to actually *do* when following the link.
					<p>For example, there is an optional default renderer that provides clickable links in the interface for each hyper-link in the data.  But these don't specify what to do with the link, just that it should be followed - "link handlers" are registered to take whatever action is necessary.

<pre class="example code">
Jsonary.addLinkPreHandler(function (link, submissionData) {
	alert("Pre-handler: " + link.method + "ing to: " + link.href + "\nData: " + submissionData.json());
});
Jsonary.addLinkHandler(function (link, submissionData, request) {
	alert("Request sent");
	request.getData(function (data) {
		alert("Data received:\n" + JSON.stringify(data.value(), null, 4));
	});
	return false;
});

data.renderTo("demo-element-id");
</pre>

					<div id="example-links" class="example"></div>
<script>
Jsonary.addLinkPreHandler(function (link, submissionData) {
	alert("Pre-handler: " + link.method + "ing to: " + link.href + "\nData: " + submissionData.json());
});
Jsonary.addLinkHandler(function (link, submissionData, request) {
	alert("Request sent");
	request.getData(function (data) {
		alert("Data received:\n" + JSON.stringify(data.value(), null, 4));
	});
	return false;
});

Jsonary.create({
	"title": "Example data",
	"items": [
		{"id": 1},
		{"id": 2},
		{"id": 3}
	]
}, null, true).addSchema(Jsonary.createSchema({
	"properties": {
		"items": {
			"items": {
				"title": "Item",
				"links": [
					{
						"rel": "test",
						"href": "feature-tour/stage3/mirror.php{?id*}",
						"method": "POST",
						"schema": {
							"type": "Submission data",
							"type": "object",
							"properties": {
								"multipleOf5": {"type": "number", "divisibleBy": 5},
								"string": {"type": "string"}
							},
							"required": ["multipleOf5", "string"]
						}
					}
				]
			}
		}
	}
})).renderTo("example-links");
</script>
				</div>

				<h2>Questions?  Corrections?  Contributions?</h2>
				<div class="section">
					<p>Come on down to the <a href="http://github.com/geraintluff/jsonary">GitHub repo</a>.
				</div>
			</div>
		</div>
		<script src="js/json-highlight.js"></script>
	</body>
</html>
